import{r as C,a as I0}from"./vendor-DbAb9B2p.js";import{u as Co,a as E0,L as cr,b as If,B as N0,R as A0,c as Oe,N as br}from"./router-D1Feeoxp.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var Ef={exports:{}},Ro={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=C,j0=Symbol.for("react.element"),C0=Symbol.for("react.fragment"),R0=Object.prototype.hasOwnProperty,P0=S0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k0={key:!0,ref:!0,__self:!0,__source:!0};function Nf(t,e,n){var s,r={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)R0.call(e,s)&&!k0.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:j0,type:t,key:i,ref:a,props:r,_owner:P0.current}}Ro.Fragment=C0;Ro.jsx=Nf;Ro.jsxs=Nf;Ef.exports=Ro;var o=Ef.exports,Af,Dd=I0;Af=Dd.createRoot,Dd.hydrateRoot;var Vd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},D0=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],a=t[n++],c=t[n++],u=((r&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},jf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,c=a?t[r+1]:0,u=r+2<t.length,d=u?t[r+2]:0,h=i>>2,f=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,x=d&63;u||(x=64,a||(g=64)),s.push(n[h],n[f],n[g],n[x])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sf(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):D0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||c==null||d==null||f==null)throw new V0;const g=i<<2|c>>4;if(s.push(g),d!==64){const x=c<<4&240|d>>2;if(s.push(x),f!==64){const w=d<<6&192|f;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class V0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M0=function(t){const e=Sf(t);return jf.encodeByteArray(e,!0)},to=function(t){return M0(t).replace(/\./g,"")},Cf=function(t){try{return jf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=()=>O0().__FIREBASE_DEFAULTS__,F0=()=>{if(typeof process>"u"||typeof Vd>"u")return;const t=Vd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},U0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Cf(t[1]);return e&&JSON.parse(e)},Po=()=>{try{return L0()||F0()||U0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rf=t=>{var e,n;return(n=(e=Po())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Pf=t=>{const e=Rf(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},kf=()=>{var t;return(t=Po())===null||t===void 0?void 0:t.config},Df=t=>{var e;return(e=Po())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[to(JSON.stringify(n)),to(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function z0(){var t;const e=(t=Po())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function q0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function H0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function G0(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function K0(){return!z0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q0(){try{return typeof indexedDB=="object"}catch{return!1}}function J0(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="FirebaseError";class Lt extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Y0,Object.setPrototypeOf(this,Lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yr.prototype.create)}}class Yr{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?X0(i,s):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new Lt(r,c,s)}}function X0(t,e){return t.replace(Z0,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Z0=/\{\$([^}]+)}/g;function ev(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ss(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],a=e[r];if(Md(i)&&Md(a)){if(!Ss(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Md(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mr(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function fr(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function tv(t,e){const n=new nv(t,e);return n.subscribe.bind(n)}class nv{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");sv(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=ja),r.error===void 0&&(r.error=ja),r.complete===void 0&&(r.complete=ja);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sv(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ja(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t){return t&&t._delegate?t._delegate:t}class gn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new B0;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ov(e))try{this.getOrInitializeService({instanceIdentifier:kn})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=kn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kn){return this.instances.has(e)}getOptions(e=kn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);s===c&&a.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=kn){return this.component?this.component.multipleInstances?e:kn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iv(t){return t===kn?void 0:t}function ov(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const lv={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},cv=oe.INFO,uv={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},dv=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=uv[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ec{constructor(e){this.name=e,this._logLevel=cv,this._logHandler=dv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const hv=(t,e)=>e.some(n=>t instanceof n);let Od,Ld;function mv(){return Od||(Od=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fv(){return Ld||(Ld=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mf=new WeakMap,sl=new WeakMap,Of=new WeakMap,Ca=new WeakMap,tc=new WeakMap;function pv(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(mn(t.result)),r()},a=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Mf.set(n,t)}).catch(()=>{}),tc.set(e,t),e}function gv(t){if(sl.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),r()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});sl.set(t,e)}let rl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Of.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yv(t){rl=t(rl)}function xv(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Ra(this),e,...n);return Of.set(s,e.sort?e.sort():[e]),mn(s)}:fv().includes(t)?function(...e){return t.apply(Ra(this),e),mn(Mf.get(this))}:function(...e){return mn(t.apply(Ra(this),e))}}function vv(t){return typeof t=="function"?xv(t):(t instanceof IDBTransaction&&gv(t),hv(t,mv())?new Proxy(t,rl):t)}function mn(t){if(t instanceof IDBRequest)return pv(t);if(Ca.has(t))return Ca.get(t);const e=vv(t);return e!==t&&(Ca.set(t,e),tc.set(e,t)),e}const Ra=t=>tc.get(t);function bv(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),c=mn(a);return s&&a.addEventListener("upgradeneeded",u=>{s(mn(a.result),u.oldVersion,u.newVersion,mn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const wv=["get","getKey","getAll","getAllKeys","count"],_v=["put","add","delete","clear"],Pa=new Map;function Fd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pa.get(e))return Pa.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=_v.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||wv.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,r?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),r&&u.done]))[0]};return Pa.set(e,i),i}yv(t=>({...t,get:(e,n,s)=>Fd(e,n)||t.get(e,n,s),has:(e,n)=>!!Fd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Iv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Iv(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const il="@firebase/app",Ud="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt=new ec("@firebase/app"),Ev="@firebase/app-compat",Nv="@firebase/analytics-compat",Av="@firebase/analytics",Sv="@firebase/app-check-compat",jv="@firebase/app-check",Cv="@firebase/auth",Rv="@firebase/auth-compat",Pv="@firebase/database",kv="@firebase/data-connect",Dv="@firebase/database-compat",Vv="@firebase/functions",Mv="@firebase/functions-compat",Ov="@firebase/installations",Lv="@firebase/installations-compat",Fv="@firebase/messaging",Uv="@firebase/messaging-compat",Bv="@firebase/performance",$v="@firebase/performance-compat",zv="@firebase/remote-config",qv="@firebase/remote-config-compat",Wv="@firebase/storage",Hv="@firebase/storage-compat",Gv="@firebase/firestore",Kv="@firebase/vertexai-preview",Qv="@firebase/firestore-compat",Jv="firebase",Yv="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="[DEFAULT]",Xv={[il]:"fire-core",[Ev]:"fire-core-compat",[Av]:"fire-analytics",[Nv]:"fire-analytics-compat",[jv]:"fire-app-check",[Sv]:"fire-app-check-compat",[Cv]:"fire-auth",[Rv]:"fire-auth-compat",[Pv]:"fire-rtdb",[kv]:"fire-data-connect",[Dv]:"fire-rtdb-compat",[Vv]:"fire-fn",[Mv]:"fire-fn-compat",[Ov]:"fire-iid",[Lv]:"fire-iid-compat",[Fv]:"fire-fcm",[Uv]:"fire-fcm-compat",[Bv]:"fire-perf",[$v]:"fire-perf-compat",[zv]:"fire-rc",[qv]:"fire-rc-compat",[Wv]:"fire-gcs",[Hv]:"fire-gcs-compat",[Gv]:"fire-fst",[Qv]:"fire-fst-compat",[Kv]:"fire-vertex","fire-js":"fire-js",[Jv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Map,Zv=new Map,al=new Map;function Bd(t,e){try{t.container.addComponent(e)}catch(n){Kt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zn(t){const e=t.name;if(al.has(e))return Kt.debug(`There were multiple attempts to register component ${e}.`),!1;al.set(e,t);for(const n of no.values())Bd(n,t);for(const n of Zv.values())Bd(n,t);return!0}function ko(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fn=new Yr("app","Firebase",eb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=Yv;function Lf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:ol,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw fn.create("bad-app-name",{appName:String(r)});if(n||(n=kf()),!n)throw fn.create("no-options");const i=no.get(r);if(i){if(Ss(n,i.options)&&Ss(s,i.config))return i;throw fn.create("duplicate-app",{appName:r})}const a=new av(r);for(const u of al.values())a.addComponent(u);const c=new tb(n,s,a);return no.set(r,c),c}function nc(t=ol){const e=no.get(t);if(!e&&t===ol&&kf())return Lf();if(!e)throw fn.create("no-app",{appName:t});return e}function St(t,e,n){var s;let r=(s=Xv[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kt.warn(c.join(" "));return}zn(new gn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="firebase-heartbeat-database",sb=1,Pr="firebase-heartbeat-store";let ka=null;function Ff(){return ka||(ka=bv(nb,sb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pr)}catch(n){console.warn(n)}}}}).catch(t=>{throw fn.create("idb-open",{originalErrorMessage:t.message})})),ka}async function rb(t){try{const n=(await Ff()).transaction(Pr),s=await n.objectStore(Pr).get(Uf(t));return await n.done,s}catch(e){if(e instanceof Lt)Kt.warn(e.message);else{const n=fn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kt.warn(n.message)}}}async function $d(t,e){try{const s=(await Ff()).transaction(Pr,"readwrite");await s.objectStore(Pr).put(e,Uf(t)),await s.done}catch(n){if(n instanceof Lt)Kt.warn(n.message);else{const s=fn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kt.warn(s.message)}}}function Uf(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=1024,ob=30*24*60*60*1e3;class ab{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cb(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=zd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=ob}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Kt.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zd(),{heartbeatsToSend:s,unsentEntries:r}=lb(this._heartbeatsCache.heartbeats),i=to(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kt.warn(n),""}}}function zd(){return new Date().toISOString().substring(0,10)}function lb(t,e=ib){const n=[];let s=t.slice();for(const r of t){const i=n.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),qd(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),qd(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class cb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Q0()?J0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return $d(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return $d(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function qd(t){return to(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){zn(new gn("platform-logger",e=>new Tv(e),"PRIVATE")),zn(new gn("heartbeat",e=>new ab(e),"PRIVATE")),St(il,Ud,t),St(il,Ud,"esm2017"),St("fire-js","")}ub("");function sc(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function Bf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const db=Bf,$f=new Yr("auth","Firebase",Bf());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new ec("@firebase/auth");function hb(t,...e){so.logLevel<=oe.WARN&&so.warn(`Auth (${Yn}): ${t}`,...e)}function $i(t,...e){so.logLevel<=oe.ERROR&&so.error(`Auth (${Yn}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t,...e){throw rc(t,...e)}function jt(t,...e){return rc(t,...e)}function zf(t,e,n){const s=Object.assign(Object.assign({},db()),{[e]:n});return new Yr("auth","Firebase",s).create(e,{appName:t.name})}function Ht(t){return zf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rc(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return $f.create(t,...e)}function J(t,e,...n){if(!t)throw rc(e,...n)}function zt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $i(e),new Error(e)}function Qt(t,e){t||zt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mb(){return Wd()==="http:"||Wd()==="https:"}function Wd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mb()||W0()||"connection"in navigator)?navigator.onLine:!0}function pb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qt(n>e,"Short delay should be less than long delay!"),this.isMobile=$0()||H0()}get(){return fb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t,e){Qt(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new Zr(3e4,6e4);function _n(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Tn(t,e,n,s,r={}){return Wf(t,r,async()=>{let i={},a={};s&&(e==="GET"?a=s:i={body:JSON.stringify(s)});const c=Xr(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return q0()||(d.referrerPolicy="no-referrer"),qf.fetch()(Hf(t,t.config.apiHost,n,c),d)})}async function Wf(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},gb),e);try{const r=new vb(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Ci(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ci(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Ci(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Ci(t,"user-disabled",a);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw zf(t,h,d);_t(t,h)}}catch(r){if(r instanceof Lt)throw r;_t(t,"network-request-failed",{message:String(r)})}}async function ei(t,e,n,s,r={}){const i=await Tn(t,e,n,s,r);return"mfaPendingCredential"in i&&_t(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Hf(t,e,n,s){const r=`${e}${n}?${s}`;return t.config.emulator?ic(t.config,r):`${t.config.apiScheme}://${r}`}function xb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(jt(this.auth,"network-request-failed")),yb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ci(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=jt(t,e,s);return r.customData._tokenResponse=n,r}function Hd(t){return t!==void 0&&t.enterprise!==void 0}class bb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function wb(t,e){return Tn(t,"GET","/v2/recaptchaConfig",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(t,e){return Tn(t,"POST","/v1/accounts:delete",e)}async function Gf(t,e){return Tn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tb(t,e=!1){const n=Ie(t),s=await n.getIdToken(e),r=oc(s);J(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:wr(Da(r.auth_time)),issuedAtTime:wr(Da(r.iat)),expirationTime:wr(Da(r.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Da(t){return Number(t)*1e3}function oc(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return $i("JWT malformed, contained fewer than 3 sections"),null;try{const r=Cf(n);return r?JSON.parse(r):($i("Failed to decode base64 JWT payload"),null)}catch(r){return $i("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Gd(t){const e=oc(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Lt&&Ib(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Ib({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(t){var e;const n=t.auth,s=await t.getIdToken(),r=await kr(t,Gf(n,{idToken:s}));J(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Kf(i.providerUserInfo):[],c=Ab(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),h=u?d:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new cl(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function Nb(t){const e=Ie(t);await ro(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ab(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Kf(t){return t.map(e=>{var{providerId:n}=e,s=sc(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sb(t,e){const n=await Wf(t,{},async()=>{const s=Xr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,a=Hf(t,r,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",qf.fetch()(a,{method:"POST",headers:c,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jb(t,e){return Tn(t,"POST","/v2/accounts:revokeToken",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=Gd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await Sb(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,a=new Ts;return s&&(J(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(J(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(J(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ts,this.toJSON())}_performRefresh(){return zt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qt{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=sc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Eb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cl(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await kr(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Tb(this,e)}reload(){return Nb(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ro(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nt(this.auth.app))return Promise.reject(Ht(this.auth));const e=await this.getIdToken();return await kr(this,_b(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,a,c,u,d,h;const f=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(a=n.photoURL)!==null&&a!==void 0?a:void 0,_=(c=n.tenantId)!==null&&c!==void 0?c:void 0,A=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,P=(d=n.createdAt)!==null&&d!==void 0?d:void 0,k=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:M,isAnonymous:B,providerData:O,stsTokenManager:E}=n;J(S&&E,e,"internal-error");const y=Ts.fromJSON(this.name,E);J(typeof S=="string",e,"internal-error"),rn(f,e.name),rn(g,e.name),J(typeof M=="boolean",e,"internal-error"),J(typeof B=="boolean",e,"internal-error"),rn(x,e.name),rn(w,e.name),rn(_,e.name),rn(A,e.name),rn(P,e.name),rn(k,e.name);const b=new qt({uid:S,auth:e,email:g,emailVerified:M,displayName:f,isAnonymous:B,photoURL:w,phoneNumber:x,tenantId:_,stsTokenManager:y,createdAt:P,lastLoginAt:k});return O&&Array.isArray(O)&&(b.providerData=O.map(T=>Object.assign({},T))),A&&(b._redirectEventId=A),b}static async _fromIdTokenResponse(e,n,s=!1){const r=new Ts;r.updateFromServerResponse(n);const i=new qt({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await ro(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];J(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Kf(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),c=new Ts;c.updateFromIdToken(s);const u=new qt({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new cl(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=new Map;function Wt(t){Qt(t instanceof Function,"Expected a class definition");let e=Kd.get(t);return e?(Qt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Kd.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Qf.type="NONE";const Qd=Qf;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t,e,n){return`firebase:${t}:${e}:${n}`}class Is{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=zi(this.userKey,r.apiKey,i),this.fullPersistenceKey=zi("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Is(Wt(Qd),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||Wt(Qd);const a=zi(s,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(a);if(h){const f=qt._fromJSON(e,h);d!==i&&(c=f),i=d;break}}catch{}const u=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Is(i,e,s):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Is(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zf(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jf(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tp(e))return"Blackberry";if(np(e))return"Webos";if(Yf(e))return"Safari";if((e.includes("chrome/")||Xf(e))&&!e.includes("edge/"))return"Chrome";if(ep(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Jf(t=Xe()){return/firefox\//i.test(t)}function Yf(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xf(t=Xe()){return/crios\//i.test(t)}function Zf(t=Xe()){return/iemobile/i.test(t)}function ep(t=Xe()){return/android/i.test(t)}function tp(t=Xe()){return/blackberry/i.test(t)}function np(t=Xe()){return/webos/i.test(t)}function ac(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Cb(t=Xe()){var e;return ac(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Rb(){return G0()&&document.documentMode===10}function sp(t=Xe()){return ac(t)||ep(t)||np(t)||tp(t)||/windows phone/i.test(t)||Zf(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t,e=[]){let n;switch(t){case"Browser":n=Jd(Xe());break;case"Worker":n=`${Jd(Xe())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yn}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kb(t,e={}){return Tn(t,"GET","/v2/passwordPolicy",_n(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=6;class Vb{constructor(e){var n,s,r,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:Db,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yd(this),this.idTokenSubscription=new Yd(this),this.beforeStateQueue=new Pb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$f,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wt(n)),this._initializationPromise=this.queue(async()=>{var s,r;if(!this._deleted&&(this.persistenceManager=await Is.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gf(this,{idToken:e}),s=await qt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Nt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ro(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nt(this.app))return Promise.reject(Ht(this));const n=e?Ie(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nt(this.app)?Promise.reject(Ht(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nt(this.app)?Promise.reject(Ht(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kb(this),n=new Vb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yr("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await jb(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wt(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Is.create(this,[Wt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&hb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Xn(t){return Ie(t)}class Yd{constructor(e){this.auth=e,this.observer=null,this.addObserver=tv(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ob(t){Do=t}function ip(t){return Do.loadJS(t)}function Lb(){return Do.recaptchaEnterpriseScript}function Fb(){return Do.gapiScript}function Ub(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Bb="recaptcha-enterprise",$b="NO_RECAPTCHA";class zb{constructor(e){this.type=Bb,this.auth=Xn(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{wb(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new bb(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function r(i,a,c){const u=window.grecaptcha;Hd(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a($b)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{s(this.auth).then(c=>{if(!n&&Hd(window.grecaptcha))r(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Lb();u.length!==0&&(u+=c),ip(u).then(()=>{r(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function Xd(t,e,n,s=!1){const r=new zb(t);let i;try{i=await r.verify(n)}catch{i=await r.verify(n,!0)}const a=Object.assign({},e);return s?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ul(t,e,n,s){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Xd(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Xd(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t,e){const n=ko(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Ss(i,e??{}))return r;_t(r,"already-initialized")}return n.initialize({options:e})}function Wb(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Wt);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Hb(t,e,n){const s=Xn(t);J(s._canInitEmulator,s,"emulator-config-failed"),J(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=op(e),{host:a,port:c}=Gb(e),u=c===null?"":`:${c}`;s.config.emulator={url:`${i}//${a}${u}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})}),Kb()}function op(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Gb(t){const e=op(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Zd(s.substr(i.length+1))}}else{const[i,a]=s.split(":");return{host:i,port:Zd(a)}}}function Zd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Kb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zt("not implemented")}_getIdTokenResponse(e){return zt("not implemented")}_linkToIdToken(e,n){return zt("not implemented")}_getReauthenticationResolver(e){return zt("not implemented")}}async function Qb(t,e){return Tn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(t,e){return ei(t,"POST","/v1/accounts:signInWithPassword",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(t,e){return ei(t,"POST","/v1/accounts:signInWithEmailLink",_n(t,e))}async function Xb(t,e){return ei(t,"POST","/v1/accounts:signInWithEmailLink",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends lc{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Dr(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Dr(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ul(e,n,"signInWithPassword",Jb);case"emailLink":return Yb(e,{email:this._email,oobCode:this._password});default:_t(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ul(e,s,"signUpPassword",Qb);case"emailLink":return Xb(e,{idToken:n,email:this._email,oobCode:this._password});default:_t(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Es(t,e){return ei(t,"POST","/v1/accounts:signInWithIdp",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="http://localhost";class qn extends lc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_t("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=sc(n,["providerId","signInMethod"]);if(!s||!r)return null;const a=new qn(s,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Es(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Es(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Es(e,n)}buildRequest(){const e={requestUri:Zb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xr(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tw(t){const e=mr(fr(t)).link,n=e?mr(fr(e)).deep_link_id:null,s=mr(fr(t)).deep_link_id;return(s?mr(fr(s)).link:null)||s||n||e||t}class cc{constructor(e){var n,s,r,i,a,c;const u=mr(fr(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(s=u.oobCode)!==null&&s!==void 0?s:null,f=ew((r=u.mode)!==null&&r!==void 0?r:null);J(d&&h&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=tw(e);try{return new cc(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.providerId=Us.PROVIDER_ID}static credential(e,n){return Dr._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=cc.parseLink(n);return J(s,"argument-error"),Dr._fromEmailAndCode(e,s.code,s.tenantId)}}Us.PROVIDER_ID="password";Us.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Us.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends ap{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends ti{constructor(){super("facebook.com")}static credential(e){return qn._fromParams({providerId:an.PROVIDER_ID,signInMethod:an.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return an.credentialFromTaggedObject(e)}static credentialFromError(e){return an.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return an.credential(e.oauthAccessToken)}catch{return null}}}an.FACEBOOK_SIGN_IN_METHOD="facebook.com";an.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends ti{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qn._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ln.credentialFromTaggedObject(e)}static credentialFromError(e){return ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ln.credential(n,s)}catch{return null}}}ln.GOOGLE_SIGN_IN_METHOD="google.com";ln.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends ti{constructor(){super("github.com")}static credential(e){return qn._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cn.credentialFromTaggedObject(e)}static credentialFromError(e){return cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cn.credential(e.oauthAccessToken)}catch{return null}}}cn.GITHUB_SIGN_IN_METHOD="github.com";cn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends ti{constructor(){super("twitter.com")}static credential(e,n){return qn._fromParams({providerId:un.PROVIDER_ID,signInMethod:un.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return un.credentialFromTaggedObject(e)}static credentialFromError(e){return un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return un.credential(n,s)}catch{return null}}}un.TWITTER_SIGN_IN_METHOD="twitter.com";un.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nw(t,e){return ei(t,"POST","/v1/accounts:signUp",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await qt._fromIdTokenResponse(e,s,r),a=eh(s);return new Wn({user:i,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=eh(s);return new Wn({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function eh(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Lt{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,io.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new io(e,n,s,r)}}function lp(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?io._fromErrorAndOperation(t,i,e,s):i})}async function sw(t,e,n=!1){const s=await kr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wn._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(t,e,n=!1){const{auth:s}=t;if(Nt(s.app))return Promise.reject(Ht(s));const r="reauthenticate";try{const i=await kr(t,lp(s,r,e,t),n);J(i.idToken,s,"internal-error");const a=oc(i.idToken);J(a,s,"internal-error");const{sub:c}=a;return J(t.uid===c,s,"user-mismatch"),Wn._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_t(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cp(t,e,n=!1){if(Nt(t.app))return Promise.reject(Ht(t));const s="signIn",r=await lp(t,s,e),i=await Wn._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function iw(t,e){return cp(Xn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function up(t){const e=Xn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Vr(t,e,n){if(Nt(t.app))return Promise.reject(Ht(t));const s=Xn(t),a=await ul(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nw).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&up(t),u}),c=await Wn._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(c.user),c}function uc(t,e,n){return Nt(t.app)?Promise.reject(Ht(t)):iw(Ie(t),Us.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&up(t),s})}function ow(t,e,n,s){return Ie(t).onIdTokenChanged(e,n,s)}function aw(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function lw(t,e,n,s){return Ie(t).onAuthStateChanged(e,n,s)}function oo(t){return Ie(t).signOut()}const ao="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ao,"1"),this.storage.removeItem(ao),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=1e3,uw=10;class hp extends dp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},i=this.storage.getItem(s);Rb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,uw):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},cw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hp.type="LOCAL";const dw=hp;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends dp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mp.type="SESSION";const fp=mp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Vo(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await hw(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vo.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=dc("",20);r.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(f){const g=f;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return window}function fw(t){Ct().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){return typeof Ct().WorkerGlobalScope<"u"&&typeof Ct().importScripts=="function"}async function pw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gw(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yw(){return pp()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="firebaseLocalStorageDb",xw=1,lo="firebaseLocalStorage",yp="fbase_key";class ni{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mo(t,e){return t.transaction([lo],e?"readwrite":"readonly").objectStore(lo)}function vw(){const t=indexedDB.deleteDatabase(gp);return new ni(t).toPromise()}function dl(){const t=indexedDB.open(gp,xw);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(lo,{keyPath:yp})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(lo)?e(s):(s.close(),await vw(),e(await dl()))})})}async function th(t,e,n){const s=Mo(t,!0).put({[yp]:e,value:n});return new ni(s).toPromise()}async function bw(t,e){const n=Mo(t,!1).get(e),s=await new ni(n).toPromise();return s===void 0?null:s.value}function nh(t,e){const n=Mo(t,!0).delete(e);return new ni(n).toPromise()}const ww=800,_w=3;class xp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dl(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>_w)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vo._getInstance(yw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pw(),!this.activeServiceWorker)return;this.sender=new mw(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dl();return await th(e,ao,"1"),await nh(e,ao),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>th(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>bw(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nh(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Mo(r,!1).getAll();return new ni(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ww)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xp.type="LOCAL";const Tw=xp;new Zr(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e){return e?Wt(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends lc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Es(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Es(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Es(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ew(t){return cp(t.auth,new hc(t),t.bypassAuthState)}function Nw(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),rw(n,new hc(t),t.bypassAuthState)}async function Aw(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),sw(n,new hc(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ew;case"linkViaPopup":case"linkViaRedirect":return Aw;case"reauthViaPopup":case"reauthViaRedirect":return Nw;default:_t(this.auth,"internal-error")}}resolve(e){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Zr(2e3,1e4);class gs extends vp{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,gs.currentPopupAction&&gs.currentPopupAction.cancel(),gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Qt(this.filter.length===1,"Popup operations only handle one event");const e=dc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Sw.get())};e()}}gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="pendingRedirect",qi=new Map;class Cw extends vp{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=qi.get(this.auth._key());if(!e){try{const s=await Rw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}qi.set(this.auth._key(),e)}return this.bypassAuthState||qi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rw(t,e){const n=Dw(e),s=kw(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function Pw(t,e){qi.set(t._key(),e)}function kw(t){return Wt(t._redirectPersistence)}function Dw(t){return zi(jw,t.config.apiKey,t.name)}async function Vw(t,e,n=!1){if(Nt(t.app))return Promise.reject(Ht(t));const s=Xn(t),r=Iw(s,e),a=await new Cw(s,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=10*60*1e3;class Ow{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Lw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!bp(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(jt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Mw&&this.cachedEventUids.clear(),this.cachedEventUids.has(sh(e))}saveEventToCache(e){this.cachedEventUids.add(sh(e)),this.lastProcessedEventTime=Date.now()}}function sh(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bp({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Lw(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bp(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(t,e={}){return Tn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bw=/^https?/;async function $w(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Fw(t);for(const n of e)try{if(zw(n))return}catch{}_t(t,"unauthorized-domain")}function zw(t){const e=ll(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!Bw.test(n))return!1;if(Uw.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Zr(3e4,6e4);function rh(){const t=Ct().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ww(t){return new Promise((e,n)=>{var s,r,i;function a(){rh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rh(),n(jt(t,"network-request-failed"))},timeout:qw.get()})}if(!((r=(s=Ct().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=Ct().gapi)===null||i===void 0)&&i.load)a();else{const c=Ub("iframefcb");return Ct()[c]=()=>{gapi.load?a():n(jt(t,"network-request-failed"))},ip(`${Fb()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Wi=null,e})}let Wi=null;function Hw(t){return Wi=Wi||Ww(t),Wi}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Zr(5e3,15e3),Kw="__/auth/iframe",Qw="emulator/auth/iframe",Jw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xw(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ic(e,Qw):`https://${t.config.authDomain}/${Kw}`,s={apiKey:e.apiKey,appName:t.name,v:Yn},r=Yw.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Xr(s).slice(1)}`}async function Zw(t){const e=await Hw(t),n=Ct().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:Xw(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jw,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const a=jt(t,"network-request-failed"),c=Ct().setTimeout(()=>{i(a)},Gw.get());function u(){Ct().clearTimeout(c),r(s)}s.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t_=500,n_=600,s_="_blank",r_="http://localhost";class ih{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i_(t,e,n,s=t_,r=n_){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u=Object.assign(Object.assign({},e_),{width:s.toString(),height:r.toString(),top:i,left:a}),d=Xe().toLowerCase();n&&(c=Xf(d)?s_:n),Jf(d)&&(e=e||r_,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[x,w])=>`${g}${x}=${w},`,"");if(Cb(d)&&c!=="_self")return o_(e||"",c),new ih(null);const f=window.open(e||"",c,h);J(f,t,"popup-blocked");try{f.focus()}catch{}return new ih(f)}function o_(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="__/auth/handler",l_="emulator/auth/handler",c_=encodeURIComponent("fac");async function oh(t,e,n,s,r,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Yn,eventId:r};if(e instanceof ap){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",ev(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof ti){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${c_}=${encodeURIComponent(u)}`:"";return`${u_(t)}?${Xr(c).slice(1)}${d}`}function u_({config:t}){return t.emulator?ic(t,l_):`https://${t.authDomain}/${a_}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="webStorageSupport";class d_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fp,this._completeRedirectFn=Vw,this._overrideRedirectResult=Pw}async _openPopup(e,n,s,r){var i;Qt((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await oh(e,n,s,ll(),r);return i_(e,a,dc())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await oh(e,n,s,ll(),r);return fw(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Qt(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Zw(e),s=new Ow(e);return n.register("authEvent",r=>(J(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Va,{type:Va},r=>{var i;const a=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Va];a!==void 0&&n(!!a),_t(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$w(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sp()||Yf()||ac()}}const h_=d_;var ah="@firebase/auth",lh="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function p_(t){zn(new gn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=s.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rp(t)},d=new Mb(s,r,i,u);return Wb(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),zn(new gn("auth-internal",e=>{const n=Xn(e.getProvider("auth").getImmediate());return(s=>new m_(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),St(ah,lh,f_(t)),St(ah,lh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=5*60,y_=Df("authIdTokenMaxAge")||g_;let ch=null;const x_=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>y_)return;const r=n==null?void 0:n.token;ch!==r&&(ch=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function v_(t=nc()){const e=ko(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qb(t,{popupRedirectResolver:h_,persistence:[Tw,dw,fp]}),s=Df("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const a=x_(i.toString());aw(n,a,()=>a(n.currentUser)),ow(n,c=>a(c))}}const r=Rf("auth");return r&&Hb(n,`http://${r}`),n}function b_(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ob({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=jt("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",b_().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});p_("Browser");var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ln,wp;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function b(){}b.prototype=y.prototype,E.D=y.prototype,E.prototype=new b,E.prototype.constructor=E,E.C=function(T,N,j){for(var I=Array(arguments.length-2),X=2;X<arguments.length;X++)I[X-2]=arguments[X];return y.prototype[N].apply(T,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,b){b||(b=0);var T=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)T[N]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(N=0;16>N;++N)T[N]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=E.g[0],b=E.g[1],N=E.g[2];var j=E.g[3],I=y+(j^b&(N^j))+T[0]+3614090360&4294967295;y=b+(I<<7&4294967295|I>>>25),I=j+(N^y&(b^N))+T[1]+3905402710&4294967295,j=y+(I<<12&4294967295|I>>>20),I=N+(b^j&(y^b))+T[2]+606105819&4294967295,N=j+(I<<17&4294967295|I>>>15),I=b+(y^N&(j^y))+T[3]+3250441966&4294967295,b=N+(I<<22&4294967295|I>>>10),I=y+(j^b&(N^j))+T[4]+4118548399&4294967295,y=b+(I<<7&4294967295|I>>>25),I=j+(N^y&(b^N))+T[5]+1200080426&4294967295,j=y+(I<<12&4294967295|I>>>20),I=N+(b^j&(y^b))+T[6]+2821735955&4294967295,N=j+(I<<17&4294967295|I>>>15),I=b+(y^N&(j^y))+T[7]+4249261313&4294967295,b=N+(I<<22&4294967295|I>>>10),I=y+(j^b&(N^j))+T[8]+1770035416&4294967295,y=b+(I<<7&4294967295|I>>>25),I=j+(N^y&(b^N))+T[9]+2336552879&4294967295,j=y+(I<<12&4294967295|I>>>20),I=N+(b^j&(y^b))+T[10]+4294925233&4294967295,N=j+(I<<17&4294967295|I>>>15),I=b+(y^N&(j^y))+T[11]+2304563134&4294967295,b=N+(I<<22&4294967295|I>>>10),I=y+(j^b&(N^j))+T[12]+1804603682&4294967295,y=b+(I<<7&4294967295|I>>>25),I=j+(N^y&(b^N))+T[13]+4254626195&4294967295,j=y+(I<<12&4294967295|I>>>20),I=N+(b^j&(y^b))+T[14]+2792965006&4294967295,N=j+(I<<17&4294967295|I>>>15),I=b+(y^N&(j^y))+T[15]+1236535329&4294967295,b=N+(I<<22&4294967295|I>>>10),I=y+(N^j&(b^N))+T[1]+4129170786&4294967295,y=b+(I<<5&4294967295|I>>>27),I=j+(b^N&(y^b))+T[6]+3225465664&4294967295,j=y+(I<<9&4294967295|I>>>23),I=N+(y^b&(j^y))+T[11]+643717713&4294967295,N=j+(I<<14&4294967295|I>>>18),I=b+(j^y&(N^j))+T[0]+3921069994&4294967295,b=N+(I<<20&4294967295|I>>>12),I=y+(N^j&(b^N))+T[5]+3593408605&4294967295,y=b+(I<<5&4294967295|I>>>27),I=j+(b^N&(y^b))+T[10]+38016083&4294967295,j=y+(I<<9&4294967295|I>>>23),I=N+(y^b&(j^y))+T[15]+3634488961&4294967295,N=j+(I<<14&4294967295|I>>>18),I=b+(j^y&(N^j))+T[4]+3889429448&4294967295,b=N+(I<<20&4294967295|I>>>12),I=y+(N^j&(b^N))+T[9]+568446438&4294967295,y=b+(I<<5&4294967295|I>>>27),I=j+(b^N&(y^b))+T[14]+3275163606&4294967295,j=y+(I<<9&4294967295|I>>>23),I=N+(y^b&(j^y))+T[3]+4107603335&4294967295,N=j+(I<<14&4294967295|I>>>18),I=b+(j^y&(N^j))+T[8]+1163531501&4294967295,b=N+(I<<20&4294967295|I>>>12),I=y+(N^j&(b^N))+T[13]+2850285829&4294967295,y=b+(I<<5&4294967295|I>>>27),I=j+(b^N&(y^b))+T[2]+4243563512&4294967295,j=y+(I<<9&4294967295|I>>>23),I=N+(y^b&(j^y))+T[7]+1735328473&4294967295,N=j+(I<<14&4294967295|I>>>18),I=b+(j^y&(N^j))+T[12]+2368359562&4294967295,b=N+(I<<20&4294967295|I>>>12),I=y+(b^N^j)+T[5]+4294588738&4294967295,y=b+(I<<4&4294967295|I>>>28),I=j+(y^b^N)+T[8]+2272392833&4294967295,j=y+(I<<11&4294967295|I>>>21),I=N+(j^y^b)+T[11]+1839030562&4294967295,N=j+(I<<16&4294967295|I>>>16),I=b+(N^j^y)+T[14]+4259657740&4294967295,b=N+(I<<23&4294967295|I>>>9),I=y+(b^N^j)+T[1]+2763975236&4294967295,y=b+(I<<4&4294967295|I>>>28),I=j+(y^b^N)+T[4]+1272893353&4294967295,j=y+(I<<11&4294967295|I>>>21),I=N+(j^y^b)+T[7]+4139469664&4294967295,N=j+(I<<16&4294967295|I>>>16),I=b+(N^j^y)+T[10]+3200236656&4294967295,b=N+(I<<23&4294967295|I>>>9),I=y+(b^N^j)+T[13]+681279174&4294967295,y=b+(I<<4&4294967295|I>>>28),I=j+(y^b^N)+T[0]+3936430074&4294967295,j=y+(I<<11&4294967295|I>>>21),I=N+(j^y^b)+T[3]+3572445317&4294967295,N=j+(I<<16&4294967295|I>>>16),I=b+(N^j^y)+T[6]+76029189&4294967295,b=N+(I<<23&4294967295|I>>>9),I=y+(b^N^j)+T[9]+3654602809&4294967295,y=b+(I<<4&4294967295|I>>>28),I=j+(y^b^N)+T[12]+3873151461&4294967295,j=y+(I<<11&4294967295|I>>>21),I=N+(j^y^b)+T[15]+530742520&4294967295,N=j+(I<<16&4294967295|I>>>16),I=b+(N^j^y)+T[2]+3299628645&4294967295,b=N+(I<<23&4294967295|I>>>9),I=y+(N^(b|~j))+T[0]+4096336452&4294967295,y=b+(I<<6&4294967295|I>>>26),I=j+(b^(y|~N))+T[7]+1126891415&4294967295,j=y+(I<<10&4294967295|I>>>22),I=N+(y^(j|~b))+T[14]+2878612391&4294967295,N=j+(I<<15&4294967295|I>>>17),I=b+(j^(N|~y))+T[5]+4237533241&4294967295,b=N+(I<<21&4294967295|I>>>11),I=y+(N^(b|~j))+T[12]+1700485571&4294967295,y=b+(I<<6&4294967295|I>>>26),I=j+(b^(y|~N))+T[3]+2399980690&4294967295,j=y+(I<<10&4294967295|I>>>22),I=N+(y^(j|~b))+T[10]+4293915773&4294967295,N=j+(I<<15&4294967295|I>>>17),I=b+(j^(N|~y))+T[1]+2240044497&4294967295,b=N+(I<<21&4294967295|I>>>11),I=y+(N^(b|~j))+T[8]+1873313359&4294967295,y=b+(I<<6&4294967295|I>>>26),I=j+(b^(y|~N))+T[15]+4264355552&4294967295,j=y+(I<<10&4294967295|I>>>22),I=N+(y^(j|~b))+T[6]+2734768916&4294967295,N=j+(I<<15&4294967295|I>>>17),I=b+(j^(N|~y))+T[13]+1309151649&4294967295,b=N+(I<<21&4294967295|I>>>11),I=y+(N^(b|~j))+T[4]+4149444226&4294967295,y=b+(I<<6&4294967295|I>>>26),I=j+(b^(y|~N))+T[11]+3174756917&4294967295,j=y+(I<<10&4294967295|I>>>22),I=N+(y^(j|~b))+T[2]+718787259&4294967295,N=j+(I<<15&4294967295|I>>>17),I=b+(j^(N|~y))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+j&4294967295}s.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var b=y-this.blockSize,T=this.B,N=this.h,j=0;j<y;){if(N==0)for(;j<=b;)r(this,E,j),j+=this.blockSize;if(typeof E=="string"){for(;j<y;)if(T[N++]=E.charCodeAt(j++),N==this.blockSize){r(this,T),N=0;break}}else for(;j<y;)if(T[N++]=E[j++],N==this.blockSize){r(this,T),N=0;break}}this.h=N,this.o+=y},s.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var b=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=b&255,b/=256;for(this.u(E),E=Array(16),y=b=0;4>y;++y)for(var T=0;32>T;T+=8)E[b++]=this.g[y]>>>T&255;return E};function i(E,y){var b=c;return Object.prototype.hasOwnProperty.call(b,E)?b[E]:b[E]=y(E)}function a(E,y){this.h=y;for(var b=[],T=!0,N=E.length-1;0<=N;N--){var j=E[N]|0;T&&j==y||(b[N]=j,T=!1)}this.g=b}var c={};function u(E){return-128<=E&&128>E?i(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return A(d(-E));for(var y=[],b=1,T=0;E>=b;T++)y[T]=E/b|0,b*=4294967296;return new a(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return A(h(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(y,8)),T=f,N=0;N<E.length;N+=8){var j=Math.min(8,E.length-N),I=parseInt(E.substring(N,N+j),y);8>j?(j=d(Math.pow(y,j)),T=T.j(j).add(d(I))):(T=T.j(b),T=T.add(d(I)))}return T}var f=u(0),g=u(1),x=u(16777216);t=a.prototype,t.m=function(){if(_(this))return-A(this).m();for(var E=0,y=1,b=0;b<this.g.length;b++){var T=this.i(b);E+=(0<=T?T:4294967296+T)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(w(this))return"0";if(_(this))return"-"+A(this).toString(E);for(var y=d(Math.pow(E,6)),b=this,T="";;){var N=M(b,y).g;b=P(b,N.j(y));var j=((0<b.g.length?b.g[0]:b.h)>>>0).toString(E);if(b=N,w(b))return j+T;for(;6>j.length;)j="0"+j;T=j+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function w(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function _(E){return E.h==-1}t.l=function(E){return E=P(this,E),_(E)?-1:w(E)?0:1};function A(E){for(var y=E.g.length,b=[],T=0;T<y;T++)b[T]=~E.g[T];return new a(b,~E.h).add(g)}t.abs=function(){return _(this)?A(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),b=[],T=0,N=0;N<=y;N++){var j=T+(this.i(N)&65535)+(E.i(N)&65535),I=(j>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);T=I>>>16,j&=65535,I&=65535,b[N]=I<<16|j}return new a(b,b[b.length-1]&-2147483648?-1:0)};function P(E,y){return E.add(A(y))}t.j=function(E){if(w(this)||w(E))return f;if(_(this))return _(E)?A(this).j(A(E)):A(A(this).j(E));if(_(E))return A(this.j(A(E)));if(0>this.l(x)&&0>E.l(x))return d(this.m()*E.m());for(var y=this.g.length+E.g.length,b=[],T=0;T<2*y;T++)b[T]=0;for(T=0;T<this.g.length;T++)for(var N=0;N<E.g.length;N++){var j=this.i(T)>>>16,I=this.i(T)&65535,X=E.i(N)>>>16,Z=E.i(N)&65535;b[2*T+2*N]+=I*Z,k(b,2*T+2*N),b[2*T+2*N+1]+=j*Z,k(b,2*T+2*N+1),b[2*T+2*N+1]+=I*X,k(b,2*T+2*N+1),b[2*T+2*N+2]+=j*X,k(b,2*T+2*N+2)}for(T=0;T<y;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=y;T<2*y;T++)b[T]=0;return new a(b,0)};function k(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function S(E,y){this.g=E,this.h=y}function M(E,y){if(w(y))throw Error("division by zero");if(w(E))return new S(f,f);if(_(E))return y=M(A(E),y),new S(A(y.g),A(y.h));if(_(y))return y=M(E,A(y)),new S(A(y.g),y.h);if(30<E.g.length){if(_(E)||_(y))throw Error("slowDivide_ only works with positive integers.");for(var b=g,T=y;0>=T.l(E);)b=B(b),T=B(T);var N=O(b,1),j=O(T,1);for(T=O(T,2),b=O(b,2);!w(T);){var I=j.add(T);0>=I.l(E)&&(N=N.add(b),j=I),T=O(T,1),b=O(b,1)}return y=P(E,N.j(y)),new S(N,y)}for(N=f;0<=E.l(y);){for(b=Math.max(1,Math.floor(E.m()/y.m())),T=Math.ceil(Math.log(b)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),j=d(b),I=j.j(y);_(I)||0<I.l(E);)b-=T,j=d(b),I=j.j(y);w(j)&&(j=g),N=N.add(j),E=P(E,I)}return new S(N,E)}t.A=function(E){return M(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),b=[],T=0;T<y;T++)b[T]=this.i(T)&E.i(T);return new a(b,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),b=[],T=0;T<y;T++)b[T]=this.i(T)|E.i(T);return new a(b,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),b=[],T=0;T<y;T++)b[T]=this.i(T)^E.i(T);return new a(b,this.h^E.h)};function B(E){for(var y=E.g.length+1,b=[],T=0;T<y;T++)b[T]=E.i(T)<<1|E.i(T-1)>>>31;return new a(b,E.h)}function O(E,y){var b=y>>5;y%=32;for(var T=E.g.length-b,N=[],j=0;j<T;j++)N[j]=0<y?E.i(j+b)>>>y|E.i(j+b+1)<<32-y:E.i(j+b);return new a(N,E.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,wp=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Ln=a}).apply(typeof uh<"u"?uh:typeof self<"u"?self:typeof window<"u"?window:{});var Ri=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _p,pr,Tp,Hi,hl,Ip,Ep,Np;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,p){return l==Array.prototype||l==Object.prototype||(l[m]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ri=="object"&&Ri];for(var m=0;m<l.length;++m){var p=l[m];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(l,m){if(m)e:{var p=s;l=l.split(".");for(var v=0;v<l.length-1;v++){var R=l[v];if(!(R in p))break e;p=p[R]}l=l[l.length-1],v=p[l],m=m(v),m!=v&&m!=null&&e(p,l,{configurable:!0,writable:!0,value:m})}}function i(l,m){l instanceof String&&(l+="");var p=0,v=!1,R={next:function(){if(!v&&p<l.length){var D=p++;return{value:m(D,l[D]),done:!1}}return v=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}r("Array.prototype.values",function(l){return l||function(){return i(this,function(m,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function d(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function h(l,m,p){return l.call.apply(l.bind,arguments)}function f(l,m,p){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,v),l.apply(m,R)}}return function(){return l.apply(m,arguments)}}function g(l,m,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function x(l,m){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function w(l,m){function p(){}p.prototype=m.prototype,l.aa=m.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(v,R,D){for(var $=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)$[fe-2]=arguments[fe];return m.prototype[R].apply(v,$)}}function _(l){const m=l.length;if(0<m){const p=Array(m);for(let v=0;v<m;v++)p[v]=l[v];return p}return[]}function A(l,m){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(u(v)){const R=l.length||0,D=v.length||0;l.length=R+D;for(let $=0;$<D;$++)l[R+$]=v[$]}else l.push(v)}}class P{constructor(m,p){this.i=m,this.j=p,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function k(l){return/^[\s\xa0]*$/.test(l)}function S(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function M(l){return M[" "](l),l}M[" "]=function(){};var B=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(l,m,p){for(const v in l)m.call(p,l[v],v,l)}function E(l,m){for(const p in l)m.call(void 0,l[p],p,l)}function y(l){const m={};for(const p in l)m[p]=l[p];return m}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,m){let p,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(p in v)l[p]=v[p];for(let D=0;D<b.length;D++)p=b[D],Object.prototype.hasOwnProperty.call(v,p)&&(l[p]=v[p])}}function N(l){var m=1;l=l.split(":");const p=[];for(;0<m&&l.length;)p.push(l.shift()),m--;return l.length&&p.push(l.join(":")),p}function j(l){c.setTimeout(()=>{throw l},0)}function I(){var l=lt;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class X{constructor(){this.h=this.g=null}add(m,p){const v=Z.get();v.set(m,p),this.h?this.h.next=v:this.g=v,this.h=v}}var Z=new P(()=>new at,l=>l.reset());class at{constructor(){this.next=this.g=this.h=null}set(m,p){this.h=m,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,Ce=!1,lt=new X,vt=()=>{const l=c.Promise.resolve(void 0);pe=()=>{l.then(Ks)}};var Ks=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(p){j(p)}var m=Z;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}Ce=!1};function Et(){this.s=this.s,this.C=this.C}Et.prototype.s=!1,Et.prototype.ma=function(){this.s||(this.s=!0,this.N())},Et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var aa=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,m),c.removeEventListener("test",p,m)}catch{}return l}();function An(l,m){if(Re.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(B){e:{try{M(m.nodeName);var R=!0;break e}catch{}R=!1}R||(m=null)}}else p=="mouseover"?m=l.fromElement:p=="mouseout"&&(m=l.toElement);this.relatedTarget=m,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:la[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&An.aa.h.call(this)}}w(An,Re);var la={2:"touch",3:"pen",4:"mouse"};An.prototype.h=function(){An.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var rs="closure_listenable_"+(1e6*Math.random()|0),ca=0;function ua(l,m,p,v,R){this.listener=l,this.proxy=null,this.src=m,this.type=p,this.capture=!!v,this.ha=R,this.key=++ca,this.da=this.fa=!1}function is(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function L(l){this.src=l,this.g={},this.h=0}L.prototype.add=function(l,m,p,v,R){var D=l.toString();l=this.g[D],l||(l=this.g[D]=[],this.h++);var $=K(l,m,v,R);return-1<$?(m=l[$],p||(m.fa=!1)):(m=new ua(m,this.src,D,!!v,R),m.fa=p,l.push(m)),m};function U(l,m){var p=m.type;if(p in l.g){var v=l.g[p],R=Array.prototype.indexOf.call(v,m,void 0),D;(D=0<=R)&&Array.prototype.splice.call(v,R,1),D&&(is(m),l.g[p].length==0&&(delete l.g[p],l.h--))}}function K(l,m,p,v){for(var R=0;R<l.length;++R){var D=l[R];if(!D.da&&D.listener==m&&D.capture==!!p&&D.ha==v)return R}return-1}var ee="closure_lm_"+(1e6*Math.random()|0),de={};function re(l,m,p,v,R){if(Array.isArray(m)){for(var D=0;D<m.length;D++)re(l,m[D],p,v,R);return null}return p=Lu(p),l&&l[rs]?l.K(m,p,d(v)?!!v.capture:!!v,R):me(l,m,p,!1,v,R)}function me(l,m,p,v,R,D){if(!m)throw Error("Invalid event type");var $=d(R)?!!R.capture:!!R,fe=da(l);if(fe||(l[ee]=fe=new L(l)),p=fe.add(m,p,v,$,D),p.proxy)return p;if(v=os(),p.proxy=v,v.src=l,v.listener=p,l.addEventListener)aa||(R=$),R===void 0&&(R=!1),l.addEventListener(m.toString(),v,R);else if(l.attachEvent)l.attachEvent(as(m.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function os(){function l(p){return m.call(l.src,l.listener,p)}const m=Qs;return l}function Pe(l,m,p,v,R){if(Array.isArray(m))for(var D=0;D<m.length;D++)Pe(l,m[D],p,v,R);else v=d(v)?!!v.capture:!!v,p=Lu(p),l&&l[rs]?(l=l.i,m=String(m).toString(),m in l.g&&(D=l.g[m],p=K(D,p,v,R),-1<p&&(is(D[p]),Array.prototype.splice.call(D,p,1),D.length==0&&(delete l.g[m],l.h--)))):l&&(l=da(l))&&(m=l.g[m.toString()],l=-1,m&&(l=K(m,p,v,R)),(p=-1<l?m[l]:null)&&Ft(p))}function Ft(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[rs])U(m.i,l);else{var p=l.type,v=l.proxy;m.removeEventListener?m.removeEventListener(p,v,l.capture):m.detachEvent?m.detachEvent(as(p),v):m.addListener&&m.removeListener&&m.removeListener(v),(p=da(m))?(U(p,l),p.h==0&&(p.src=null,m[ee]=null)):is(l)}}}function as(l){return l in de?de[l]:de[l]="on"+l}function Qs(l,m){if(l.da)l=!0;else{m=new An(m,this);var p=l.listener,v=l.ha||l.src;l.fa&&Ft(l),l=p.call(v,m)}return l}function da(l){return l=l[ee],l instanceof L?l:null}var ha="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lu(l){return typeof l=="function"?l:(l[ha]||(l[ha]=function(m){return l.handleEvent(m)}),l[ha])}function We(){Et.call(this),this.i=new L(this),this.M=this,this.F=null}w(We,Et),We.prototype[rs]=!0,We.prototype.removeEventListener=function(l,m,p,v){Pe(this,l,m,p,v)};function Ze(l,m){var p,v=l.F;if(v)for(p=[];v;v=v.F)p.push(v);if(l=l.M,v=m.type||m,typeof m=="string")m=new Re(m,l);else if(m instanceof Re)m.target=m.target||l;else{var R=m;m=new Re(v,l),T(m,R)}if(R=!0,p)for(var D=p.length-1;0<=D;D--){var $=m.g=p[D];R=fi($,v,!0,m)&&R}if($=m.g=l,R=fi($,v,!0,m)&&R,R=fi($,v,!1,m)&&R,p)for(D=0;D<p.length;D++)$=m.g=p[D],R=fi($,v,!1,m)&&R}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var p=l.g[m],v=0;v<p.length;v++)is(p[v]);delete l.g[m],l.h--}}this.F=null},We.prototype.K=function(l,m,p,v){return this.i.add(String(l),m,!1,p,v)},We.prototype.L=function(l,m,p,v){return this.i.add(String(l),m,!0,p,v)};function fi(l,m,p,v){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var R=!0,D=0;D<m.length;++D){var $=m[D];if($&&!$.da&&$.capture==p){var fe=$.listener,Fe=$.ha||$.src;$.fa&&U(l.i,$),R=fe.call(Fe,v)!==!1&&R}}return R&&!v.defaultPrevented}function Fu(l,m,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:c.setTimeout(l,m||0)}function Uu(l){l.g=Fu(()=>{l.g=null,l.i&&(l.i=!1,Uu(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class Xx extends Et{constructor(m,p){super(),this.m=m,this.l=p,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Uu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(l){Et.call(this),this.h=l,this.g={}}w(Js,Et);var Bu=[];function $u(l){O(l.g,function(m,p){this.g.hasOwnProperty(p)&&Ft(m)},l),l.g={}}Js.prototype.N=function(){Js.aa.N.call(this),$u(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ma=c.JSON.stringify,Zx=c.JSON.parse,e0=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function fa(){}fa.prototype.h=null;function zu(l){return l.h||(l.h=l.i())}function qu(){}var Ys={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pa(){Re.call(this,"d")}w(pa,Re);function ga(){Re.call(this,"c")}w(ga,Re);var Sn={},Wu=null;function pi(){return Wu=Wu||new We}Sn.La="serverreachability";function Hu(l){Re.call(this,Sn.La,l)}w(Hu,Re);function Xs(l){const m=pi();Ze(m,new Hu(m))}Sn.STAT_EVENT="statevent";function Gu(l,m){Re.call(this,Sn.STAT_EVENT,l),this.stat=m}w(Gu,Re);function et(l){const m=pi();Ze(m,new Gu(m,l))}Sn.Ma="timingevent";function Ku(l,m){Re.call(this,Sn.Ma,l),this.size=m}w(Ku,Re);function Zs(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},m)}function er(){this.g=!0}er.prototype.xa=function(){this.g=!1};function t0(l,m,p,v,R,D){l.info(function(){if(l.g)if(D)for(var $="",fe=D.split("&"),Fe=0;Fe<fe.length;Fe++){var le=fe[Fe].split("=");if(1<le.length){var He=le[0];le=le[1];var Ge=He.split("_");$=2<=Ge.length&&Ge[1]=="type"?$+(He+"="+le+"&"):$+(He+"=redacted&")}}else $=null;else $=D;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+m+`
`+p+`
`+$})}function n0(l,m,p,v,R,D,$){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+m+`
`+p+`
`+D+" "+$})}function ls(l,m,p,v){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+r0(l,p)+(v?" "+v:"")})}function s0(l,m){l.info(function(){return"TIMEOUT: "+m})}er.prototype.info=function(){};function r0(l,m){if(!l.g)return m;if(!m)return null;try{var p=JSON.parse(m);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var v=p[l];if(!(2>v.length)){var R=v[1];if(Array.isArray(R)&&!(1>R.length)){var D=R[0];if(D!="noop"&&D!="stop"&&D!="close")for(var $=1;$<R.length;$++)R[$]=""}}}}return ma(p)}catch{return m}}var gi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ya;function yi(){}w(yi,fa),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},ya=new yi;function tn(l,m,p,v){this.j=l,this.i=m,this.l=p,this.R=v||1,this.U=new Js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ju}function Ju(){this.i=null,this.g="",this.h=!1}var Yu={},xa={};function va(l,m,p){l.L=1,l.v=wi(Ut(m)),l.m=p,l.P=!0,Xu(l,null)}function Xu(l,m){l.F=Date.now(),xi(l),l.A=Ut(l.v);var p=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),hd(p.i,"t",v),l.C=0,p=l.j.J,l.h=new Ju,l.g=Cd(l.j,p?m:null,!l.m),0<l.O&&(l.M=new Xx(g(l.Y,l,l.g),l.O)),m=l.U,p=l.g,v=l.ca;var R="readystatechange";Array.isArray(R)||(R&&(Bu[0]=R.toString()),R=Bu);for(var D=0;D<R.length;D++){var $=re(p,R[D],v||m.handleEvent,!1,m.h||m);if(!$)break;m.g[$.key]=$}m=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),Xs(),t0(l.i,l.u,l.A,l.l,l.R,l.m)}tn.prototype.ca=function(l){l=l.target;const m=this.M;m&&Bt(l)==3?m.j():this.Y(l)},tn.prototype.Y=function(l){try{if(l==this.g)e:{const Ge=Bt(this.g);var m=this.g.Ba();const ds=this.g.Z();if(!(3>Ge)&&(Ge!=3||this.g&&(this.h.h||this.g.oa()||vd(this.g)))){this.J||Ge!=4||m==7||(m==8||0>=ds?Xs(3):Xs(2)),ba(this);var p=this.g.Z();this.X=p;t:if(Zu(this)){var v=vd(this.g);l="";var R=v.length,D=Bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jn(this),tr(this);var $="";break t}this.h.i=new c.TextDecoder}for(m=0;m<R;m++)this.h.h=!0,l+=this.h.i.decode(v[m],{stream:!(D&&m==R-1)});v.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,n0(this.i,this.u,this.A,this.l,this.R,Ge,p),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,Fe=this.g;if((fe=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(fe)){var le=fe;break t}}le=null}if(p=le)ls(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wa(this,p);else{this.o=!1,this.s=3,et(12),jn(this),tr(this);break e}}if(this.P){p=!0;let bt;for(;!this.J&&this.C<$.length;)if(bt=i0(this,$),bt==xa){Ge==4&&(this.s=4,et(14),p=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==Yu){this.s=4,et(15),ls(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else ls(this.i,this.l,bt,null),wa(this,bt);if(Zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||$.length!=0||this.h.h||(this.s=1,et(16),p=!1),this.o=this.o&&p,!p)ls(this.i,this.l,$,"[Invalid Chunked Response]"),jn(this),tr(this);else if(0<$.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Aa(He),He.M=!0,et(11))}}else ls(this.i,this.l,$,null),wa(this,$);Ge==4&&jn(this),this.o&&!this.J&&(Ge==4?Nd(this.j,this):(this.o=!1,xi(this)))}else _0(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),jn(this),tr(this)}}}catch{}finally{}};function Zu(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function i0(l,m){var p=l.C,v=m.indexOf(`
`,p);return v==-1?xa:(p=Number(m.substring(p,v)),isNaN(p)?Yu:(v+=1,v+p>m.length?xa:(m=m.slice(v,v+p),l.C=v+p,m)))}tn.prototype.cancel=function(){this.J=!0,jn(this)};function xi(l){l.S=Date.now()+l.I,ed(l,l.I)}function ed(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Zs(g(l.ba,l),m)}function ba(l){l.B&&(c.clearTimeout(l.B),l.B=null)}tn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(s0(this.i,this.A),this.L!=2&&(Xs(),et(17)),jn(this),this.s=2,tr(this)):ed(this,this.S-l)};function tr(l){l.j.G==0||l.J||Nd(l.j,l)}function jn(l){ba(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,$u(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function wa(l,m){try{var p=l.j;if(p.G!=0&&(p.g==l||_a(p.h,l))){if(!l.K&&_a(p.h,l)&&p.G==3){try{var v=p.Da.g.parse(m)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Ai(p),Ei(p);else break e;Na(p),et(18)}}else p.za=R[1],0<p.za-p.T&&37500>R[2]&&p.F&&p.v==0&&!p.C&&(p.C=Zs(g(p.Za,p),6e3));if(1>=sd(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Rn(p,11)}else if((l.K||p.g==l)&&Ai(p),!k(m))for(R=p.Da.g.parse(m),m=0;m<R.length;m++){let le=R[m];if(p.T=le[0],le=le[1],p.G==2)if(le[0]=="c"){p.K=le[1],p.ia=le[2];const He=le[3];He!=null&&(p.la=He,p.j.info("VER="+p.la));const Ge=le[4];Ge!=null&&(p.Aa=Ge,p.j.info("SVER="+p.Aa));const ds=le[5];ds!=null&&typeof ds=="number"&&0<ds&&(v=1.5*ds,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const bt=l.g;if(bt){const ji=bt.g?bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ji){var D=v.h;D.g||ji.indexOf("spdy")==-1&&ji.indexOf("quic")==-1&&ji.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Ta(D,D.h),D.h=null))}if(v.D){const Sa=bt.g?bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Sa&&(v.ya=Sa,ge(v.I,v.D,Sa))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var $=l;if(v.qa=jd(v,v.J?v.ia:null,v.W),$.K){rd(v.h,$);var fe=$,Fe=v.L;Fe&&(fe.I=Fe),fe.B&&(ba(fe),xi(fe)),v.g=$}else Id(v);0<p.i.length&&Ni(p)}else le[0]!="stop"&&le[0]!="close"||Rn(p,7);else p.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Rn(p,7):Ea(p):le[0]!="noop"&&p.l&&p.l.ta(le),p.v=0)}}Xs(4)}catch{}}var o0=class{constructor(l,m){this.g=l,this.map=m}};function td(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nd(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function sd(l){return l.h?1:l.g?l.g.size:0}function _a(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function Ta(l,m){l.g?l.g.add(m):l.h=m}function rd(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}td.prototype.cancel=function(){if(this.i=id(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function id(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const p of l.g.values())m=m.concat(p.D);return m}return _(l.i)}function a0(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var m=[],p=l.length,v=0;v<p;v++)m.push(l[v]);return m}m=[],p=0;for(v in l)m[p++]=l[v];return m}function l0(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var m=[];l=l.length;for(var p=0;p<l;p++)m.push(p);return m}m=[],p=0;for(const v in l)m[p++]=v;return m}}}function od(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var p=l0(l),v=a0(l),R=v.length,D=0;D<R;D++)m.call(void 0,v[D],p&&p[D],l)}var ad=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function c0(l,m){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var v=l[p].indexOf("="),R=null;if(0<=v){var D=l[p].substring(0,v);R=l[p].substring(v+1)}else D=l[p];m(D,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Cn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Cn){this.h=l.h,vi(this,l.j),this.o=l.o,this.g=l.g,bi(this,l.s),this.l=l.l;var m=l.i,p=new rr;p.i=m.i,m.g&&(p.g=new Map(m.g),p.h=m.h),ld(this,p),this.m=l.m}else l&&(m=String(l).match(ad))?(this.h=!1,vi(this,m[1]||"",!0),this.o=nr(m[2]||""),this.g=nr(m[3]||"",!0),bi(this,m[4]),this.l=nr(m[5]||"",!0),ld(this,m[6]||"",!0),this.m=nr(m[7]||"")):(this.h=!1,this.i=new rr(null,this.h))}Cn.prototype.toString=function(){var l=[],m=this.j;m&&l.push(sr(m,cd,!0),":");var p=this.g;return(p||m=="file")&&(l.push("//"),(m=this.o)&&l.push(sr(m,cd,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(sr(p,p.charAt(0)=="/"?h0:d0,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",sr(p,f0)),l.join("")};function Ut(l){return new Cn(l)}function vi(l,m,p){l.j=p?nr(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function bi(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function ld(l,m,p){m instanceof rr?(l.i=m,p0(l.i,l.h)):(p||(m=sr(m,m0)),l.i=new rr(m,l.h))}function ge(l,m,p){l.i.set(m,p)}function wi(l){return ge(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function nr(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function sr(l,m,p){return typeof l=="string"?(l=encodeURI(l).replace(m,u0),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function u0(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var cd=/[#\/\?@]/g,d0=/[#\?:]/g,h0=/[#\?]/g,m0=/[#\?@]/g,f0=/#/g;function rr(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function nn(l){l.g||(l.g=new Map,l.h=0,l.i&&c0(l.i,function(m,p){l.add(decodeURIComponent(m.replace(/\+/g," ")),p)}))}t=rr.prototype,t.add=function(l,m){nn(this),this.i=null,l=cs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(m),this.h+=1,this};function ud(l,m){nn(l),m=cs(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function dd(l,m){return nn(l),m=cs(l,m),l.g.has(m)}t.forEach=function(l,m){nn(this),this.g.forEach(function(p,v){p.forEach(function(R){l.call(m,R,v,this)},this)},this)},t.na=function(){nn(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),p=[];for(let v=0;v<m.length;v++){const R=l[v];for(let D=0;D<R.length;D++)p.push(m[v])}return p},t.V=function(l){nn(this);let m=[];if(typeof l=="string")dd(this,l)&&(m=m.concat(this.g.get(cs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)m=m.concat(l[p])}return m},t.set=function(l,m){return nn(this),this.i=null,l=cs(this,l),dd(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},t.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function hd(l,m,p){ud(l,m),0<p.length&&(l.i=null,l.g.set(cs(l,m),_(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var p=0;p<m.length;p++){var v=m[p];const D=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var R=D;$[v]!==""&&(R+="="+encodeURIComponent(String($[v]))),l.push(R)}}return this.i=l.join("&")};function cs(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function p0(l,m){m&&!l.j&&(nn(l),l.i=null,l.g.forEach(function(p,v){var R=v.toLowerCase();v!=R&&(ud(this,v),hd(this,R,p))},l)),l.j=m}function g0(l,m){const p=new er;if(c.Image){const v=new Image;v.onload=x(sn,p,"TestLoadImage: loaded",!0,m,v),v.onerror=x(sn,p,"TestLoadImage: error",!1,m,v),v.onabort=x(sn,p,"TestLoadImage: abort",!1,m,v),v.ontimeout=x(sn,p,"TestLoadImage: timeout",!1,m,v),c.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else m(!1)}function y0(l,m){const p=new er,v=new AbortController,R=setTimeout(()=>{v.abort(),sn(p,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:v.signal}).then(D=>{clearTimeout(R),D.ok?sn(p,"TestPingServer: ok",!0,m):sn(p,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(R),sn(p,"TestPingServer: error",!1,m)})}function sn(l,m,p,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(p)}catch{}}function x0(){this.g=new e0}function v0(l,m,p){const v=p||"";try{od(l,function(R,D){let $=R;d(R)&&($=ma(R)),m.push(v+D+"="+encodeURIComponent($))})}catch(R){throw m.push(v+"type="+encodeURIComponent("_badmap")),R}}function _i(l){this.l=l.Ub||null,this.j=l.eb||!1}w(_i,fa),_i.prototype.g=function(){return new Ti(this.l,this.j)},_i.prototype.i=function(l){return function(){return l}}({});function Ti(l,m){We.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ti,We),t=Ti.prototype,t.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,or(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||c).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ir(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;md(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function md(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?ir(this):or(this),this.readyState==3&&md(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ir(this))},t.Qa=function(l){this.g&&(this.response=l,ir(this))},t.ga=function(){this.g&&ir(this)};function ir(l){l.readyState=4,l.l=null,l.j=null,l.v=null,or(l)}t.setRequestHeader=function(l,m){this.u.append(l,m)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var p=m.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=m.next();return l.join(`\r
`)};function or(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ti.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function fd(l){let m="";return O(l,function(p,v){m+=v,m+=":",m+=p,m+=`\r
`}),m}function Ia(l,m,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=fd(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):ge(l,m,p))}function we(l){We.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(we,We);var b0=/^https?$/i,w0=["POST","PUT"];t=we.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,m,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ya.g(),this.v=this.o?zu(this.o):zu(ya),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(D){pd(this,D);return}if(l=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)p.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())p.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(D=>D.toLowerCase()=="content-type"),R=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(w0,m,void 0))||v||R||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,$]of p)this.g.setRequestHeader(D,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xd(this),this.u=!0,this.g.send(l),this.u=!1}catch(D){pd(this,D)}};function pd(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,gd(l),Ii(l)}function gd(l){l.A||(l.A=!0,Ze(l,"complete"),Ze(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ze(this,"complete"),Ze(this,"abort"),Ii(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ii(this,!0)),we.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yd(this):this.bb())},t.bb=function(){yd(this)};function yd(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Bt(l)!=4||l.Z()!=2)){if(l.u&&Bt(l)==4)Fu(l.Ea,0,l);else if(Ze(l,"readystatechange"),Bt(l)==4){l.h=!1;try{const $=l.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var p;if(!(p=m)){var v;if(v=$===0){var R=String(l.D).match(ad)[1]||null;!R&&c.self&&c.self.location&&(R=c.self.location.protocol.slice(0,-1)),v=!b0.test(R?R.toLowerCase():"")}p=v}if(p)Ze(l,"complete"),Ze(l,"success");else{l.m=6;try{var D=2<Bt(l)?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.Z()+"]",gd(l)}}finally{Ii(l)}}}}function Ii(l,m){if(l.g){xd(l);const p=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||Ze(l,"ready");try{p.onreadystatechange=v}catch{}}}function xd(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Bt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),Zx(m)}};function vd(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function _0(l){const m={};l=(l.g&&2<=Bt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(k(l[v]))continue;var p=N(l[v]);const R=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const D=m[R]||[];m[R]=D,D.push(p)}E(m,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ar(l,m,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||m}function bd(l){this.Aa=0,this.i=[],this.j=new er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ar("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ar("baseRetryDelayMs",5e3,l),this.cb=ar("retryDelaySeedMs",1e4,l),this.Wa=ar("forwardChannelMaxRetries",2,l),this.wa=ar("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new td(l&&l.concurrentRequestLimit),this.Da=new x0,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bd.prototype,t.la=8,t.G=1,t.connect=function(l,m,p,v){et(0),this.W=l,this.H=m||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=jd(this,null,this.W),Ni(this)};function Ea(l){if(wd(l),l.G==3){var m=l.U++,p=Ut(l.I);if(ge(p,"SID",l.K),ge(p,"RID",m),ge(p,"TYPE","terminate"),lr(l,p),m=new tn(l,l.j,m),m.L=2,m.v=wi(Ut(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(m.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=m.v,p=!0),p||(m.g=Cd(m.j,null),m.g.ea(m.v)),m.F=Date.now(),xi(m)}Sd(l)}function Ei(l){l.g&&(Aa(l),l.g.cancel(),l.g=null)}function wd(l){Ei(l),l.u&&(c.clearTimeout(l.u),l.u=null),Ai(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ni(l){if(!nd(l.h)&&!l.s){l.s=!0;var m=l.Ga;pe||vt(),Ce||(pe(),Ce=!0),lt.add(m,l),l.B=0}}function T0(l,m){return sd(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Zs(g(l.Ga,l,m),Ad(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const R=new tn(this,this.j,l);let D=this.o;if(this.S&&(D?(D=y(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(R.H=D,D=null),this.P)e:{for(var m=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(m+=v,4096<m){m=p;break e}if(m===4096||p===this.i.length-1){m=p+1;break e}}m=1e3}else m=1e3;m=Td(this,R,m),p=Ut(this.I),ge(p,"RID",l),ge(p,"CVER",22),this.D&&ge(p,"X-HTTP-Session-Id",this.D),lr(this,p),D&&(this.O?m="headers="+encodeURIComponent(String(fd(D)))+"&"+m:this.m&&Ia(p,this.m,D)),Ta(this.h,R),this.Ua&&ge(p,"TYPE","init"),this.P?(ge(p,"$req",m),ge(p,"SID","null"),R.T=!0,va(R,p,null)):va(R,p,m),this.G=2}}else this.G==3&&(l?_d(this,l):this.i.length==0||nd(this.h)||_d(this))};function _d(l,m){var p;m?p=m.l:p=l.U++;const v=Ut(l.I);ge(v,"SID",l.K),ge(v,"RID",p),ge(v,"AID",l.T),lr(l,v),l.m&&l.o&&Ia(v,l.m,l.o),p=new tn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),m&&(l.i=m.D.concat(l.i)),m=Td(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ta(l.h,p),va(p,v,m)}function lr(l,m){l.H&&O(l.H,function(p,v){ge(m,v,p)}),l.l&&od({},function(p,v){ge(m,v,p)})}function Td(l,m,p){p=Math.min(l.i.length,p);var v=l.l?g(l.l.Na,l.l,l):null;e:{var R=l.i;let D=-1;for(;;){const $=["count="+p];D==-1?0<p?(D=R[0].g,$.push("ofs="+D)):D=0:$.push("ofs="+D);let fe=!0;for(let Fe=0;Fe<p;Fe++){let le=R[Fe].g;const He=R[Fe].map;if(le-=D,0>le)D=Math.max(0,R[Fe].g-100),fe=!1;else try{v0(He,$,"req"+le+"_")}catch{v&&v(He)}}if(fe){v=$.join("&");break e}}}return l=l.i.splice(0,p),m.D=l,v}function Id(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;pe||vt(),Ce||(pe(),Ce=!0),lt.add(m,l),l.v=0}}function Na(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Zs(g(l.Fa,l),Ad(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Ed(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Zs(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Ei(this),Ed(this))};function Aa(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Ed(l){l.g=new tn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=Ut(l.qa);ge(m,"RID","rpc"),ge(m,"SID",l.K),ge(m,"AID",l.T),ge(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&ge(m,"TO",l.ja),ge(m,"TYPE","xmlhttp"),lr(l,m),l.m&&l.o&&Ia(m,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=wi(Ut(m)),p.m=null,p.P=!0,Xu(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Ei(this),Na(this),et(19))};function Ai(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Nd(l,m){var p=null;if(l.g==m){Ai(l),Aa(l),l.g=null;var v=2}else if(_a(l.h,m))p=m.D,rd(l.h,m),v=1;else return;if(l.G!=0){if(m.o)if(v==1){p=m.m?m.m.length:0,m=Date.now()-m.F;var R=l.B;v=pi(),Ze(v,new Ku(v,p)),Ni(l)}else Id(l);else if(R=m.s,R==3||R==0&&0<m.X||!(v==1&&T0(l,m)||v==2&&Na(l)))switch(p&&0<p.length&&(m=l.h,m.i=m.i.concat(p)),R){case 1:Rn(l,5);break;case 4:Rn(l,10);break;case 3:Rn(l,6);break;default:Rn(l,2)}}}function Ad(l,m){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*m}function Rn(l,m){if(l.j.info("Error code "+m),m==2){var p=g(l.fb,l),v=l.Xa;const R=!v;v=new Cn(v||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||vi(v,"https"),wi(v),R?g0(v.toString(),p):y0(v.toString(),p)}else et(2);l.G=0,l.l&&l.l.sa(m),Sd(l),wd(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Sd(l){if(l.G=0,l.ka=[],l.l){const m=id(l.h);(m.length!=0||l.i.length!=0)&&(A(l.ka,m),A(l.ka,l.i),l.h.i.length=0,_(l.i),l.i.length=0),l.l.ra()}}function jd(l,m,p){var v=p instanceof Cn?Ut(p):new Cn(p);if(v.g!="")m&&(v.g=m+"."+v.g),bi(v,v.s);else{var R=c.location;v=R.protocol,m=m?m+"."+R.hostname:R.hostname,R=+R.port;var D=new Cn(null);v&&vi(D,v),m&&(D.g=m),R&&bi(D,R),p&&(D.l=p),v=D}return p=l.D,m=l.ya,p&&m&&ge(v,p,m),ge(v,"VER",l.la),lr(l,v),v}function Cd(l,m,p){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new we(new _i({eb:p})):new we(l.pa),m.Ha(l.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rd(){}t=Rd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Si(){}Si.prototype.g=function(l,m){return new ct(l,m)};function ct(l,m){We.call(this),this.g=new bd(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!k(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new us(this)}w(ct,We),ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ct.prototype.close=function(){Ea(this.g)},ct.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=ma(l),l=p);m.i.push(new o0(m.Ya++,l)),m.G==3&&Ni(m)},ct.prototype.N=function(){this.g.l=null,delete this.j,Ea(this.g),delete this.g,ct.aa.N.call(this)};function Pd(l){pa.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const p in m){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}w(Pd,pa);function kd(){ga.call(this),this.status=1}w(kd,ga);function us(l){this.g=l}w(us,Rd),us.prototype.ua=function(){Ze(this.g,"a")},us.prototype.ta=function(l){Ze(this.g,new Pd(l))},us.prototype.sa=function(l){Ze(this.g,new kd)},us.prototype.ra=function(){Ze(this.g,"b")},Si.prototype.createWebChannel=Si.prototype.g,ct.prototype.send=ct.prototype.o,ct.prototype.open=ct.prototype.m,ct.prototype.close=ct.prototype.close,Np=function(){return new Si},Ep=function(){return pi()},Ip=Sn,hl={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,Hi=gi,Qu.COMPLETE="complete",Tp=Qu,qu.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",We.prototype.listen=We.prototype.K,pr=qu,we.prototype.listenOnce=we.prototype.L,we.prototype.getLastError=we.prototype.Ka,we.prototype.getLastErrorCode=we.prototype.Ba,we.prototype.getStatus=we.prototype.Z,we.prototype.getResponseJson=we.prototype.Oa,we.prototype.getResponseText=we.prototype.oa,we.prototype.send=we.prototype.ea,we.prototype.setWithCredentials=we.prototype.Ha,_p=we}).apply(typeof Ri<"u"?Ri:typeof self<"u"?self:typeof window<"u"?window:{});const dh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new ec("@firebase/firestore");function ur(){return Hn.logLevel}function q(t,...e){if(Hn.logLevel<=oe.DEBUG){const n=e.map(mc);Hn.debug(`Firestore (${Bs}): ${t}`,...n)}}function Jt(t,...e){if(Hn.logLevel<=oe.ERROR){const n=e.map(mc);Hn.error(`Firestore (${Bs}): ${t}`,...n)}}function js(t,...e){if(Hn.logLevel<=oe.WARN){const n=e.map(mc);Hn.warn(`Firestore (${Bs}): ${t}`,...n)}}function mc(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Bs}) INTERNAL ASSERTION FAILED: `+t;throw Jt(e),new Error(e)}function he(t,e){t||Y()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Lt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qe.UNAUTHENTICATED))}shutdown(){}}class __{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class T_{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new Gt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},c=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(he(typeof s.accessToken=="string"),new Ap(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new Qe(e)}}class I_{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class E_{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new I_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class N_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A_{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){he(this.o===void 0);const s=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?r(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new N_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=S_(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function ce(t,e){return t<e?-1:t>e?1:0}function Cs(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Me(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new Me(0,0))}static max(){return new te(new Me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Y(),s===void 0?s=e.length-n:s>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),a=n.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ye extends Mr{construct(e,n,s){return new ye(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new z(V.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const j_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends Mr{construct(e,n,s){return new $e(e,n,s)}static isValidIdentifier(e){return j_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new z(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(s+=c,r++):(i(),r++)}if(i(),a)throw new z(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(ye.fromString(e))}static fromName(e){return new H(ye.fromString(e).popFirst(5))}static empty(){return new H(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new ye(e.slice()))}}function C_(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(s===1e9?new Me(n+1,0):new Me(n,s));return new yn(r,H.empty(),e)}function R_(t){return new yn(t.readTime,t.key,-1)}class yn{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new yn(te.min(),H.empty(),-1)}static max(){return new yn(te.max(),H.empty(),-1)}}function P_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function si(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==k_)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,s)=>{n(e)})}static reject(e){return new F((n,s)=>{s(e)})}static waitFor(e){return new F((n,s)=>{let r=0,i=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++i,a&&i===r&&n()},u=>s(u))}),a=!0,i===r&&n()})}static or(e){let n=F.resolve(!1);for(const s of e)n=n.next(r=>r?F.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new F((s,r)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{a[d]=h,++c,c===i&&s(a)},h=>r(h))}})}static doWhile(e,n){return new F((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function V_(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ri(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fc.oe=-1;function Oo(t){return t==null}function co(t){return t===0&&1/t==-1/0}function M_(t){return typeof t=="number"&&Number.isInteger(t)&&!co(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pi(this.root,e,this.comparator,!0)}}class Pi{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Be.RED,this.left=r??Be.EMPTY,this.right=i??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Be(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Be.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,s,r,i){return this}insert(e,n,s){return new Be(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mh(this.data.getIterator())}getIteratorFrom(e){return new mh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class mh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new ut([])}unionWith(e){let n=new ze($e.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cs(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Cp("Invalid base64 string: "+i):i}}(e);return new qe(n)}static fromUint8Array(e){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qe.EMPTY_BYTE_STRING=new qe("");const O_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xn(t){if(he(!!t),typeof t=="string"){let e=0;const n=O_.exec(t);if(he(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gn(t){return typeof t=="string"?qe.fromBase64String(t):qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gc(t){const e=t.mapValue.fields.__previous_value__;return pc(e)?gc(e):e}function Or(t){const e=xn(t.mapValue.fields.__local_write_time__.timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,s,r,i,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Lr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Lr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pc(t)?4:U_(t)?9007199254740991:F_(t)?10:11:Y()}function Mt(t,e){if(t===e)return!0;const n=Kn(t);if(n!==Kn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Or(t).isEqual(Or(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=xn(r.timestampValue),c=xn(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Gn(r.bytesValue).isEqual(Gn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Se(r.geoPointValue.latitude)===Se(i.geoPointValue.latitude)&&Se(r.geoPointValue.longitude)===Se(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Se(r.integerValue)===Se(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Se(r.doubleValue),c=Se(i.doubleValue);return a===c?co(a)===co(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Cs(t.arrayValue.values||[],e.arrayValue.values||[],Mt);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(hh(a)!==hh(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Mt(a[u],c[u])))return!1;return!0}(t,e);default:return Y()}}function Fr(t,e){return(t.values||[]).find(n=>Mt(n,e))!==void 0}function Rs(t,e){if(t===e)return 0;const n=Kn(t),s=Kn(e);if(n!==s)return ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Se(i.integerValue||i.doubleValue),u=Se(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return fh(t.timestampValue,e.timestampValue);case 4:return fh(Or(t),Or(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Gn(i),u=Gn(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=ce(c[d],u[d]);if(h!==0)return h}return ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=ce(Se(i.latitude),Se(a.latitude));return c!==0?c:ce(Se(i.longitude),Se(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ph(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,d,h;const f=i.fields||{},g=a.fields||{},x=(c=f.value)===null||c===void 0?void 0:c.arrayValue,w=(u=g.value)===null||u===void 0?void 0:u.arrayValue,_=ce(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:ph(x,w)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===ki.mapValue&&a===ki.mapValue)return 0;if(i===ki.mapValue)return 1;if(a===ki.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const g=ce(u[f],h[f]);if(g!==0)return g;const x=Rs(c[u[f]],d[h[f]]);if(x!==0)return x}return ce(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Y()}}function fh(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=xn(t),s=xn(e),r=ce(n.seconds,s.seconds);return r!==0?r:ce(n.nanos,s.nanos)}function ph(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Rs(n[r],s[r]);if(i)return i}return ce(n.length,s.length)}function Ps(t){return ml(t)}function ml(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=xn(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=ml(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const a of s)i?i=!1:r+=",",r+=`${a}:${ml(n.fields[a])}`;return r+"}"}(t.mapValue):Y()}function gh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fl(t){return!!t&&"integerValue"in t}function yc(t){return!!t&&"arrayValue"in t}function yh(t){return!!t&&"nullValue"in t}function xh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gi(t){return!!t&&"mapValue"in t}function F_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function _r(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zn(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=_r(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_r(t.arrayValue.values[n]);return e}return Object.assign({},t)}function U_(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.value=e}static empty(){return new rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Gi(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_r(n)}setAll(e){let n=$e.emptyPath(),s={},r=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=c.popLast()}a?s[c.lastSegment()]=_r(a):r.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Gi(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Gi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Zn(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new rt(_r(this.value))}}function Rp(t){const e=[];return Zn(t.fields,(n,s)=>{const r=new $e([n]);if(Gi(s)){const i=Rp(s.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)}),new ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,s,r,i,a,c){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Je(e,0,te.min(),te.min(),te.min(),rt.empty(),0)}static newFoundDocument(e,n,s,r){return new Je(e,1,n,te.min(),s,r,0)}static newNoDocument(e,n){return new Je(e,2,n,te.min(),te.min(),rt.empty(),0)}static newUnknownDocument(e,n){return new Je(e,3,n,te.min(),te.min(),rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n){this.position=e,this.inclusive=n}}function vh(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],a=t.position[r];if(i.field.isKeyField()?s=H.comparator(H.fromName(a.referenceValue),n.key):s=Rs(a,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function bh(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n="asc"){this.field=e,this.dir=n}}function B_(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pp=class{};class Ve extends Pp{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new z_(e,n,s):n==="array-contains"?new H_(e,s):n==="in"?new G_(e,s):n==="not-in"?new K_(e,s):n==="array-contains-any"?new Q_(e,s):new Ve(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new q_(e,s):new W_(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rs(n,this.value)):n!==null&&Kn(this.value)===Kn(n)&&this.matchesComparison(Rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends Pp{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Tt(e,n)}matches(e){return kp(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kp(t){return t.op==="and"}function Dp(t){return $_(t)&&kp(t)}function $_(t){for(const e of t.filters)if(e instanceof Tt)return!1;return!0}function pl(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+Ps(t.value);if(Dp(t))return t.filters.map(e=>pl(e)).join(",");{const e=t.filters.map(n=>pl(n)).join(",");return`${t.op}(${e})`}}function Vp(t,e){return t instanceof Ve?function(s,r){return r instanceof Ve&&s.op===r.op&&s.field.isEqual(r.field)&&Mt(s.value,r.value)}(t,e):t instanceof Tt?function(s,r){return r instanceof Tt&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,a,c)=>i&&Vp(a,r.filters[c]),!0):!1}(t,e):void Y()}function Mp(t){return t instanceof Ve?function(n){return`${n.field.canonicalString()} ${n.op} ${Ps(n.value)}`}(t):t instanceof Tt?function(n){return n.op.toString()+" {"+n.getFilters().map(Mp).join(" ,")+"}"}(t):"Filter"}class z_ extends Ve{constructor(e,n,s){super(e,n,s),this.key=H.fromName(s.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class q_ extends Ve{constructor(e,n){super(e,"in",n),this.keys=Op("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class W_ extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=Op("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Op(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>H.fromName(s.referenceValue))}class H_ extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yc(n)&&Fr(n.arrayValue,this.value)}}class G_ extends Ve{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fr(this.value.arrayValue,n)}}class K_ extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fr(this.value.arrayValue,n)}}class Q_ extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Fr(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n=null,s=[],r=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function wh(t,e=null,n=[],s=[],r=null,i=null,a=null){return new J_(t,e,n,s,r,i,a)}function xc(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>pl(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Oo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ps(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ps(s)).join(",")),e.ue=n}return e.ue}function vc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B_(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vp(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bh(t.startAt,e.startAt)&&bh(t.endAt,e.endAt)}function gl(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n=null,s=[],r=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Y_(t,e,n,s,r,i,a,c){return new $s(t,e,n,s,r,i,a,c)}function bc(t){return new $s(t)}function _h(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lp(t){return t.collectionGroup!==null}function Tr(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new ze($e.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ur(i,s))}),n.has($e.keyField().canonicalString())||e.ce.push(new Ur($e.keyField(),s))}return e.ce}function Rt(t){const e=ne(t);return e.le||(e.le=X_(e,Tr(t))),e.le}function X_(t,e){if(t.limitType==="F")return wh(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Ur(r.field,i)});const n=t.endAt?new uo(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new uo(t.startAt.position,t.startAt.inclusive):null;return wh(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function yl(t,e){const n=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xl(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lo(t,e){return vc(Rt(t),Rt(e))&&t.limitType===e.limitType}function Fp(t){return`${xc(Rt(t))}|lt:${t.limitType}`}function hs(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>Mp(r)).join(", ")}]`),Oo(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Ps(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Ps(r)).join(",")),`Target(${s})`}(Rt(t))}; limitType=${t.limitType})`}function Fo(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):H.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Tr(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(a,c,u){const d=vh(a,c,u);return a.inclusive?d<=0:d<0}(s.startAt,Tr(s),r)||s.endAt&&!function(a,c,u){const d=vh(a,c,u);return a.inclusive?d>=0:d>0}(s.endAt,Tr(s),r))}(t,e)}function Z_(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Up(t){return(e,n)=>{let s=!1;for(const r of Tr(t)){const i=eT(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function eT(t,e,n){const s=t.field.isKeyField()?H.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Rs(u,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Zn(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return jp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new be(H.comparator);function Yt(){return tT}const Bp=new be(H.comparator);function gr(...t){let e=Bp;for(const n of t)e=e.insert(n.key,n);return e}function $p(t){let e=Bp;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Vn(){return Ir()}function zp(){return Ir()}function Ir(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const nT=new be(H.comparator),sT=new ze(H.comparator);function ie(...t){let e=sT;for(const n of t)e=e.add(n);return e}const rT=new ze(ce);function iT(){return rT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:co(e)?"-0":e}}function qp(t){return{integerValue:""+t}}function oT(t,e){return M_(e)?qp(e):wc(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this._=void 0}}function aT(t,e,n){return t instanceof ho?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&pc(i)&&(i=gc(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof ks?Hp(t,e):t instanceof Ds?Gp(t,e):function(r,i){const a=Wp(r,i),c=Th(a)+Th(r.Pe);return fl(a)&&fl(r.Pe)?qp(c):wc(r.serializer,c)}(t,e)}function lT(t,e,n){return t instanceof ks?Hp(t,e):t instanceof Ds?Gp(t,e):n}function Wp(t,e){return t instanceof mo?function(s){return fl(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class ho extends Uo{}class ks extends Uo{constructor(e){super(),this.elements=e}}function Hp(t,e){const n=Kp(e);for(const s of t.elements)n.some(r=>Mt(r,s))||n.push(s);return{arrayValue:{values:n}}}class Ds extends Uo{constructor(e){super(),this.elements=e}}function Gp(t,e){let n=Kp(e);for(const s of t.elements)n=n.filter(r=>!Mt(r,s));return{arrayValue:{values:n}}}class mo extends Uo{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Th(t){return Se(t.integerValue||t.doubleValue)}function Kp(t){return yc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this.field=e,this.transform=n}}function cT(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof ks&&r instanceof ks||s instanceof Ds&&r instanceof Ds?Cs(s.elements,r.elements,Mt):s instanceof mo&&r instanceof mo?Mt(s.Pe,r.Pe):s instanceof ho&&r instanceof ho}(t.transform,e.transform)}class uT{constructor(e,n){this.version=e,this.transformResults=n}}class yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yt}static exists(e){return new yt(void 0,e)}static updateTime(e){return new yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ki(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bo{}function Jp(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _c(t.key,yt.none()):new ii(t.key,t.data,yt.none());{const n=t.data,s=rt.empty();let r=new ze($e.comparator);for(let i of e.fields)if(!r.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?s.delete(i):s.set(i,a),r=r.add(i)}return new In(t.key,s,new ut(r.toArray()),yt.none())}}function dT(t,e,n){t instanceof ii?function(r,i,a){const c=r.value.clone(),u=Eh(r.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof In?function(r,i,a){if(!Ki(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Eh(r.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Yp(r)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Er(t,e,n,s){return t instanceof ii?function(i,a,c,u){if(!Ki(i.precondition,a))return c;const d=i.value.clone(),h=Nh(i.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof In?function(i,a,c,u){if(!Ki(i.precondition,a))return c;const d=Nh(i.fieldTransforms,u,a),h=a.data;return h.setAll(Yp(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(i,a,c){return Ki(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function hT(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Wp(s.transform,r||null);i!=null&&(n===null&&(n=rt.empty()),n.set(s.field,i))}return n||null}function Ih(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Cs(s,r,(i,a)=>cT(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ii extends Bo{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class In extends Bo{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yp(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Eh(t,e,n){const s=new Map;he(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],a=i.transform,c=e.data.field(i.field);s.set(i.field,lT(a,c,n[r]))}return s}function Nh(t,e,n){const s=new Map;for(const r of t){const i=r.transform,a=n.data.field(r.field);s.set(r.field,aT(i,a,e))}return s}class _c extends Bo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mT extends Bo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&dT(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Er(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Er(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=zp();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(r.key)?null:c;const u=Jp(a,c);u!==null&&s.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(te.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Cs(this.mutations,e.mutations,(n,s)=>Ih(n,s))&&Cs(this.baseMutations,e.baseMutations,(n,s)=>Ih(n,s))}}class Tc{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){he(e.mutations.length===s.length);let r=function(){return nT}();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,s[a].version);return new Tc(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke,ae;function yT(t){switch(t){default:return Y();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function Xp(t){if(t===void 0)return Jt("GRPC error has no .code"),V.UNKNOWN;switch(t){case ke.OK:return V.OK;case ke.CANCELLED:return V.CANCELLED;case ke.UNKNOWN:return V.UNKNOWN;case ke.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case ke.INTERNAL:return V.INTERNAL;case ke.UNAVAILABLE:return V.UNAVAILABLE;case ke.UNAUTHENTICATED:return V.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case ke.NOT_FOUND:return V.NOT_FOUND;case ke.ALREADY_EXISTS:return V.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return V.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case ke.ABORTED:return V.ABORTED;case ke.OUT_OF_RANGE:return V.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return V.UNIMPLEMENTED;case ke.DATA_LOSS:return V.DATA_LOSS;default:return Y()}}(ae=ke||(ke={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=new Ln([4294967295,4294967295],0);function Ah(t){const e=xT().encode(t),n=new wp;return n.update(e),new Uint8Array(n.digest())}function Sh(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ln([n,s],0),new Ln([r,i],0)]}class Ic{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new yr(`Invalid padding: ${n}`);if(s<0)throw new yr(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new yr(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new yr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ln.fromNumber(this.Ie)}Ee(e,n,s){let r=e.add(n.multiply(Ln.fromNumber(s)));return r.compare(vT)===1&&(r=new Ln([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ah(e),[s,r]=Sh(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(s,r,i);if(!this.de(a))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Ic(i,r,n);return s.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=Ah(e),[s,r]=Sh(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(s,r,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class yr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,oi.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new $o(te.min(),r,new be(ce),Yt(),ie())}}class oi{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new oi(s,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n,s,r){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=r}}class Zp{constructor(e,n){this.targetId=e,this.me=n}}class eg{constructor(e,n,s=qe.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class jh{constructor(){this.fe=0,this.ge=Rh(),this.pe=qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),s=ie();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Y()}}),new oi(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=Rh()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class bT{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yt(),this.qe=Ch(),this.Qe=new be(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,s=e.me.count,r=this.Je(n);if(r){const i=r.target;if(gl(i))if(s===0){const a=new H(i.path);this.Ue(n,a,Je.newNoDocument(a,te.min()))}else he(s===1);else{const a=this.Ye(n);if(a!==s){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let a,c;try{a=Gn(s).toUint8Array()}catch(u){if(u instanceof Cp)return js("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ic(a,r,i)}catch(u){return js(u instanceof yr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&gl(c.target)){const u=new H(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Je.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let s=ie();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const r=new $o(e,n,this.Qe,this.ke,s);return this.ke=Yt(),this.qe=Ch(),this.Qe=new be(ce),r}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new jh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ze(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ch(){return new be(H.comparator)}function Rh(){return new be(H.comparator)}const wT={asc:"ASCENDING",desc:"DESCENDING"},_T={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TT={and:"AND",or:"OR"};class IT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vl(t,e){return t.useProto3Json||Oo(e)?e:{value:e}}function fo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tg(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ET(t,e){return fo(t,e.toTimestamp())}function Pt(t){return he(!!t),te.fromTimestamp(function(n){const s=xn(n);return new Me(s.seconds,s.nanos)}(t))}function Ec(t,e){return bl(t,e).canonicalString()}function bl(t,e){const n=function(r){return new ye(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ng(t){const e=ye.fromString(t);return he(ag(e)),e}function wl(t,e){return Ec(t.databaseId,e.path)}function Ma(t,e){const n=ng(e);if(n.get(1)!==t.databaseId.projectId)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(rg(n))}function sg(t,e){return Ec(t.databaseId,e)}function NT(t){const e=ng(t);return e.length===4?ye.emptyPath():rg(e)}function _l(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rg(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ph(t,e,n){return{name:wl(t,e),fields:n.value.mapValue.fields}}function AT(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(he(h===void 0||typeof h=="string"),qe.fromBase64String(h||"")):(he(h===void 0||h instanceof Buffer||h instanceof Uint8Array),qe.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const h=d.code===void 0?V.UNKNOWN:Xp(d.code);return new z(h,d.message||"")}(a);n=new eg(s,r,i,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ma(t,s.document.name),i=Pt(s.document.updateTime),a=s.document.createTime?Pt(s.document.createTime):te.min(),c=new rt({mapValue:{fields:s.document.fields}}),u=Je.newFoundDocument(r,i,a,c),d=s.targetIds||[],h=s.removedTargetIds||[];n=new Qi(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Ma(t,s.document),i=s.readTime?Pt(s.readTime):te.min(),a=Je.newNoDocument(r,i),c=s.removedTargetIds||[];n=new Qi([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Ma(t,s.document),i=s.removedTargetIds||[];n=new Qi([],i,r,null)}else{if(!("filter"in e))return Y();{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,a=new gT(r,i),c=s.targetId;n=new Zp(c,a)}}return n}function ST(t,e){let n;if(e instanceof ii)n={update:Ph(t,e.key,e.value)};else if(e instanceof _c)n={delete:wl(t,e.key)};else if(e instanceof In)n={update:Ph(t,e.key,e.data),updateMask:OT(e.fieldMask)};else{if(!(e instanceof mT))return Y();n={verify:wl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,a){const c=a.transform;if(c instanceof ho)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ks)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ds)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof mo)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw Y()}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:ET(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function jT(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(r,i){let a=r.updateTime?Pt(r.updateTime):Pt(i);return a.isEqual(te.min())&&(a=Pt(i)),new uT(a,r.transformResults||[])}(n,e))):[]}function CT(t,e){return{documents:[sg(t,e.path)]}}function RT(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=sg(t,r);const i=function(d){if(d.length!==0)return og(Tt.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:ms(g.field),direction:DT(g.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=vl(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:r}}function PT(t){let e=NT(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){he(s===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const g=ig(f);return g instanceof Tt&&Dp(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(g=>function(w){return new Ur(fs(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(f){let g;return g=typeof f=="object"?f.value:f,Oo(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(f){const g=!!f.before,x=f.values||[];return new uo(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const g=!f.before,x=f.values||[];return new uo(x,g)}(n.endAt)),Y_(e,r,a,i,c,"F",u,d)}function kT(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ig(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=fs(n.unaryFilter.field);return Ve.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=fs(n.unaryFilter.field);return Ve.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fs(n.unaryFilter.field);return Ve.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fs(n.unaryFilter.field);return Ve.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Ve.create(fs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tt.create(n.compositeFilter.filters.map(s=>ig(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function DT(t){return wT[t]}function VT(t){return _T[t]}function MT(t){return TT[t]}function ms(t){return{fieldPath:t.canonicalString()}}function fs(t){return $e.fromServerFormat(t.fieldPath)}function og(t){return t instanceof Ve?function(n){if(n.op==="=="){if(xh(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NAN"}};if(yh(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xh(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NAN"}};if(yh(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(n.field),op:VT(n.op),value:n.value}}}(t):t instanceof Tt?function(n){const s=n.getFilters().map(r=>og(r));return s.length===1?s[0]:{compositeFilter:{op:MT(n.op),filters:s}}}(t):Y()}function OT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ag(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n,s,r,i=te.min(),a=te.min(),c=qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.ct=e}}function FT(t){const e=PT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.un=new BT}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(yn.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(yn.min())}updateCollectionGroup(e,n,s){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class BT{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ze(ye.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ze(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Vs(0)}static kn(){return new Vs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.changes=new zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?F.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Er(s.mutation,r,ut.empty(),Me.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ie()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ie()){const r=Vn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let a=gr();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const s=Vn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ie()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,s,r){let i=Yt();const a=Ir(),c=function(){return Ir()}();return n.forEach((u,d)=>{const h=s.get(d.key);r.has(d.key)&&(h===void 0||h.mutation instanceof In)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Er(h.mutation,d,h.mutation.getFieldMask(),Me.now())):a.set(d.key,ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>{var f;return c.set(d,new zT(h,(f=a.get(d))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(e,n){const s=Ir();let r=new be((a,c)=>a-c),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=s.get(u)||ut.empty();h=c.applyToLocalView(d,h),s.set(u,h);const f=(r.get(c.batchId)||ie()).add(u);r=r.insert(c.batchId,f)})}).next(()=>{const a=[],c=r.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,f=zp();h.forEach(g=>{if(!i.has(g)){const x=Jp(n.get(g),s.get(g));x!==null&&f.set(g,x),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return F.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(a){return H.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):F.resolve(Vn());let c=-1,u=i;return a.next(d=>F.forEach(d,(h,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ie())).next(h=>({batchId:c,changes:$p(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(s=>{let r=gr();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let a=gr();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const d=function(f,g){return new $s(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(h=>{h.forEach((f,g)=>{a=a.insert(f,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(a=>{i.forEach((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Je.newInvalidDocument(h)))});let c=gr();return a.forEach((u,d)=>{const h=i.get(u);h!==void 0&&Er(h.mutation,d,ut.empty(),Me.now()),Fo(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Pt(r.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:FT(r.bundledQuery),readTime:Pt(r.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.overlays=new be(H.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Vn();return F.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Ir.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(s)),F.resolve()}getOverlaysForCollection(e,n,s){const r=Vn(),i=n.length+1,a=new H(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return F.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new be((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=i.get(d.largestBatchId);h===null&&(h=Vn(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Vn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=r)););return F.resolve(c)}ht(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(s.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new pT(n,s));let i=this.Ir.get(n);i===void 0&&(i=ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.Tr=new ze(Le.Er),this.dr=new ze(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new Le(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Vr(new Le(e,n))}mr(e,n){e.forEach(s=>this.removeReference(s,n))}gr(e){const n=new H(new ye([])),s=new Le(n,e),r=new Le(n,e+1),i=[];return this.dr.forEachInRange([s,r],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new H(new ye([])),s=new Le(n,e),r=new Le(n,e+1);let i=ie();return this.dr.forEachInRange([s,r],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Le(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Le{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ze(Le.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new fT(i,n,s,r);this.mutationQueue.push(a);for(const c of r)this.br=this.br.add(new Le(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.vr(s),i=r<0?0:r;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Le(n,0),r=new Le(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([s,r],a=>{const c=this.Dr(a.wr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ze(ce);return n.forEach(r=>{const i=new Le(r,0),a=new Le(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{s=s.add(c.wr)})}),F.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;H.isDocumentKey(i)||(i=i.child(""));const a=new Le(new H(i),0);let c=new ze(ce);return this.br.forEachWhile(u=>{const d=u.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(c=c.add(u.wr)),!0)},a),F.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(s=>{const r=this.Dr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){he(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return F.forEach(n.mutations,r=>{const i=new Le(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,n){const s=new Le(n,0),r=this.br.firstAfterOrEqual(s);return F.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.Mr=e,this.docs=function(){return new be(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,a=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return F.resolve(s?s.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let s=Yt();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Je.newInvalidDocument(r))}),F.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Yt();const a=n.path,c=new H(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||P_(R_(h),s)<=0||(r.has(h.key)||Fo(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Y()}Or(e,n){return F.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new JT(this)}getSize(e){return F.resolve(this.size)}}class JT extends $T{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(s)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.persistence=e,this.Nr=new zs(n=>xc(n),vc),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nc,this.targetCount=0,this.kr=Vs.Bn()}forEachTarget(e,n){return this.Nr.forEach((s,r)=>n(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Vs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&s.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),F.waitFor(i).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return F.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),F.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(a=>{i.push(r.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return F.resolve(s)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new fc(0),this.Kr=!1,this.Kr=!0,this.$r=new GT,this.referenceDelegate=e(this),this.Ur=new YT(this),this.indexManager=new UT,this.remoteDocumentCache=function(r){return new QT(r)}(s=>this.referenceDelegate.Wr(s)),this.serializer=new LT(n),this.Gr=new WT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new KT(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){q("MemoryPersistence","Starting transaction:",e);const r=new ZT(this.Qr.next());return this.referenceDelegate.zr(),s(r).next(i=>this.referenceDelegate.jr(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,n)))}}class ZT extends D_{constructor(e){super(),this.currentSequenceNumber=e}}class Ac{constructor(e){this.persistence=e,this.Jr=new Nc,this.Yr=null}static Zr(e){return new Ac(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),F.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Xr.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,s=>{const r=H.fromPath(s);return this.ei(e,r).next(i=>{i||n.removeEntry(r,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=r}static Wi(e,n){let s=ie(),r=ie();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Sc(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return K0()?8:V_(Xe())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,r,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new eI;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,s,r){return s.documentReadCount<this.ji?(ur()<=oe.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",hs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(ur()<=oe.DEBUG&&q("QueryEngine","Query:",hs(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.Hi*r?(ur()<=oe.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",hs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rt(n))):F.resolve())}Yi(e,n){if(_h(n))return F.resolve(null);let s=Rt(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=xl(n,null,"F"),s=Rt(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const a=ie(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,s).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,xl(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,s,r){return _h(n)||r.isEqual(te.min())?F.resolve(null):this.Ji.getDocuments(e,s).next(i=>{const a=this.ts(n,i);return this.ns(n,a,s,r)?F.resolve(null):(ur()<=oe.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hs(n)),this.rs(e,a,n,C_(r,-1)).next(c=>c))})}ts(e,n){let s=new ze(Up(e));return n.forEach((r,i)=>{Fo(e,i)&&(s=s.add(i))}),s}ns(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,n,s){return ur()<=oe.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",hs(n)),this.Ji.getDocumentsMatchingQuery(e,n,yn.min(),s)}rs(e,n,s,r){return this.Ji.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,s,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new be(ce),this._s=new zs(i=>xc(i),vc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function sI(t,e,n,s){return new nI(t,e,n,s)}async function lg(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],c=[];let u=ie();for(const d of r){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function rI(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){const f=d.batch,g=f.keys();let x=F.resolve();return g.forEach(w=>{x=x.next(()=>h.getEntry(u,w)).next(_=>{const A=d.docVersions.get(w);he(A!==null),_.version.compareTo(A)<0&&(f.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(u,f))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let u=ie();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function cg(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function iI(t,e){const n=ne(t),s=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const c=[];e.targetChanges.forEach((h,f)=>{const g=r.get(f);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?x=x.withResumeToken(qe.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,s)),r=r.insert(f,x),function(_,A,P){return _.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,x,h)&&c.push(n.Ur.updateTargetData(i,x))});let u=Yt(),d=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),c.push(oI(i,a,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!s.isEqual(te.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,s));c.push(h)}return F.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=r,i))}function oI(t,e,n){let s=ie(),r=ie();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let a=Yt();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):q("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:r}})}function aI(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function lI(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ur.getTargetData(s,e).next(i=>i?(r=i,F.resolve(r)):n.Ur.allocateTargetId(s).next(a=>(r=new hn(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.os.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s})}async function Tl(t,e,n){const s=ne(t),r=s.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ri(a))throw a;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}s.os=s.os.remove(e),s._s.delete(r.target)}function kh(t,e,n){const s=ne(t);let r=te.min(),i=ie();return s.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,h){const f=ne(u),g=f._s.get(h);return g!==void 0?F.resolve(f.os.get(g)):f.Ur.getTargetData(d,h)}(s,a,Rt(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>s.ss.getDocumentsMatchingQuery(a,e,n?r:te.min(),n?i:ie())).next(c=>(cI(s,Z_(e),c),{documents:c,Ts:i})))}function cI(t,e,n){let s=t.us.get(e)||te.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.us.set(e,s)}class Dh{constructor(){this.activeTargetIds=iT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uI{constructor(){this.so=new Dh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Dh,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Di=null;function Oa(){return Di===null?Di=function(){return 268435456+Math.round(2147483648*Math.random())}():Di++,"0x"+Di.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke="WebChannelConnection";class fI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+n.host,this.vo=`projects/${r}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${i}`}get Fo(){return!1}Mo(n,s,r,i,a){const c=Oa(),u=this.xo(n,s.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${c}:`,u,r);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,r).then(h=>(q("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw js("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",r),h})}Lo(n,s,r,i,a,c){return this.Mo(n,s,r,i,a)}Oo(n,s,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((i,a)=>n[a]=i),r&&r.headers.forEach((i,a)=>n[a]=i)}xo(n,s){const r=hI[n];return`${this.Do}/v1/${s}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,r){const i=Oa();return new Promise((a,c)=>{const u=new _p;u.setWithCredentials(!0),u.listenOnce(Tp.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hi.NO_ERROR:const h=u.getResponseJson();q(Ke,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),a(h);break;case Hi.TIMEOUT:q(Ke,`RPC '${e}' ${i} timed out`),c(new z(V.DEADLINE_EXCEEDED,"Request time out"));break;case Hi.HTTP_ERROR:const f=u.getStatus();if(q(Ke,`RPC '${e}' ${i} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const w=function(A){const P=A.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(P)>=0?P:V.UNKNOWN}(x.status);c(new z(w,x.message))}else c(new z(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new z(V.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{q(Ke,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(r);q(Ke,`RPC '${e}' ${i} sending request:`,r),u.send(n,"POST",d,s,15)})}Bo(e,n,s){const r=Oa(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Np(),c=Ep(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=i.join("");q(Ke,`Creating RPC '${e}' stream ${r}: ${h}`,u);const f=a.createWebChannel(h,u);let g=!1,x=!1;const w=new mI({Io:A=>{x?q(Ke,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(g||(q(Ke,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),q(Ke,`RPC '${e}' stream ${r} sending:`,A),f.send(A))},To:()=>f.close()}),_=(A,P,k)=>{A.listen(P,S=>{try{k(S)}catch(M){setTimeout(()=>{throw M},0)}})};return _(f,pr.EventType.OPEN,()=>{x||(q(Ke,`RPC '${e}' stream ${r} transport opened.`),w.yo())}),_(f,pr.EventType.CLOSE,()=>{x||(x=!0,q(Ke,`RPC '${e}' stream ${r} transport closed`),w.So())}),_(f,pr.EventType.ERROR,A=>{x||(x=!0,js(Ke,`RPC '${e}' stream ${r} transport errored:`,A),w.So(new z(V.UNAVAILABLE,"The operation could not be completed")))}),_(f,pr.EventType.MESSAGE,A=>{var P;if(!x){const k=A.data[0];he(!!k);const S=k,M=S.error||((P=S[0])===null||P===void 0?void 0:P.error);if(M){q(Ke,`RPC '${e}' stream ${r} received error:`,M);const B=M.status;let O=function(b){const T=ke[b];if(T!==void 0)return Xp(T)}(B),E=M.message;O===void 0&&(O=V.INTERNAL,E="Unknown error status: "+B+" with message "+M.message),x=!0,w.So(new z(O,E)),f.close()}else q(Ke,`RPC '${e}' stream ${r} received:`,k),w.bo(k)}}),_(c,Ip.STAT_EVENT,A=>{A.stat===hl.PROXY?q(Ke,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===hl.NOPROXY&&q(Ke,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function La(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){return new IT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n,s=1e3,r=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-s);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,s,r,i,a,c,u){this.ui=e,this.Ho=s,this.Jo=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ug(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Jt(n.toString()),Jt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.Yo===n&&this.P_(s,r)},s=>{e(()=>{const r=new z(V.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(r)})})}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{s(()=>this.I_(r))}),this.stream.onMessage(r=>{s(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pI extends dg{constructor(e,n,s,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=AT(this.serializer,e),s=function(i){if(!("targetChange"in i))return te.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?Pt(a.readTime):te.min()}(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=_l(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=gl(u)?{documents:CT(i,u)}:{query:RT(i,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=tg(i,a.resumeToken);const d=vl(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(te.min())>0){c.readTime=fo(i,a.snapshotVersion.toTimestamp());const d=vl(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const s=kT(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=_l(this.serializer),n.removeTarget=e,this.a_(n)}}class gI extends dg{constructor(e,n,s,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return he(!!e.streamToken),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=jT(e.writeResults,e.commitTime),s=Pt(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=_l(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>ST(this.serializer,s))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,bl(n,s),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(V.UNKNOWN,i.toString())})}Lo(e,n,s,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,bl(n,s),r,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(V.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jt(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{s.enqueueAndForget(async()=>{es(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ne(u);d.L_.add(4),await ai(d),d.q_.set("Unknown"),d.L_.delete(4),await qo(d)}(this))})}),this.q_=new xI(s,r)}}async function qo(t){if(es(t))for(const e of t.B_)await e(!0)}async function ai(t){for(const e of t.B_)await e(!1)}function hg(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Pc(n)?Rc(n):qs(n).r_()&&Cc(n,e))}function jc(t,e){const n=ne(t),s=qs(n);n.N_.delete(e),s.r_()&&mg(n,e),n.N_.size===0&&(s.r_()?s.o_():es(n)&&n.q_.set("Unknown"))}function Cc(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).A_(e)}function mg(t,e){t.Q_.xe(e),qs(t).R_(e)}function Rc(t){t.Q_=new bT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.q_.v_()}function Pc(t){return es(t)&&!qs(t).n_()&&t.N_.size>0}function es(t){return ne(t).L_.size===0}function fg(t){t.Q_=void 0}async function bI(t){t.q_.set("Online")}async function wI(t){t.N_.forEach((e,n)=>{Cc(t,e)})}async function _I(t,e){fg(t),Pc(t)?(t.q_.M_(e),Rc(t)):t.q_.set("Unknown")}async function TI(t,e,n){if(t.q_.set("Online"),e instanceof eg&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const c of i.targetIds)r.N_.has(c)&&(await r.remoteSyncer.rejectListen(c,a),r.N_.delete(c),r.Q_.removeTarget(c))}(t,e)}catch(s){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await po(t,s)}else if(e instanceof Qi?t.Q_.Ke(e):e instanceof Zp?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const s=await cg(t.localStore);n.compareTo(s)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(d);h&&i.N_.set(d,h.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(qe.EMPTY_BYTE_STRING,h.snapshotVersion)),mg(i,u);const f=new hn(h.target,u,d,h.sequenceNumber);Cc(i,f)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(s){q("RemoteStore","Failed to raise snapshot:",s),await po(t,s)}}async function po(t,e,n){if(!ri(e))throw e;t.L_.add(1),await ai(t),t.q_.set("Offline"),n||(n=()=>cg(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await qo(t)})}function pg(t,e){return e().catch(n=>po(t,n,e))}async function Wo(t){const e=ne(t),n=vn(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;II(e);)try{const r=await aI(e.localStore,s);if(r===null){e.O_.length===0&&n.o_();break}s=r.batchId,EI(e,r)}catch(r){await po(e,r)}gg(e)&&yg(e)}function II(t){return es(t)&&t.O_.length<10}function EI(t,e){t.O_.push(e);const n=vn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function gg(t){return es(t)&&!vn(t).n_()&&t.O_.length>0}function yg(t){vn(t).start()}async function NI(t){vn(t).p_()}async function AI(t){const e=vn(t);for(const n of t.O_)e.m_(n.mutations)}async function SI(t,e,n){const s=t.O_.shift(),r=Tc.from(s,e,n);await pg(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Wo(t)}async function jI(t,e){e&&vn(t).V_&&await async function(s,r){if(function(a){return yT(a)&&a!==V.ABORTED}(r.code)){const i=s.O_.shift();vn(s).s_(),await pg(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Wo(s)}}(t,e),gg(t)&&yg(t)}async function Mh(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const s=es(n);n.L_.add(3),await ai(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await qo(n)}async function CI(t,e){const n=ne(t);e?(n.L_.delete(2),await qo(n)):e||(n.L_.add(2),await ai(n),n.q_.set("Unknown"))}function qs(t){return t.K_||(t.K_=function(n,s,r){const i=ne(n);return i.w_(),new pI(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Eo:bI.bind(null,t),Ro:wI.bind(null,t),mo:_I.bind(null,t),d_:TI.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Pc(t)?Rc(t):t.q_.set("Unknown")):(await t.K_.stop(),fg(t))})),t.K_}function vn(t){return t.U_||(t.U_=function(n,s,r){const i=ne(n);return i.w_(),new gI(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:NI.bind(null,t),mo:jI.bind(null,t),f_:AI.bind(null,t),g_:SI.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wo(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const a=Date.now()+s,c=new kc(e,n,a,r,i);return c.start(s),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dc(t,e){if(Jt("AsyncQueue",`${e}: ${t}`),ri(t))return new z(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.comparator=e?(n,s)=>e(n,s)||H.comparator(n.key,s.key):(n,s)=>H.comparator(n.key,s.key),this.keyedMap=gr(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new Ns(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ns;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this.W_=new be(H.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ms{constructor(e,n,s,r,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,r,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ms(e,n,Ns.emptySet(n),a,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class PI{constructor(){this.queries=Lh(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,s){const r=ne(n),i=r.queries;r.queries=Lh(),i.forEach((a,c)=>{for(const u of c.j_)u.onError(s)})})(this,new z(V.ABORTED,"Firestore shutting down"))}}function Lh(){return new zs(t=>Fp(t),Lo)}async function xg(t,e){const n=ne(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.H_()&&e.J_()&&(s=2):(i=new RI,s=e.J_()?0:1);try{switch(s){case 0:i.z_=await n.onListen(r,!0);break;case 1:i.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const c=Dc(a,`Initialization of query '${hs(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Vc(n)}async function vg(t,e){const n=ne(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?r=e.J_()?0:1:!i.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function kI(t,e){const n=ne(t);let s=!1;for(const r of e){const i=r.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(r)&&(s=!0);a.z_=r}}s&&Vc(n)}function DI(t,e,n){const s=ne(t),r=s.queries.get(e);if(r)for(const i of r.j_)i.onError(n);s.queries.delete(e)}function Vc(t){t.Y_.forEach(e=>{e.next()})}var Il,Fh;(Fh=Il||(Il={})).ea="default",Fh.Cache="cache";class bg{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Ms(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Il.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this.key=e}}class _g{constructor(e){this.key=e}}class VI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=Up(e),this.Ra=new Ns(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new Oh,r=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,f)=>{const g=r.get(h),x=Fo(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),_=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let A=!1;g&&x?g.data.isEqual(x.data)?w!==_&&(s.track({type:3,doc:x}),A=!0):this.ga(g,x)||(s.track({type:2,doc:x}),A=!0,(u&&this.Aa(x,u)>0||d&&this.Aa(x,d)<0)&&(c=!0)):!g&&x?(s.track({type:0,doc:x}),A=!0):g&&!x&&(s.track({type:1,doc:g}),A=!0,(u||d)&&(c=!0)),A&&(x?(a=a.add(x),i=_?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{Ra:a,fa:s,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((h,f)=>function(x,w){const _=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return _(x)-_(w)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(s),r=r!=null&&r;const c=n&&!r?this.ya():[],u=this.da.size===0&&this.current&&!r?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Ms(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Oh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const n=[];return e.forEach(s=>{this.da.has(s)||n.push(new _g(s))}),this.da.forEach(s=>{e.has(s)||n.push(new wg(s))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ms.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class MI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class OI{constructor(e){this.key=e,this.va=!1}}class LI{constructor(e,n,s,r,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new zs(c=>Fp(c),Lo),this.Ma=new Map,this.xa=new Set,this.Oa=new be(H.comparator),this.Na=new Map,this.La=new Nc,this.Ba={},this.ka=new Map,this.qa=Vs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function FI(t,e,n=!0){const s=Sg(t);let r;const i=s.Fa.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Da()):r=await Tg(s,e,n,!0),r}async function UI(t,e){const n=Sg(t);await Tg(n,e,!0,!1)}async function Tg(t,e,n,s){const r=await lI(t.localStore,Rt(e)),i=r.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return s&&(c=await BI(t,e,i,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&hg(t.remoteStore,r),c}async function BI(t,e,n,s,r){t.Ka=(f,g,x)=>async function(_,A,P,k){let S=A.view.ma(P);S.ns&&(S=await kh(_.localStore,A.query,!1).then(({documents:E})=>A.view.ma(E,S)));const M=k&&k.targetChanges.get(A.targetId),B=k&&k.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(S,_.isPrimaryClient,M,B);return Bh(_,A.targetId,O.wa),O.snapshot}(t,f,g,x);const i=await kh(t.localStore,e,!0),a=new VI(e,i.Ts),c=a.ma(i.documents),u=oi.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),d=a.applyChanges(c,t.isPrimaryClient,u);Bh(t,n,d.wa);const h=new MI(e,n,a);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function $I(t,e,n){const s=ne(t),r=s.Fa.get(e),i=s.Ma.get(r.targetId);if(i.length>1)return s.Ma.set(r.targetId,i.filter(a=>!Lo(a,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Tl(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&jc(s.remoteStore,r.targetId),El(s,r.targetId)}).catch(si)):(El(s,r.targetId),await Tl(s.localStore,r.targetId,!0))}async function zI(t,e){const n=ne(t),s=n.Fa.get(e),r=n.Ma.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),jc(n.remoteStore,s.targetId))}async function qI(t,e,n){const s=YI(t);try{const r=await function(a,c){const u=ne(a),d=Me.now(),h=c.reduce((x,w)=>x.add(w.key),ie());let f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let w=Yt(),_=ie();return u.cs.getEntries(x,h).next(A=>{w=A,w.forEach((P,k)=>{k.isValidDocument()||(_=_.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,w)).next(A=>{f=A;const P=[];for(const k of c){const S=hT(k,f.get(k.key).overlayedDocument);S!=null&&P.push(new In(k.key,S,Rp(S.value.mapValue),yt.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,P,c)}).next(A=>{g=A;const P=A.applyToLocalDocumentSet(f,_);return u.documentOverlayCache.saveOverlays(x,A.batchId,P)})}).then(()=>({batchId:g.batchId,changes:$p(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new be(ce)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(s,r.batchId,n),await li(s,r.changes),await Wo(s.remoteStore)}catch(r){const i=Dc(r,"Failed to persist write");n.reject(i)}}async function Ig(t,e){const n=ne(t);try{const s=await iI(n.localStore,e);e.targetChanges.forEach((r,i)=>{const a=n.Na.get(i);a&&(he(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?he(a.va):r.removedDocuments.size>0&&(he(a.va),a.va=!1))}),await li(n,s,e)}catch(s){await si(s)}}function Uh(t,e,n){const s=ne(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(a,c){const u=ne(a);u.onlineState=c;let d=!1;u.queries.forEach((h,f)=>{for(const g of f.j_)g.Z_(c)&&(d=!0)}),d&&Vc(u)}(s.eventManager,e),r.length&&s.Ca.d_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WI(t,e,n){const s=ne(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Na.get(e),i=r&&r.key;if(i){let a=new be(H.comparator);a=a.insert(i,Je.newNoDocument(i,te.min()));const c=ie().add(i),u=new $o(te.min(),new Map,new be(ce),a,c);await Ig(s,u),s.Oa=s.Oa.remove(i),s.Na.delete(e),Mc(s)}else await Tl(s.localStore,e,!1).then(()=>El(s,e,n)).catch(si)}async function HI(t,e){const n=ne(t),s=e.batch.batchId;try{const r=await rI(n.localStore,e);Ng(n,s,null),Eg(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await li(n,r)}catch(r){await si(r)}}async function GI(t,e,n){const s=ne(t);try{const r=await function(a,c){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(f=>(he(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(s.localStore,e);Ng(s,e,n),Eg(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await li(s,r)}catch(r){await si(r)}}function Eg(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ng(t,e,n){const s=ne(t);let r=s.Ba[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Ba[s.currentUser.toKey()]=r}}function El(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Ma.get(e))t.Fa.delete(s),n&&t.Ca.$a(s,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(s=>{t.La.containsKey(s)||Ag(t,s)})}function Ag(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(jc(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Mc(t))}function Bh(t,e,n){for(const s of n)s instanceof wg?(t.La.addReference(s.key,e),KI(t,s)):s instanceof _g?(q("SyncEngine","Document no longer in limbo: "+s.key),t.La.removeReference(s.key,e),t.La.containsKey(s.key)||Ag(t,s.key)):Y()}function KI(t,e){const n=e.key,s=n.path.canonicalString();t.Oa.get(n)||t.xa.has(s)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(s),Mc(t))}function Mc(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new H(ye.fromString(e)),s=t.qa.next();t.Na.set(s,new OI(n)),t.Oa=t.Oa.insert(n,s),hg(t.remoteStore,new hn(Rt(bc(n.path)),s,"TargetPurposeLimboResolution",fc.oe))}}async function li(t,e,n){const s=ne(t),r=[],i=[],a=[];s.Fa.isEmpty()||(s.Fa.forEach((c,u)=>{a.push(s.Ka(u,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){r.push(d);const f=Sc.Wi(u.targetId,d);i.push(f)}}))}),await Promise.all(a),s.Ca.d_(r),await async function(u,d){const h=ne(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(d,g=>F.forEach(g.$i,x=>h.persistence.referenceDelegate.addReference(f,g.targetId,x)).next(()=>F.forEach(g.Ui,x=>h.persistence.referenceDelegate.removeReference(f,g.targetId,x)))))}catch(f){if(!ri(f))throw f;q("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const x=h.os.get(g),w=x.snapshotVersion,_=x.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(g,_)}}}(s.localStore,i))}async function QI(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const s=await lg(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new z(V.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await li(n,s.hs)}}function JI(t,e){const n=ne(t),s=n.Na.get(e);if(s&&s.va)return ie().add(s.key);{let r=ie();const i=n.Ma.get(e);if(!i)return r;for(const a of i){const c=n.Fa.get(a);r=r.unionWith(c.view.Va)}return r}}function Sg(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ig.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WI.bind(null,e),e.Ca.d_=kI.bind(null,e.eventManager),e.Ca.$a=DI.bind(null,e.eventManager),e}function YI(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GI.bind(null,e),e}class go{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zo(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return sI(this.persistence,new tI,e.initialUser,this.serializer)}Ga(e){return new XT(Ac.Zr,this.serializer)}Wa(e){return new uI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}go.provider={build:()=>new go};class Nl{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Uh(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=QI.bind(null,this.syncEngine),await CI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PI}()}createDatastore(e){const n=zo(e.databaseInfo.databaseId),s=function(i){return new fI(i)}(e.databaseInfo);return function(i,a,c,u){return new yI(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,a,c){return new vI(s,r,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Uh(this.syncEngine,n,0),function(){return Vh.D()?new Vh:new dI}())}createSyncEngine(e,n){return function(r,i,a,c,u,d,h){const f=new LI(r,i,a,c,u,d);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=ne(r);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ai(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Nl.provider={build:()=>new Nl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Jt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Qe.UNAUTHENTICATED,this.clientId=Sp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{q("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Dc(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Fa(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await lg(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $h(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZI(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Mh(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Mh(e.remoteStore,r)),t._onlineComponents=e}async function ZI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fa(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===V.FAILED_PRECONDITION||r.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;js("Error using user provided cache. Falling back to memory cache: "+n),await Fa(t,new go)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Fa(t,new go);return t._offlineComponents}async function Cg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await $h(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await $h(t,new Nl))),t._onlineComponents}function eE(t){return Cg(t).then(e=>e.syncEngine)}async function Rg(t){const e=await Cg(t),n=e.eventManager;return n.onListen=FI.bind(null,e.syncEngine),n.onUnlisten=$I.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zI.bind(null,e.syncEngine),n}function tE(t,e,n={}){const s=new Gt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const h=new jg({next:g=>{h.Za(),a.enqueueAndForget(()=>vg(i,f));const x=g.docs.has(c);!x&&g.fromCache?d.reject(new z(V.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new z(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),f=new bg(bc(c.path),h,{includeMetadataChanges:!0,_a:!0});return xg(i,f)}(await Rg(t),t.asyncQueue,e,n,s)),s.promise}function nE(t,e,n={}){const s=new Gt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const h=new jg({next:g=>{h.Za(),a.enqueueAndForget(()=>vg(i,f)),g.fromCache&&u.source==="server"?d.reject(new z(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),f=new bg(c,h,{includeMetadataChanges:!0,_a:!0});return xg(i,f)}(await Rg(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t,e,n){if(!n)throw new z(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sE(t,e,n,s){if(e===!0&&s===!0)throw new z(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qh(t){if(!H.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wh(t){if(H.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ho(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function It(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ho(t);throw new z(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new z(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Go{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hh(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new w_;switch(s.type){case"firstParty":return new E_(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new z(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=zh.get(n);s&&(q("ComponentProvider","Removing Datastore"),zh.delete(n),s.terminate())}(this),Promise.resolve()}}function rE(t,e,n,s={}){var r;const i=(t=It(t,Go))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),s.mockUserToken){let c,u;if(typeof s.mockUserToken=="string")c=s.mockUserToken,u=Qe.MOCK_USER;else{c=Vf(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new z(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Qe(d)}t._authCredentials=new __(new Ap(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class st{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}}class pn extends ts{constructor(e,n,s){super(e,n,bc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new H(e))}withConverter(e){return new pn(this.firestore,e,this._path)}}function ue(t,e,...n){if(t=Ie(t),kg("collection","path",e),t instanceof Go){const s=ye.fromString(e,...n);return Wh(s),new pn(t,null,s)}{if(!(t instanceof st||t instanceof pn))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ye.fromString(e,...n));return Wh(s),new pn(t.firestore,null,s)}}function je(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=Sp.newId()),kg("doc","path",e),t instanceof Go){const s=ye.fromString(e,...n);return qh(s),new st(t,null,new H(s))}{if(!(t instanceof st||t instanceof pn))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ye.fromString(e,...n));return qh(s),new st(t.firestore,t instanceof pn?t.converter:null,new H(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ug(this,"async_queue_retry"),this.Vu=()=>{const s=La();s&&q("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=La();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=La();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Gt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ri(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(s=>{this.Eu=s,this.du=!1;const r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(s);throw Jt("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.du=!1,s))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=kc.createAndSchedule(this,e,n,s,i=>this.yu(i));return this.Tu.push(r),r}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ns extends Go{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Gh,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gh(e),this._firestoreClient=void 0,await e}}}function iE(t,e){const n=typeof t=="object"?t:nc(),s=typeof t=="string"?t:"(default)",r=ko(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Pf("firestore");i&&rE(r,...i)}return r}function Oc(t){if(t._terminated)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oE(t),t._firestoreClient}function oE(t){var e,n,s;const r=t._freezeSettings(),i=function(c,u,d,h){return new L_(c,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Pg(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new XI(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Os(qe.fromBase64String(e))}catch(n){throw new z(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Os(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=/^__.*__$/;class lE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new In(e,this.data,this.fieldMask,n,this.fieldTransforms):new ii(e,this.data,n,this.fieldTransforms)}}class Dg{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new In(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Vg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Qo{constructor(e,n,s,r,i,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:s,xu:!1});return r.Ou(e),r}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:s,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yo(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Vg(this.Cu)&&aE.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cE{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||zo(e)}Qu(e,n,s,r=!1){return new Qo({Cu:e,methodName:n,qu:s,path:$e.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jo(t){const e=t._freezeSettings(),n=zo(t._databaseId);return new cE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mg(t,e,n,s,r,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,r);$c("Data must be an object, but it was:",a,s);const c=Lg(s,a);let u,d;if(i.merge)u=new ut(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const g=Al(e,f,n);if(!a.contains(g))throw new z(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Ug(h,g)||h.push(g)}u=new ut(h),d=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=a.fieldTransforms;return new lE(new rt(c),u,d)}class Yo extends ci{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yo}}function Og(t,e,n){return new Qo({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Uc extends ci{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Og(this,e,!0),s=this.Ku.map(i=>ss(i,n)),r=new ks(s);return new Qp(e.path,r)}isEqual(e){return e instanceof Uc&&Ss(this.Ku,e.Ku)}}class Bc extends ci{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Og(this,e,!0),s=this.Ku.map(i=>ss(i,n)),r=new Ds(s);return new Qp(e.path,r)}isEqual(e){return e instanceof Bc&&Ss(this.Ku,e.Ku)}}function uE(t,e,n,s){const r=t.Qu(1,e,n);$c("Data must be an object, but it was:",r,s);const i=[],a=rt.empty();Zn(s,(u,d)=>{const h=zc(e,u,n);d=Ie(d);const f=r.Nu(h);if(d instanceof Yo)i.push(h);else{const g=ss(d,f);g!=null&&(i.push(h),a.set(h,g))}});const c=new ut(i);return new Dg(a,c,r.fieldTransforms)}function dE(t,e,n,s,r,i){const a=t.Qu(1,e,n),c=[Al(e,s,n)],u=[r];if(i.length%2!=0)throw new z(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(Al(e,i[g])),u.push(i[g+1]);const d=[],h=rt.empty();for(let g=c.length-1;g>=0;--g)if(!Ug(d,c[g])){const x=c[g];let w=u[g];w=Ie(w);const _=a.Nu(x);if(w instanceof Yo)d.push(x);else{const A=ss(w,_);A!=null&&(d.push(x),h.set(x,A))}}const f=new ut(d);return new Dg(h,f,a.fieldTransforms)}function hE(t,e,n,s=!1){return ss(n,t.Qu(s?4:3,e))}function ss(t,e){if(Fg(t=Ie(t)))return $c("Unsupported field value:",e,t),Lg(t,e);if(t instanceof ci)return function(s,r){if(!Vg(r.Cu))throw r.Bu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(s,r){const i=[];let a=0;for(const c of s){let u=ss(c,r.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Ie(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return oT(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Me.fromDate(s);return{timestampValue:fo(r.serializer,i)}}if(s instanceof Me){const i=new Me(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:fo(r.serializer,i)}}if(s instanceof Lc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Os)return{bytesValue:tg(r.serializer,s._byteString)};if(s instanceof st){const i=r.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ec(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Fc)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return wc(c.serializer,u)})}}}}}}(s,r);throw r.Bu(`Unsupported field value: ${Ho(s)}`)}(t,e)}function Lg(t,e){const n={};return jp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zn(t,(s,r)=>{const i=ss(r,e.Mu(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Fg(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof Lc||t instanceof Os||t instanceof st||t instanceof ci||t instanceof Fc)}function $c(t,e,n){if(!Fg(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Ho(n);throw s==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+s)}}function Al(t,e,n){if((e=Ie(e))instanceof Ko)return e._internalPath;if(typeof e=="string")return zc(t,e);throw yo("Field path arguments must be of type string or ",t,!1,void 0,n)}const mE=new RegExp("[~\\*/\\[\\]]");function zc(t,e,n){if(e.search(mE)>=0)throw yo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ko(...e.split("."))._internalPath}catch{throw yo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yo(t,e,n,s,r){const i=s&&!s.isEmpty(),a=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${s}`),a&&(u+=` in document ${r}`),u+=")"),new z(V.INVALID_ARGUMENT,c+t+u)}function Ug(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fE extends Bg{data(){return super.data()}}function Xo(t,e){return typeof e=="string"?zc(t,e):e instanceof Ko?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qc{}class $g extends qc{}function Zo(t,e,...n){let s=[];e instanceof qc&&s.push(e),s=s.concat(n),function(i){const a=i.filter(u=>u instanceof Wc).length,c=i.filter(u=>u instanceof ea).length;if(a>1||a>0&&c>0)throw new z(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class ea extends $g{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new ea(e,n,s)}_apply(e){const n=this._parse(e);return Wg(e._query,n),new ts(e.firestore,e.converter,yl(e._query,n))}_parse(e){const n=Jo(e.firestore);return function(i,a,c,u,d,h,f){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Qh(f,h);const x=[];for(const w of f)x.push(Kh(u,i,w));g={arrayValue:{values:x}}}else g=Kh(u,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Qh(f,h),g=hE(c,a,f,h==="in"||h==="not-in");return Ve.create(d,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zg(t,e,n){const s=e,r=Xo("where",t);return ea._create(r,s,n)}class Wc extends qc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wc(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Tt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const u of c)Wg(a,u),a=yl(a,u)}(e._query,n),new ts(e.firestore,e.converter,yl(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hc extends $g{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Hc(e,n)}_apply(e){const n=function(r,i,a){if(r.startAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ur(i,a)}(e._query,this._field,this._direction);return new ts(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new $s(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function qg(t,e="asc"){const n=e,s=Xo("orderBy",t);return Hc._create(s,n)}function Kh(t,e,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new z(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lp(e)&&n.indexOf("/")!==-1)throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ye.fromString(n));if(!H.isDocumentKey(s))throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return gh(t,new H(s))}if(n instanceof st)return gh(t,n._key);throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ho(n)}.`)}function Qh(t,e){if(!Array.isArray(t)||t.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wg(t,e){const n=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gE{convertValue(e,n="none"){switch(Kn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Zn(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(a=>Se(a.doubleValue));return new Fc(i)}convertGeoPoint(e){return new Lc(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=gc(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Or(e));default:return null}}convertTimestamp(e){const n=xn(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ye.fromString(e);he(ag(s));const r=new Lr(s.get(1),s.get(3)),i=new H(s.popFirst(5));return r.isEqual(n)||Jt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t,e,n){let s;return s=t?t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gg extends Bg{constructor(e,n,s,r,i,a){super(e,n,s,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ji(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Xo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Ji extends Gg{data(e={}){return super.data(e)}}class yE{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new xr(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ji(this._firestore,this._userDataWriter,s.key,s,new xr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{const u=new Ji(r._firestore,r._userDataWriter,c.doc.key,c.doc,new xr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Ji(r._firestore,r._userDataWriter,c.doc.key,c.doc,new xr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,h=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),h=a.indexOf(c.doc.key)),{type:xE(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xE(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){t=It(t,st);const e=It(t.firestore,ns);return tE(Oc(e),t._key).then(n=>bE(e,t,n))}class Kg extends gE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function Te(t){t=It(t,ts);const e=It(t.firestore,ns),n=Oc(e),s=new Kg(e);return pE(t._query),nE(n,t._query).then(r=>new yE(e,s,t,r))}function ht(t,e,n){t=It(t,st);const s=It(t.firestore,ns),r=Hg(t.converter,e);return ta(s,[Mg(Jo(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,yt.none())])}function ys(t,e,n,...s){t=It(t,st);const r=It(t.firestore,ns),i=Jo(r);let a;return a=typeof(e=Ie(e))=="string"||e instanceof Ko?dE(i,"updateDoc",t._key,e,n,s):uE(i,"updateDoc",t._key,e),ta(r,[a.toMutation(t._key,yt.exists(!0))])}function vE(t){return ta(It(t.firestore,ns),[new _c(t._key,yt.none())])}function Xt(t,e){const n=It(t.firestore,ns),s=je(t),r=Hg(t.converter,e);return ta(n,[Mg(Jo(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,yt.exists(!1))]).then(()=>s)}function ta(t,e){return function(s,r){const i=new Gt;return s.asyncQueue.enqueueAndForget(async()=>qI(await eE(s),r,i)),i.promise}(Oc(t),e)}function bE(t,e,n){const s=n.docs.get(e._key),r=new Kg(t);return new Gg(t,r,e._key,s,new xr(n.hasPendingWrites,n.fromCache),e.converter)}function Sl(...t){return new Uc("arrayUnion",t)}function Jh(...t){return new Bc("arrayRemove",t)}(function(e,n=!0){(function(r){Bs=r})(Yn),zn(new gn("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),c=new ns(new T_(s.getProvider("auth-internal")),new A_(s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lr(d.options.projectId,h)}(a,r),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),St(dh,"4.7.3",e),St(dh,"4.7.3","esm2017")})();var wE="firebase",_E="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */St(wE,_E,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="firebasestorage.googleapis.com",Jg="storageBucket",TE=2*60*1e3,IE=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne extends Lt{constructor(e,n,s=0){super(Ua(e),`Firebase Storage: ${n} (${Ua(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ne.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ua(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ee;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ee||(Ee={}));function Ua(t){return"storage/"+t}function Gc(){const t="An unknown error occurred, please check the error payload for server response.";return new Ne(Ee.UNKNOWN,t)}function EE(t){return new Ne(Ee.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function NE(t){return new Ne(Ee.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AE(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ne(Ee.UNAUTHENTICATED,t)}function SE(){return new Ne(Ee.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function jE(t){return new Ne(Ee.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function CE(){return new Ne(Ee.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RE(){return new Ne(Ee.CANCELED,"User canceled the upload/download.")}function PE(t){return new Ne(Ee.INVALID_URL,"Invalid URL '"+t+"'.")}function kE(t){return new Ne(Ee.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function DE(){return new Ne(Ee.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Jg+"' property when initializing the app?")}function VE(){return new Ne(Ee.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ME(){return new Ne(Ee.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function OE(t){return new Ne(Ee.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jl(t){return new Ne(Ee.INVALID_ARGUMENT,t)}function Yg(){return new Ne(Ee.APP_DELETED,"The Firebase app was deleted.")}function LE(t){return new Ne(Ee.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nr(t,e){return new Ne(Ee.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function dr(t){throw new Ne(Ee.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=dt.makeFromUrl(e,n)}catch{return new dt(e,"")}if(s.path==="")return s;throw kE(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+r+a,"i"),u={bucket:1,path:3};function d(M){M.path_=decodeURIComponent(M.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${f}/${h}/b/${r}/o${g}`,"i"),w={bucket:1,path:3},_=n===Qg?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",P=new RegExp(`^https?://${_}/${r}/${A}`,"i"),S=[{regex:c,indices:u,postModify:i},{regex:x,indices:w,postModify:d},{regex:P,indices:{bucket:1,path:2},postModify:d}];for(let M=0;M<S.length;M++){const B=S[M],O=B.regex.exec(e);if(O){const E=O[B.indices.bucket];let y=O[B.indices.path];y||(y=""),s=new dt(E,y),B.postModify(s);break}}if(s==null)throw PE(e);return s}}class FE{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t,e,n){let s=1,r=null,i=null,a=!1,c=0;function u(){return c===2}let d=!1;function h(...A){d||(d=!0,e.apply(null,A))}function f(A){r=setTimeout(()=>{r=null,t(x,u())},A)}function g(){i&&clearTimeout(i)}function x(A,...P){if(d){g();return}if(A){g(),h.call(null,A,...P);return}if(u()||a){g(),h.call(null,A,...P);return}s<64&&(s*=2);let S;c===1?(c=2,S=0):S=(s+Math.random())*1e3,f(S)}let w=!1;function _(A){w||(w=!0,g(),!d&&(r!==null?(A||(c=2),clearTimeout(r),f(0)):A||(c=1)))}return f(0),i=setTimeout(()=>{a=!0,_(!0)},n),_}function BE(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){return t!==void 0}function zE(t){return typeof t=="object"&&!Array.isArray(t)}function Kc(t){return typeof t=="string"||t instanceof String}function Yh(t){return Qc()&&t instanceof Blob}function Qc(){return typeof Blob<"u"}function Xh(t,e,n,s){if(s<e)throw jl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw jl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function Xg(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var Fn;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fn||(Fn={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n,s,r,i,a,c,u,d,h,f,g=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,w)=>{this.resolve_=x,this.reject_=w,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new Vi(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===Fn.NO_ERROR,u=i.getStatus();if(!c||qE(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Fn.ABORT;s(!1,new Vi(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;s(!0,new Vi(d,i))})},n=(s,r)=>{const i=this.resolve_,a=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());$E(u)?i(u):i()}catch(u){a(u)}else if(c!==null){const u=Gc();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(r.canceled){const u=this.appDelete_?Yg():RE();a(u)}else{const u=CE();a(u)}};this.canceled_?n(!1,new Vi(!1,null,!0)):this.backoffId_=UE(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BE(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vi{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function HE(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function GE(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KE(t,e){e&&(t["X-Firebase-GMPID"]=e)}function QE(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JE(t,e,n,s,r,i,a=!0){const c=Xg(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return KE(d,e),HE(d,n),GE(d,i),QE(d,s),new WE(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function XE(...t){const e=YE();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(Qc())return new Blob(t);throw new Ne(Ee.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ZE(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){if(typeof atob>"u")throw OE("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ba{constructor(e,n){this.data=e,this.contentType=n||null}}function tN(t,e){switch(t){case At.RAW:return new Ba(Zg(e));case At.BASE64:case At.BASE64URL:return new Ba(ey(t,e));case At.DATA_URL:return new Ba(sN(e),rN(e))}throw Gc()}function Zg(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,a=t.charCodeAt(++n);s=65536|(i&1023)<<10|a&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function nN(t){let e;try{e=decodeURIComponent(t)}catch{throw Nr(At.DATA_URL,"Malformed data URL.")}return Zg(e)}function ey(t,e){switch(t){case At.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Nr(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case At.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Nr(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=eN(e)}catch(r){throw r.message.includes("polyfill")?r:Nr(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class ty{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Nr(At.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=iN(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function sN(t){const e=new ty(t);return e.base64?ey(At.BASE64,e.rest):nN(e.rest)}function rN(t){return new ty(t).contentType}function iN(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){let s=0,r="";Yh(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Yh(this.data_)){const s=this.data_,r=ZE(s,e,n);return r===null?null:new dn(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new dn(s,!0)}}static getBlob(...e){if(Qc()){const n=e.map(s=>s instanceof dn?s.data_:s);return new dn(XE.apply(null,n))}else{const n=e.map(a=>Kc(a)?tN(At.RAW,a).data:a.data_);let s=0;n.forEach(a=>{s+=a.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)r[i++]=a[c]}),new dn(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){let e;try{e=JSON.parse(t)}catch{return null}return zE(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aN(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function sy(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t,e){return e}class tt{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||lN}}let Mi=null;function cN(t){return!Kc(t)||t.length<2?t:sy(t)}function ry(){if(Mi)return Mi;const t=[];t.push(new tt("bucket")),t.push(new tt("generation")),t.push(new tt("metageneration")),t.push(new tt("name","fullPath",!0));function e(i,a){return cN(a)}const n=new tt("name");n.xform=e,t.push(n);function s(i,a){return a!==void 0?Number(a):a}const r=new tt("size");return r.xform=s,t.push(r),t.push(new tt("timeCreated")),t.push(new tt("updated")),t.push(new tt("md5Hash",null,!0)),t.push(new tt("cacheControl",null,!0)),t.push(new tt("contentDisposition",null,!0)),t.push(new tt("contentEncoding",null,!0)),t.push(new tt("contentLanguage",null,!0)),t.push(new tt("contentType",null,!0)),t.push(new tt("metadata","customMetadata",!0)),Mi=t,Mi}function uN(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new dt(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function dN(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const a=n[i];s[a.local]=a.xform(s,e[a.server])}return uN(s,t),s}function iy(t,e,n){const s=ny(e);return s===null?null:dN(t,s,n)}function hN(t,e,n,s){const r=ny(e);if(r===null||!Kc(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,f=t.fullPath,g="/b/"+a(h)+"/o/"+a(f),x=Jc(g,n,s),w=Xg({alt:"media",token:d});return x+w})[0]}function mN(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class oy{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t){if(!t)throw Gc()}function fN(t,e){function n(s,r){const i=iy(t,r,e);return ay(i!==null),i}return n}function pN(t,e){function n(s,r){const i=iy(t,r,e);return ay(i!==null),hN(i,r,t.host,t._protocol)}return n}function ly(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=SE():r=AE():n.getStatus()===402?r=NE(t.bucket):n.getStatus()===403?r=jE(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function gN(t){const e=ly(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=EE(t.path)),i.serverResponse=r.serverResponse,i}return n}function yN(t,e,n){const s=e.fullServerUrl(),r=Jc(s,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new oy(r,i,pN(t,n),a);return c.errorHandler=gN(e),c}function xN(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function vN(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=xN(null,e)),s}function bN(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let S="";for(let M=0;M<2;M++)S=S+Math.random().toString().slice(2);return S}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const d=vN(e,s,r),h=mN(d,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",x=dn.getBlob(f,s,g);if(x===null)throw VE();const w={name:d.fullPath},_=Jc(i,t.host,t._protocol),A="POST",P=t.maxUploadRetryTime,k=new oy(_,A,fN(t,n),P);return k.urlParams=w,k.headers=a,k.body=x.uploadData(),k.errorHandler=ly(e),k}class wN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fn.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fn.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fn.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r){if(this.sent_)throw dr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _N extends wN{initXhr(){this.xhr_.responseType="text"}}function cy(){return new _N}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this._service=e,n instanceof dt?this._location=n:this._location=dt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qn(e,n)}get root(){const e=new dt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sy(this._location.path)}get storage(){return this._service}get parent(){const e=oN(this._location.path);if(e===null)return null;const n=new dt(this._location.bucket,e);return new Qn(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw LE(e)}}function TN(t,e,n){t._throwIfRoot("uploadBytes");const s=bN(t.storage,t._location,ry(),new dn(e,!0),n);return t.storage.makeRequestWithTokens(s,cy).then(r=>({metadata:r,ref:t}))}function IN(t){t._throwIfRoot("getDownloadURL");const e=yN(t.storage,t._location,ry());return t.storage.makeRequestWithTokens(e,cy).then(n=>{if(n===null)throw ME();return n})}function EN(t,e){const n=aN(t._location.path,e),s=new dt(t._location.bucket,n);return new Qn(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){return/^[A-Za-z]+:\/\//.test(t)}function AN(t,e){return new Qn(t,e)}function uy(t,e){if(t instanceof Yc){const n=t;if(n._bucket==null)throw DE();const s=new Qn(n,n._bucket);return e!=null?uy(s,e):s}else return e!==void 0?EN(t,e):t}function SN(t,e){if(e&&NN(e)){if(t instanceof Yc)return AN(t,e);throw jl("To use ref(service, url), the first argument must be a Storage instance.")}else return uy(t,e)}function Zh(t,e){const n=e==null?void 0:e[Jg];return n==null?null:dt.makeFromBucketSpec(n,t)}function jN(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=s;r&&(t._overrideAuthToken=typeof r=="string"?r:Vf(r,t.app.options.projectId))}class Yc{constructor(e,n,s,r,i){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Qg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=TE,this._maxUploadRetryTime=IE,this._requests=new Set,r!=null?this._bucket=dt.makeFromBucketSpec(r,this._host):this._bucket=Zh(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dt.makeFromBucketSpec(this._url,e):this._bucket=Zh(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qn(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new FE(Yg());{const a=JE(e,this._appId,s,r,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const em="@firebase/storage",tm="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="storage";function xo(t,e,n){return t=Ie(t),TN(t,e,n)}function vo(t){return t=Ie(t),IN(t)}function bo(t,e){return t=Ie(t),SN(t,e)}function CN(t=nc(),e){t=Ie(t);const s=ko(t,dy).getImmediate({identifier:e}),r=Pf("storage");return r&&RN(s,...r),s}function RN(t,e,n,s={}){jN(t,e,n,s)}function PN(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Yc(n,s,r,e,Yn)}function kN(){zn(new gn(dy,PN,"PUBLIC").setMultipleInstances(!0)),St(em,tm,""),St(em,tm,"esm2017")}kN();const DN={apiKey:"AIzaSyDxHpDLydjUJz47oTbia028hM3nTOjImF8",authDomain:"jazbaa-4-0.firebaseapp.com",projectId:"jazbaa-4-0",storageBucket:"jazbaa-4-0.firebasestorage.app",messagingSenderId:"904553931845",appId:"1:904553931845:web:8a0532c0359ac2e5b8af2c"},Xc=Lf(DN),it=v_(Xc),G=iE(Xc),Br=CN(Xc),VN=Object.freeze(Object.defineProperty({__proto__:null,auth:it,db:G,storage:Br},Symbol.toStringTag,{value:"Module"})),hy=C.createContext(void 0),mt=()=>{const t=C.useContext(hy);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},MN=({children:t})=>{const[e,n]=C.useState(null),[s,r]=C.useState(!0);C.useEffect(()=>lw(it,async h=>{if(h)try{const f=await Ot(je(G,"users",h.uid));f.exists()?n({uid:h.uid,email:h.email,...f.data()}):(console.error("User data not found in Firestore"),n(null))}catch(f){console.error("Error fetching user data:",f),n(null)}else n(null);r(!1)}),[]);const u={currentUser:e,loading:s,login:async(d,h)=>{await uc(it,d,h)},register:async(d,h,f,g,x)=>{const{user:w}=await Vr(it,d,h),_={uid:w.uid,email:w.email,role:f,...g&&{collegeId:g},...x&&{investorId:x}};await ht(je(G,"users",w.uid),_)},logout:async()=>{await oo(it)}};return o.jsx(hy.Provider,{value:u,children:t})},Zc=C.createContext({});function eu(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const tu=typeof window<"u",my=tu?C.useLayoutEffect:C.useEffect,na=C.createContext(null);function nu(t,e){t.indexOf(e)===-1&&t.push(e)}function su(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Zt=(t,e,n)=>n>e?e:n<t?t:n;let wo=()=>{};const en={},fy=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function py(t){return typeof t=="object"&&t!==null}const gy=t=>/^0[^.\s]+$/u.test(t);function ru(t){let e;return()=>(e===void 0&&(e=t()),e)}const xt=t=>t,ON=(t,e)=>n=>e(t(n)),ui=(...t)=>t.reduce(ON),$r=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class iu{constructor(){this.subscriptions=[]}add(e){return nu(this.subscriptions,e),()=>su(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const kt=t=>t*1e3,Dt=t=>t/1e3;function yy(t,e){return e?t*(1e3/e):0}const xy=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,LN=1e-7,FN=12;function UN(t,e,n,s,r){let i,a,c=0;do a=e+(n-e)/2,i=xy(a,s,r)-t,i>0?n=a:e=a;while(Math.abs(i)>LN&&++c<FN);return a}function di(t,e,n,s){if(t===e&&n===s)return xt;const r=i=>UN(i,0,1,t,n);return i=>i===0||i===1?i:xy(r(i),e,s)}const vy=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,by=t=>e=>1-t(1-e),wy=di(.33,1.53,.69,.99),ou=by(wy),_y=vy(ou),Ty=t=>(t*=2)<1?.5*ou(t):.5*(2-Math.pow(2,-10*(t-1))),au=t=>1-Math.sin(Math.acos(t)),Iy=by(au),Ey=vy(au),BN=di(.42,0,1,1),$N=di(0,0,.58,1),Ny=di(.42,0,.58,1),zN=t=>Array.isArray(t)&&typeof t[0]!="number",Ay=t=>Array.isArray(t)&&typeof t[0]=="number",nm={linear:xt,easeIn:BN,easeInOut:Ny,easeOut:$N,circIn:au,circInOut:Ey,circOut:Iy,backIn:ou,backInOut:_y,backOut:wy,anticipate:Ty},qN=t=>typeof t=="string",sm=t=>{if(Ay(t)){wo(t.length===4);const[e,n,s,r]=t;return di(e,n,s,r)}else if(qN(t))return wo(nm[t]!==void 0),nm[t];return t},Oi=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],rm={value:null,addProjectionMetrics:null};function WN(t,e){let n=new Set,s=new Set,r=!1,i=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},u=0;function d(f){a.has(f)&&(h.schedule(f),t()),u++,f(c)}const h={schedule:(f,g=!1,x=!1)=>{const _=x&&r?n:s;return g&&a.add(f),_.has(f)||_.add(f),f},cancel:f=>{s.delete(f),a.delete(f)},process:f=>{if(c=f,r){i=!0;return}r=!0,[n,s]=[s,n],n.forEach(d),e&&rm.value&&rm.value.frameloop[e].push(u),u=0,n.clear(),r=!1,i&&(i=!1,h.process(f))}};return h}const HN=40;function Sy(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=Oi.reduce((S,M)=>(S[M]=WN(i,e?M:void 0),S),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:f,preRender:g,render:x,postRender:w}=a,_=()=>{const S=en.useManualTiming?r.timestamp:performance.now();n=!1,en.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(S-r.timestamp,HN),1)),r.timestamp=S,r.isProcessing=!0,c.process(r),u.process(r),d.process(r),h.process(r),f.process(r),g.process(r),x.process(r),w.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(_))},A=()=>{n=!0,s=!0,r.isProcessing||t(_)};return{schedule:Oi.reduce((S,M)=>{const B=a[M];return S[M]=(O,E=!1,y=!1)=>(n||A(),B.schedule(O,E,y)),S},{}),cancel:S=>{for(let M=0;M<Oi.length;M++)a[Oi[M]].cancel(S)},state:r,steps:a}}const{schedule:xe,cancel:bn,state:Ue,steps:$a}=Sy(typeof requestAnimationFrame<"u"?requestAnimationFrame:xt,!0);let Yi;function GN(){Yi=void 0}const ot={now:()=>(Yi===void 0&&ot.set(Ue.isProcessing||en.useManualTiming?Ue.timestamp:performance.now()),Yi),set:t=>{Yi=t,queueMicrotask(GN)}},jy=t=>e=>typeof e=="string"&&e.startsWith(t),lu=jy("--"),KN=jy("var(--"),cu=t=>KN(t)?QN.test(t.split("/*")[0].trim()):!1,QN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ws={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},zr={...Ws,transform:t=>Zt(0,1,t)},Li={...Ws,default:1},Ar=t=>Math.round(t*1e5)/1e5,uu=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function JN(t){return t==null}const YN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,du=(t,e)=>n=>!!(typeof n=="string"&&YN.test(n)&&n.startsWith(t)||e&&!JN(n)&&Object.prototype.hasOwnProperty.call(n,e)),Cy=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,i,a,c]=s.match(uu);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},XN=t=>Zt(0,255,t),za={...Ws,transform:t=>Math.round(XN(t))},Mn={test:du("rgb","red"),parse:Cy("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+za.transform(t)+", "+za.transform(e)+", "+za.transform(n)+", "+Ar(zr.transform(s))+")"};function ZN(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const Cl={test:du("#"),parse:ZN,transform:Mn.transform},hi=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),on=hi("deg"),Vt=hi("%"),Q=hi("px"),eA=hi("vh"),tA=hi("vw"),im={...Vt,parse:t=>Vt.parse(t)/100,transform:t=>Vt.transform(t*100)},xs={test:du("hsl","hue"),parse:Cy("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Vt.transform(Ar(e))+", "+Vt.transform(Ar(n))+", "+Ar(zr.transform(s))+")"},De={test:t=>Mn.test(t)||Cl.test(t)||xs.test(t),parse:t=>Mn.test(t)?Mn.parse(t):xs.test(t)?xs.parse(t):Cl.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Mn.transform(t):xs.transform(t),getAnimatableNone:t=>{const e=De.parse(t);return e.alpha=0,De.transform(e)}},nA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sA(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(uu))==null?void 0:e.length)||0)+(((n=t.match(nA))==null?void 0:n.length)||0)>0}const Ry="number",Py="color",rA="var",iA="var(",om="${}",oA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qr(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const c=e.replace(oA,u=>(De.test(u)?(s.color.push(i),r.push(Py),n.push(De.parse(u))):u.startsWith(iA)?(s.var.push(i),r.push(rA),n.push(u)):(s.number.push(i),r.push(Ry),n.push(parseFloat(u))),++i,om)).split(om);return{values:n,split:c,indexes:s,types:r}}function ky(t){return qr(t).values}function Dy(t){const{split:e,types:n}=qr(t),s=e.length;return r=>{let i="";for(let a=0;a<s;a++)if(i+=e[a],r[a]!==void 0){const c=n[a];c===Ry?i+=Ar(r[a]):c===Py?i+=De.transform(r[a]):i+=r[a]}return i}}const aA=t=>typeof t=="number"?0:De.test(t)?De.getAnimatableNone(t):t;function lA(t){const e=ky(t);return Dy(t)(e.map(aA))}const wn={test:sA,parse:ky,createTransformer:Dy,getAnimatableNone:lA};function qa(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function cA({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,a=0;if(!e)r=i=a=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;r=qa(u,c,t+1/3),i=qa(u,c,t),a=qa(u,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}function _o(t,e){return n=>n>0?e:t}const ve=(t,e,n)=>t+(e-t)*n,Wa=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},uA=[Cl,Mn,xs],dA=t=>uA.find(e=>e.test(t));function am(t){const e=dA(t);if(!e)return!1;let n=e.parse(t);return e===xs&&(n=cA(n)),n}const lm=(t,e)=>{const n=am(t),s=am(e);if(!n||!s)return _o(t,e);const r={...n};return i=>(r.red=Wa(n.red,s.red,i),r.green=Wa(n.green,s.green,i),r.blue=Wa(n.blue,s.blue,i),r.alpha=ve(n.alpha,s.alpha,i),Mn.transform(r))},Rl=new Set(["none","hidden"]);function hA(t,e){return Rl.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mA(t,e){return n=>ve(t,e,n)}function hu(t){return typeof t=="number"?mA:typeof t=="string"?cu(t)?_o:De.test(t)?lm:gA:Array.isArray(t)?Vy:typeof t=="object"?De.test(t)?lm:fA:_o}function Vy(t,e){const n=[...t],s=n.length,r=t.map((i,a)=>hu(i)(i,e[a]));return i=>{for(let a=0;a<s;a++)n[a]=r[a](i);return n}}function fA(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=hu(t[r])(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}}function pA(t,e){const n=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],a=t.indexes[i][s[i]],c=t.values[a]??0;n[r]=c,s[i]++}return n}const gA=(t,e)=>{const n=wn.createTransformer(e),s=qr(t),r=qr(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?Rl.has(t)&&!r.values.length||Rl.has(e)&&!s.values.length?hA(t,e):ui(Vy(pA(s,r),r.values),n):_o(t,e)};function My(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ve(t,e,n):hu(t)(t,e)}const yA=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>xe.update(e,n),stop:()=>bn(e),now:()=>Ue.isProcessing?Ue.timestamp:ot.now()}},Oy=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let i=0;i<r;i++)s+=Math.round(t(i/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},To=2e4;function mu(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<To;)e+=n,s=t.next(e);return e>=To?1/0:e}function xA(t,e=100,n){const s=n({...t,keyframes:[0,e]}),r=Math.min(mu(s),To);return{type:"keyframes",ease:i=>s.next(r*i).value/e,duration:Dt(r)}}const vA=5;function Ly(t,e,n){const s=Math.max(e-vA,0);return yy(n-t(s),e-s)}const _e={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ha=.001;function bA({duration:t=_e.duration,bounce:e=_e.bounce,velocity:n=_e.velocity,mass:s=_e.mass}){let r,i,a=1-e;a=Zt(_e.minDamping,_e.maxDamping,a),t=Zt(_e.minDuration,_e.maxDuration,Dt(t)),a<1?(r=d=>{const h=d*a,f=h*t,g=h-n,x=Pl(d,a),w=Math.exp(-f);return Ha-g/x*w},i=d=>{const f=d*a*t,g=f*n+n,x=Math.pow(a,2)*Math.pow(d,2)*t,w=Math.exp(-f),_=Pl(Math.pow(d,2),a);return(-r(d)+Ha>0?-1:1)*((g-x)*w)/_}):(r=d=>{const h=Math.exp(-d*t),f=(d-n)*t+1;return-Ha+h*f},i=d=>{const h=Math.exp(-d*t),f=(n-d)*(t*t);return h*f});const c=5/t,u=_A(r,i,c);if(t=kt(t),isNaN(u))return{stiffness:_e.stiffness,damping:_e.damping,duration:t};{const d=Math.pow(u,2)*s;return{stiffness:d,damping:a*2*Math.sqrt(s*d),duration:t}}}const wA=12;function _A(t,e,n){let s=n;for(let r=1;r<wA;r++)s=s-t(s)/e(s);return s}function Pl(t,e){return t*Math.sqrt(1-e*e)}const TA=["duration","bounce"],IA=["stiffness","damping","mass"];function cm(t,e){return e.some(n=>t[n]!==void 0)}function EA(t){let e={velocity:_e.velocity,stiffness:_e.stiffness,damping:_e.damping,mass:_e.mass,isResolvedFromDuration:!1,...t};if(!cm(t,IA)&&cm(t,TA))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,i=2*Zt(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:_e.mass,stiffness:r,damping:i}}else{const n=bA(t);e={...e,...n,mass:_e.mass},e.isResolvedFromDuration=!0}return e}function Io(t=_e.visualDuration,e=_e.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],c={done:!1,value:i},{stiffness:u,damping:d,mass:h,duration:f,velocity:g,isResolvedFromDuration:x}=EA({...n,velocity:-Dt(n.velocity||0)}),w=g||0,_=d/(2*Math.sqrt(u*h)),A=a-i,P=Dt(Math.sqrt(u/h)),k=Math.abs(A)<5;s||(s=k?_e.restSpeed.granular:_e.restSpeed.default),r||(r=k?_e.restDelta.granular:_e.restDelta.default);let S;if(_<1){const B=Pl(P,_);S=O=>{const E=Math.exp(-_*P*O);return a-E*((w+_*P*A)/B*Math.sin(B*O)+A*Math.cos(B*O))}}else if(_===1)S=B=>a-Math.exp(-P*B)*(A+(w+P*A)*B);else{const B=P*Math.sqrt(_*_-1);S=O=>{const E=Math.exp(-_*P*O),y=Math.min(B*O,300);return a-E*((w+_*P*A)*Math.sinh(y)+B*A*Math.cosh(y))/B}}const M={calculatedDuration:x&&f||null,next:B=>{const O=S(B);if(x)c.done=B>=f;else{let E=B===0?w:0;_<1&&(E=B===0?kt(w):Ly(S,B,O));const y=Math.abs(E)<=s,b=Math.abs(a-O)<=r;c.done=y&&b}return c.value=c.done?a:O,c},toString:()=>{const B=Math.min(mu(M),To),O=Oy(E=>M.next(B*E).value,B,30);return B+"ms "+O},toTransition:()=>{}};return M}Io.applyToOptions=t=>{const e=xA(t,100,Io);return t.ease=e.ease,t.duration=kt(e.duration),t.type="keyframes",t};function kl({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:c,max:u,restDelta:d=.5,restSpeed:h}){const f=t[0],g={done:!1,value:f},x=y=>c!==void 0&&y<c||u!==void 0&&y>u,w=y=>c===void 0?u:u===void 0||Math.abs(c-y)<Math.abs(u-y)?c:u;let _=n*e;const A=f+_,P=a===void 0?A:a(A);P!==A&&(_=P-f);const k=y=>-_*Math.exp(-y/s),S=y=>P+k(y),M=y=>{const b=k(y),T=S(y);g.done=Math.abs(b)<=d,g.value=g.done?P:T};let B,O;const E=y=>{x(g.value)&&(B=y,O=Io({keyframes:[g.value,w(g.value)],velocity:Ly(S,y,g.value),damping:r,stiffness:i,restDelta:d,restSpeed:h}))};return E(0),{calculatedDuration:null,next:y=>{let b=!1;return!O&&B===void 0&&(b=!0,M(y),E(y)),B!==void 0&&y>=B?O.next(y-B):(!b&&M(y),g)}}}function NA(t,e,n){const s=[],r=n||en.mix||My,i=t.length-1;for(let a=0;a<i;a++){let c=r(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||xt:e;c=ui(u,c)}s.push(c)}return s}function AA(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(wo(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=NA(e,s,r),u=c.length,d=h=>{if(a&&h<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const g=$r(t[f],t[f+1],h);return c[f](g)};return n?h=>d(Zt(t[0],t[i-1],h)):d}function SA(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=$r(0,e,s);t.push(ve(n,1,r))}}function jA(t){const e=[0];return SA(e,t.length-1),e}function CA(t,e){return t.map(n=>n*e)}function RA(t,e){return t.map(()=>e||Ny).splice(0,t.length-1)}function Sr({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=zN(s)?s.map(sm):sm(s),i={done:!1,value:e[0]},a=CA(n&&n.length===e.length?n:jA(e),t),c=AA(a,e,{ease:Array.isArray(r)?r:RA(e,r)});return{calculatedDuration:t,next:u=>(i.value=c(u),i.done=u>=t,i)}}const PA=t=>t!==null;function fu(t,{repeat:e,repeatType:n="loop"},s,r=1){const i=t.filter(PA),c=r<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!c||s===void 0?i[c]:s}const kA={decay:kl,inertia:kl,tween:Sr,keyframes:Sr,spring:Io};function Fy(t){typeof t.type=="string"&&(t.type=kA[t.type])}class pu{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const DA=t=>t/100;class gu extends pu{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,r;const{motionValue:n}=this.options;n&&n.updatedAt!==ot.now()&&this.tick(ot.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(s=this.options).onStop)==null||r.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Fy(e);const{type:n=Sr,repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=e;let{keyframes:c}=e;const u=n||Sr;u!==Sr&&typeof c[0]!="number"&&(this.mixKeyframes=ui(DA,My(c[0],c[1])),c=[0,100]);const d=u({...e,keyframes:c});i==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=mu(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:r,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return s.next(0);const{delay:d=0,keyframes:h,repeat:f,repeatType:g,repeatDelay:x,type:w,onUpdate:_,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const P=this.currentTime-d*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?P<0:P>r;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let S=this.currentTime,M=s;if(f){const y=Math.min(this.currentTime,r)/c;let b=Math.floor(y),T=y%1;!T&&y>=1&&(T=1),T===1&&b--,b=Math.min(b,f+1),!!(b%2)&&(g==="reverse"?(T=1-T,x&&(T-=x/c)):g==="mirror"&&(M=a)),S=Zt(0,1,T)*c}const B=k?{done:!1,value:h[0]}:M.next(S);i&&(B.value=i(B.value));let{done:O}=B;!k&&u!==null&&(O=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return E&&w!==kl&&(B.value=fu(h,this.options,A,this.speed)),_&&_(B.value),E&&this.finish(),B}then(e,n){return this.finished.then(e,n)}get duration(){return Dt(this.calculatedDuration)}get time(){return Dt(this.currentTime)}set time(e){var n;e=kt(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ot.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Dt(this.currentTime))}play(){var r,i;if(this.isStopped)return;const{driver:e=yA,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(i=(r=this.options).onPlay)==null||i.call(r);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ot.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function VA(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const On=t=>t*180/Math.PI,Dl=t=>{const e=On(Math.atan2(t[1],t[0]));return Vl(e)},MA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Dl,rotateZ:Dl,skewX:t=>On(Math.atan(t[1])),skewY:t=>On(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Vl=t=>(t=t%360,t<0&&(t+=360),t),um=Dl,dm=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),hm=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),OA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:dm,scaleY:hm,scale:t=>(dm(t)+hm(t))/2,rotateX:t=>Vl(On(Math.atan2(t[6],t[5]))),rotateY:t=>Vl(On(Math.atan2(-t[2],t[0]))),rotateZ:um,rotate:um,skewX:t=>On(Math.atan(t[4])),skewY:t=>On(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ml(t){return t.includes("scale")?1:0}function Ol(t,e){if(!t||t==="none")return Ml(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(n)s=OA,r=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=MA,r=c}if(!r)return Ml(e);const i=s[e],a=r[1].split(",").map(FA);return typeof i=="function"?i(a):a[i]}const LA=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ol(n,e)};function FA(t){return parseFloat(t.trim())}const Hs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gs=new Set(Hs),mm=t=>t===Ws||t===Q,UA=new Set(["x","y","z"]),BA=Hs.filter(t=>!UA.has(t));function $A(t){const e=[];return BA.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Un={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ol(e,"x"),y:(t,{transform:e})=>Ol(e,"y")};Un.translateX=Un.x;Un.translateY=Un.y;const Bn=new Set;let Ll=!1,Fl=!1,Ul=!1;function Uy(){if(Fl){const t=Array.from(Bn).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=$A(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([i,a])=>{var c;(c=s.getValue(i))==null||c.set(a)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Fl=!1,Ll=!1,Bn.forEach(t=>t.complete(Ul)),Bn.clear()}function By(){Bn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Fl=!0)})}function zA(){Ul=!0,By(),Uy(),Ul=!1}class yu{constructor(e,n,s,r,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Bn.add(this),Ll||(Ll=!0,xe.read(By),xe.resolveKeyframes(Uy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;if(e[0]===null){const i=r==null?void 0:r.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&n){const c=s.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),r&&i===void 0&&r.set(e[0])}VA(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Bn.delete(this)}cancel(){this.state==="scheduled"&&(Bn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const qA=t=>t.startsWith("--");function WA(t,e,n){qA(e)?t.style.setProperty(e,n):t.style[e]=n}const HA=ru(()=>window.ScrollTimeline!==void 0),GA={};function KA(t,e){const n=ru(t);return()=>GA[e]??n()}const $y=KA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vr=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,fm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vr([0,.65,.55,1]),circOut:vr([.55,0,1,.45]),backIn:vr([.31,.01,.66,-.59]),backOut:vr([.33,1.53,.69,.99])};function zy(t,e){if(t)return typeof t=="function"?$y()?Oy(t,e):"ease-out":Ay(t)?vr(t):Array.isArray(t)?t.map(n=>zy(n,e)||fm.easeOut):fm[t]}function QA(t,e,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:a="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[e]:n};u&&(h.offset=u);const f=zy(c,r);Array.isArray(f)&&(h.easing=f);const g={delay:s,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),t.animate(h,g)}function qy(t){return typeof t=="function"&&"applyToOptions"in t}function JA({type:t,...e}){return qy(t)&&$y()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class YA extends pu{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:r,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,wo(typeof e.type!="string");const d=JA(e);this.animation=QA(n,s,r,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=fu(r,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):WA(n,s,h),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return Dt(Number(e))}get time(){return Dt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=kt(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&HA()?(this.animation.timeline=e,xt):n(this)}}const Wy={anticipate:Ty,backInOut:_y,circInOut:Ey};function XA(t){return t in Wy}function ZA(t){typeof t.ease=="string"&&XA(t.ease)&&(t.ease=Wy[t.ease])}const pm=10;class e1 extends YA{constructor(e){ZA(e),Fy(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:r,element:i,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new gu({...a,autoplay:!1}),u=kt(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-pm).value,c.sample(u).value,pm),c.stop()}}const gm=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wn.test(t)||t==="0")&&!t.startsWith("url("));function t1(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function n1(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=gm(r,e),c=gm(i,e);return!a||!c?!1:t1(t)||(n==="spring"||qy(n))&&s}function Bl(t){t.duration=0,t.type}const s1=new Set(["opacity","clipPath","filter","transform"]),r1=ru(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function i1(t){var h;const{motionValue:e,name:n,repeatDelay:s,repeatType:r,damping:i,type:a}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return r1()&&n&&s1.has(n)&&(n!=="transform"||!d)&&!u&&!s&&r!=="mirror"&&i!==0&&a!=="inertia"}const o1=40;class a1 extends pu{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",keyframes:c,name:u,motionValue:d,element:h,...f}){var w;super(),this.stop=()=>{var _,A;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=ot.now();const g={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:i,repeatType:a,name:u,motionValue:d,element:h,...f},x=(h==null?void 0:h.KeyframeResolver)||yu;this.keyframeResolver=new x(c,(_,A,P)=>this.onKeyframesResolved(_,A,g,!P),u,d,h),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,s,r){this.keyframeResolver=void 0;const{name:i,type:a,velocity:c,delay:u,isHandoff:d,onUpdate:h}=s;this.resolvedAt=ot.now(),n1(e,i,a,c)||((en.instantAnimations||!u)&&(h==null||h(fu(e,s,n))),e[0]=e[e.length-1],Bl(s),s.repeat=0);const g={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>o1?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},x=!d&&i1(g)?new e1({...g,element:g.motionValue.owner.current}):new gu(g);x.finished.then(()=>this.notifyFinished()).catch(xt),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),zA()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const l1=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function c1(t){const e=l1.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function Hy(t,e,n=1){const[s,r]=c1(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const a=i.trim();return fy(a)?parseFloat(a):a}return cu(r)?Hy(r,e,n+1):r}function xu(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Gy=new Set(["width","height","top","left","right","bottom",...Hs]),u1={test:t=>t==="auto",parse:t=>t},Ky=t=>e=>e.test(t),Qy=[Ws,Q,Vt,on,tA,eA,u1],ym=t=>Qy.find(Ky(t));function d1(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gy(t):!0}const h1=new Set(["brightness","contrast","saturate","opacity"]);function m1(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(uu)||[];if(!s)return t;const r=n.replace(s,"");let i=h1.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const f1=/\b([a-z-]*)\(.*?\)/gu,$l={...wn,getAnimatableNone:t=>{const e=t.match(f1);return e?e.map(m1).join(" "):t}},xm={...Ws,transform:Math.round},p1={rotate:on,rotateX:on,rotateY:on,rotateZ:on,scale:Li,scaleX:Li,scaleY:Li,scaleZ:Li,skew:on,skewX:on,skewY:on,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:zr,originX:im,originY:im,originZ:Q},vu={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,backgroundPositionX:Q,backgroundPositionY:Q,...p1,zIndex:xm,fillOpacity:zr,strokeOpacity:zr,numOctaves:xm},g1={...vu,color:De,backgroundColor:De,outlineColor:De,fill:De,stroke:De,borderColor:De,borderTopColor:De,borderRightColor:De,borderBottomColor:De,borderLeftColor:De,filter:$l,WebkitFilter:$l},Jy=t=>g1[t];function Yy(t,e){let n=Jy(t);return n!==$l&&(n=wn),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const y1=new Set(["auto","none","0"]);function x1(t,e,n){let s=0,r;for(;s<t.length&&!r;){const i=t[s];typeof i=="string"&&!y1.has(i)&&qr(i).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=Yy(n,r)}class v1 extends yu{constructor(e,n,s,r,i){super(e,n,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),cu(d))){const h=Hy(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Gy.has(s)||e.length!==2)return;const[r,i]=e,a=ym(r),c=ym(i);if(a!==c)if(mm(a)&&mm(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else Un[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)(e[r]===null||d1(e[r]))&&s.push(r);s.length&&x1(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Un[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){var c;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const i=s.length-1,a=s[i];s[i]=Un[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function b1(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const r=document.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const Xy=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Zy(t){return py(t)&&"offsetHeight"in t}const vm=30,w1=t=>!isNaN(parseFloat(t));class _1{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var i;const r=ot.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ot.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=w1(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new iu);const s=this.events[e].add(n);return e==="change"?()=>{s(),xe.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ot.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vm)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vm);return yy(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ls(t,e){return new _1(t,e)}const{schedule:bu,cancel:kR}=Sy(queueMicrotask,!1),wt={x:!1,y:!1};function ex(){return wt.x||wt.y}function T1(t){return t==="x"||t==="y"?wt[t]?null:(wt[t]=!0,()=>{wt[t]=!1}):wt.x||wt.y?null:(wt.x=wt.y=!0,()=>{wt.x=wt.y=!1})}function tx(t,e){const n=b1(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function bm(t){return!(t.pointerType==="touch"||ex())}function I1(t,e,n={}){const[s,r,i]=tx(t,n),a=c=>{if(!bm(c))return;const{target:u}=c,d=e(u,c);if(typeof d!="function"||!u)return;const h=f=>{bm(f)&&(d(f),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,r)};return s.forEach(c=>{c.addEventListener("pointerenter",a,r)}),i}const nx=(t,e)=>e?t===e?!0:nx(t,e.parentElement):!1,wu=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,E1=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function N1(t){return E1.has(t.tagName)||t.tabIndex!==-1}const Xi=new WeakSet;function wm(t){return e=>{e.key==="Enter"&&t(e)}}function Ga(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const A1=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=wm(()=>{if(Xi.has(n))return;Ga(n,"down");const r=wm(()=>{Ga(n,"up")}),i=()=>Ga(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function _m(t){return wu(t)&&!ex()}function S1(t,e,n={}){const[s,r,i]=tx(t,n),a=c=>{const u=c.currentTarget;if(!_m(c))return;Xi.add(u);const d=e(u,c),h=(x,w)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),Xi.has(u)&&Xi.delete(u),_m(x)&&typeof d=="function"&&d(x,{success:w})},f=x=>{h(x,u===window||u===document||n.useGlobalTarget||nx(u,x.target))},g=x=>{h(x,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",g,r)};return s.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",a,r),Zy(c)&&(c.addEventListener("focus",d=>A1(d,r)),!N1(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function sx(t){return py(t)&&"ownerSVGElement"in t}function j1(t){return sx(t)&&t.tagName==="svg"}const Ye=t=>!!(t&&t.getVelocity),C1=[...Qy,De,wn],R1=t=>C1.find(Ky(t)),_u=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class P1 extends C.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,r=Zy(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function k1({children:t,isPresent:e,anchorX:n,root:s}){const r=C.useId(),i=C.useRef(null),a=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=C.useContext(_u);return C.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:g}=a.current;if(e||!i.current||!u||!d)return;const x=n==="left"?`left: ${f}`:`right: ${g}`;i.current.dataset.motionPopId=r;const w=document.createElement("style");c&&(w.nonce=c);const _=s??document.head;return _.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{_.contains(w)&&_.removeChild(w)}},[e]),o.jsx(P1,{isPresent:e,childRef:i,sizeRef:a,children:C.cloneElement(t,{ref:i})})}const D1=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a,anchorX:c,root:u})=>{const d=eu(V1),h=C.useId();let f=!0,g=C.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:r,onExitComplete:x=>{d.set(x,!0);for(const w of d.values())if(!w)return;s&&s()},register:x=>(d.set(x,!1),()=>d.delete(x))}),[n,d,s]);return i&&f&&(g={...g}),C.useMemo(()=>{d.forEach((x,w)=>d.set(w,!1))},[n]),C.useEffect(()=>{!n&&!d.size&&s&&s()},[n]),a==="popLayout"&&(t=o.jsx(k1,{isPresent:n,anchorX:c,root:u,children:t})),o.jsx(na.Provider,{value:g,children:t})};function V1(){return new Map}function rx(t=!0){const e=C.useContext(na);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,i=C.useId();C.useEffect(()=>{if(t)return r(i)},[t]);const a=C.useCallback(()=>t&&s&&s(i),[i,s,t]);return!n&&s?[!1,a]:[!0]}const Fi=t=>t.key||"";function Tm(t){const e=[];return C.Children.forEach(t,n=>{C.isValidElement(n)&&e.push(n)}),e}const ix=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:a=!1,anchorX:c="left",root:u})=>{const[d,h]=rx(a),f=C.useMemo(()=>Tm(t),[t]),g=a&&!d?[]:f.map(Fi),x=C.useRef(!0),w=C.useRef(f),_=eu(()=>new Map),[A,P]=C.useState(f),[k,S]=C.useState(f);my(()=>{x.current=!1,w.current=f;for(let O=0;O<k.length;O++){const E=Fi(k[O]);g.includes(E)?_.delete(E):_.get(E)!==!0&&_.set(E,!1)}},[k,g.length,g.join("-")]);const M=[];if(f!==A){let O=[...f];for(let E=0;E<k.length;E++){const y=k[E],b=Fi(y);g.includes(b)||(O.splice(E,0,y),M.push(y))}return i==="wait"&&M.length&&(O=M),S(Tm(O)),P(f),null}const{forceRender:B}=C.useContext(Zc);return o.jsx(o.Fragment,{children:k.map(O=>{const E=Fi(O),y=a&&!d?!1:f===k||g.includes(E),b=()=>{if(_.has(E))_.set(E,!0);else return;let T=!0;_.forEach(N=>{N||(T=!1)}),T&&(B==null||B(),S(w.current),a&&(h==null||h()),s&&s())};return o.jsx(D1,{isPresent:y,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:i,root:u,onExitComplete:y?void 0:b,anchorX:c,children:O},E)})})},ox=C.createContext({strict:!1}),Im={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fs={};for(const t in Im)Fs[t]={isEnabled:e=>Im[t].some(n=>!!e[n])};function M1(t){for(const e in t)Fs[e]={...Fs[e],...t[e]}}const O1=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Eo(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||O1.has(t)}let ax=t=>!Eo(t);function L1(t){typeof t=="function"&&(ax=e=>e.startsWith("on")?!Eo(e):t(e))}try{L1(require("@emotion/is-prop-valid").default)}catch{}function F1(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(ax(r)||n===!0&&Eo(r)||!e&&!Eo(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}const sa=C.createContext({});function ra(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Wr(t){return typeof t=="string"||Array.isArray(t)}const Tu=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Iu=["initial",...Tu];function ia(t){return ra(t.animate)||Iu.some(e=>Wr(t[e]))}function lx(t){return!!(ia(t)||t.variants)}function U1(t,e){if(ia(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Wr(n)?n:void 0,animate:Wr(s)?s:void 0}}return t.inherit!==!1?e:{}}function B1(t){const{initial:e,animate:n}=U1(t,C.useContext(sa));return C.useMemo(()=>({initial:e,animate:n}),[Em(e),Em(n)])}function Em(t){return Array.isArray(t)?t.join(" "):t}const Hr={};function $1(t){for(const e in t)Hr[e]=t[e],lu(e)&&(Hr[e].isCSSVariable=!0)}function cx(t,{layout:e,layoutId:n}){return Gs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Hr[t]||t==="opacity")}const z1={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},q1=Hs.length;function W1(t,e,n){let s="",r=!0;for(let i=0;i<q1;i++){const a=Hs[i],c=t[a];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(a.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const d=Xy(c,vu[a]);if(!u){r=!1;const h=z1[a]||a;s+=`${h}(${d}) `}n&&(e[a]=d)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function Eu(t,e,n){const{style:s,vars:r,transformOrigin:i}=t;let a=!1,c=!1;for(const u in e){const d=e[u];if(Gs.has(u)){a=!0;continue}else if(lu(u)){r[u]=d;continue}else{const h=Xy(d,vu[u]);u.startsWith("origin")?(c=!0,i[u]=h):s[u]=h}}if(e.transform||(a||n?s.transform=W1(e,t.transform,n):s.transform&&(s.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=i;s.transformOrigin=`${u} ${d} ${h}`}}const Nu=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ux(t,e,n){for(const s in e)!Ye(e[s])&&!cx(s,n)&&(t[s]=e[s])}function H1({transformTemplate:t},e){return C.useMemo(()=>{const n=Nu();return Eu(n,e,t),Object.assign({},n.vars,n.style)},[e])}function G1(t,e){const n=t.style||{},s={};return ux(s,n,t),Object.assign(s,H1(t,e)),s}function K1(t,e){const n={},s=G1(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const Q1={offset:"stroke-dashoffset",array:"stroke-dasharray"},J1={offset:"strokeDashoffset",array:"strokeDasharray"};function Y1(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?Q1:J1;t[i.offset]=Q.transform(-s);const a=Q.transform(e),c=Q.transform(n);t[i.array]=`${a} ${c}`}function dx(t,{attrX:e,attrY:n,attrScale:s,pathLength:r,pathSpacing:i=1,pathOffset:a=0,...c},u,d,h){if(Eu(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g}=t;f.transform&&(g.transform=f.transform,delete f.transform),(g.transform||f.transformOrigin)&&(g.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),g.transform&&(g.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),s!==void 0&&(f.scale=s),r!==void 0&&Y1(f,r,i,a,!1)}const hx=()=>({...Nu(),attrs:{}}),mx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function X1(t,e,n,s){const r=C.useMemo(()=>{const i=hx();return dx(i,e,mx(s),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};ux(i,t.style,t),r.style={...i,...r.style}}return r}const Z1=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Au(t){return typeof t!="string"||t.includes("-")?!1:!!(Z1.indexOf(t)>-1||/[A-Z]/u.test(t))}function eS(t,e,n,{latestValues:s},r,i=!1){const c=(Au(t)?X1:K1)(e,s,r,t),u=F1(e,typeof t=="string",i),d=t!==C.Fragment?{...u,...c,ref:n}:{},{children:h}=e,f=C.useMemo(()=>Ye(h)?h.get():h,[h]);return C.createElement(t,{...d,children:f})}function Nm(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Su(t,e,n,s){if(typeof e=="function"){const[r,i]=Nm(s);e=e(n!==void 0?n:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=Nm(s);e=e(n!==void 0?n:t.custom,r,i)}return e}function Zi(t){return Ye(t)?t.get():t}function tS({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,r){return{latestValues:nS(n,s,r,t),renderState:e()}}function nS(t,e,n,s){const r={},i=s(t,{});for(const g in i)r[g]=Zi(i[g]);let{initial:a,animate:c}=t;const u=ia(t),d=lx(t);e&&d&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const f=h?c:a;if(f&&typeof f!="boolean"&&!ra(f)){const g=Array.isArray(f)?f:[f];for(let x=0;x<g.length;x++){const w=Su(t,g[x]);if(w){const{transitionEnd:_,transition:A,...P}=w;for(const k in P){let S=P[k];if(Array.isArray(S)){const M=h?S.length-1:0;S=S[M]}S!==null&&(r[k]=S)}for(const k in _)r[k]=_[k]}}}return r}const fx=t=>(e,n)=>{const s=C.useContext(sa),r=C.useContext(na),i=()=>tS(t,e,s,r);return n?i():eu(i)};function ju(t,e,n){var i;const{style:s}=t,r={};for(const a in s)(Ye(s[a])||e.style&&Ye(e.style[a])||cx(a,t)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(r[a]=s[a]);return r}const sS=fx({scrapeMotionValuesFromProps:ju,createRenderState:Nu});function px(t,e,n){const s=ju(t,e,n);for(const r in t)if(Ye(t[r])||Ye(e[r])){const i=Hs.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=t[r]}return s}const rS=fx({scrapeMotionValuesFromProps:px,createRenderState:hx}),iS=Symbol.for("motionComponentSymbol");function vs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function oS(t,e,n){return C.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):vs(n)&&(n.current=s))},[e])}const Cu=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),aS="framerAppearId",gx="data-"+Cu(aS),yx=C.createContext({});function lS(t,e,n,s,r){var _,A;const{visualElement:i}=C.useContext(sa),a=C.useContext(ox),c=C.useContext(na),u=C.useContext(_u).reducedMotion,d=C.useRef(null);s=s||a.renderer,!d.current&&s&&(d.current=s(t,{visualState:e,parent:i,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,f=C.useContext(yx);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&cS(d.current,n,r,f);const g=C.useRef(!1);C.useInsertionEffect(()=>{h&&g.current&&h.update(n,c)});const x=n[gx],w=C.useRef(!!x&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,x))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,x)));return my(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),w.current&&h.animationState&&h.animationState.animateChanges())}),C.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)==null||P.call(window,x)}),w.current=!1),h.enteringChildren=void 0)}),h}function cS(t,e,n,s){const{layoutId:r,layout:i,drag:a,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:xx(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!a||c&&vs(c),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:h,layoutScroll:u,layoutRoot:d})}function xx(t){if(t)return t.options.allowProjection!==!1?t.projection:xx(t.parent)}function Ka(t,{forwardMotionProps:e=!1}={},n,s){n&&M1(n);const r=Au(t)?rS:sS;function i(c,u){let d;const h={...C.useContext(_u),...c,layoutId:uS(c)},{isStatic:f}=h,g=B1(c),x=r(c,f);if(!f&&tu){dS();const w=hS(h);d=w.MeasureLayout,g.visualElement=lS(t,x,h,s,w.ProjectionNode)}return o.jsxs(sa.Provider,{value:g,children:[d&&g.visualElement?o.jsx(d,{visualElement:g.visualElement,...h}):null,eS(t,c,oS(x,g.visualElement,u),x,f,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=C.forwardRef(i);return a[iS]=t,a}function uS({layoutId:t}){const e=C.useContext(Zc).id;return e&&t!==void 0?e+"-"+t:t}function dS(t,e){C.useContext(ox).strict}function hS(t){const{drag:e,layout:n}=Fs;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function mS(t,e){if(typeof Proxy>"u")return Ka;const n=new Map,s=(i,a)=>Ka(i,a,t,e),r=(i,a)=>s(i,a);return new Proxy(r,{get:(i,a)=>a==="create"?s:(n.has(a)||n.set(a,Ka(a,void 0,t,e)),n.get(a))})}function vx({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function fS({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function pS(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Qa(t){return t===void 0||t===1}function zl({scale:t,scaleX:e,scaleY:n}){return!Qa(t)||!Qa(e)||!Qa(n)}function Dn(t){return zl(t)||bx(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function bx(t){return Am(t.x)||Am(t.y)}function Am(t){return t&&t!=="0%"}function No(t,e,n){const s=t-n,r=e*s;return n+r}function Sm(t,e,n,s,r){return r!==void 0&&(t=No(t,r,s)),No(t,n,s)+e}function ql(t,e=0,n=1,s,r){t.min=Sm(t.min,e,n,s,r),t.max=Sm(t.max,e,n,s,r)}function wx(t,{x:e,y:n}){ql(t.x,e.translate,e.scale,e.originPoint),ql(t.y,n.translate,n.scale,n.originPoint)}const jm=.999999999999,Cm=1.0000000000001;function gS(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,a;for(let c=0;c<r;c++){i=n[c],a=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ws(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,wx(t,a)),s&&Dn(i.latestValues)&&ws(t,i.latestValues))}e.x<Cm&&e.x>jm&&(e.x=1),e.y<Cm&&e.y>jm&&(e.y=1)}function bs(t,e){t.min=t.min+e,t.max=t.max+e}function Rm(t,e,n,s,r=.5){const i=ve(t.min,t.max,r);ql(t,e,n,i,s)}function ws(t,e){Rm(t.x,e.x,e.scaleX,e.scale,e.originX),Rm(t.y,e.y,e.scaleY,e.scale,e.originY)}function _x(t,e){return vx(pS(t.getBoundingClientRect(),e))}function yS(t,e,n){const s=_x(t,n),{scroll:r}=e;return r&&(bs(s.x,r.offset.x),bs(s.y,r.offset.y)),s}const Pm=()=>({translate:0,scale:1,origin:0,originPoint:0}),_s=()=>({x:Pm(),y:Pm()}),km=()=>({min:0,max:0}),Ae=()=>({x:km(),y:km()}),Wl={current:null},Tx={current:!1};function xS(){if(Tx.current=!0,!!tu)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Wl.current=t.matches;t.addEventListener("change",e),e()}else Wl.current=!1}const vS=new WeakMap;function bS(t,e,n){for(const s in e){const r=e[s],i=n[s];if(Ye(r))t.addValue(s,r);else if(Ye(i))t.addValue(s,Ls(r,{owner:t}));else if(i!==r)if(t.hasValue(s)){const a=t.getValue(s);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(s);t.addValue(s,Ls(a!==void 0?a:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Dm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wS{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yu,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=ot.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,xe.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=ia(n),this.isVariantNode=lx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in f){const x=f[g];u[g]!==void 0&&Ye(x)&&x.set(u[g])}}mount(e){var n;this.current=e,vS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),Tx.current||xS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wl.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),bn(this.notifyUpdate),bn(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Gs.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&xe.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Fs){const n=Fs[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ae()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Dm.length;s++){const r=Dm[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,a=e[i];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=bS(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Ls(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(fy(s)||gy(s))?s=parseFloat(s):!R1(s)&&wn.test(n)&&(s=Yy(e,n)),this.setBaseTarget(e,Ye(s)?s.get():s)),Ye(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const a=Su(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(s=a[e])}if(n&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Ye(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new iu),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){bu.render(this.render)}}class Ix extends wS{constructor(){super(...arguments),this.KeyframeResolver=v1}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ye(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Ex(t,{style:e,vars:n},s,r){const i=t.style;let a;for(a in e)i[a]=e[a];r==null||r.applyProjectionStyles(i,s);for(a in n)i.setProperty(a,n[a])}function _S(t){return window.getComputedStyle(t)}class TS extends Ix{constructor(){super(...arguments),this.type="html",this.renderInstance=Ex}readValueFromInstance(e,n){var s;if(Gs.has(n))return(s=this.projection)!=null&&s.isProjecting?Ml(n):LA(e,n);{const r=_S(e),i=(lu(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _x(e,n)}build(e,n,s){Eu(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return ju(e,n,s)}}const Nx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IS(t,e,n,s){Ex(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(Nx.has(r)?r:Cu(r),e.attrs[r])}class ES extends Ix{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ae}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Gs.has(n)){const s=Jy(n);return s&&s.default||0}return n=Nx.has(n)?n:Cu(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return px(e,n,s)}build(e,n,s){dx(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,r){IS(e,n,s,r)}mount(e){this.isSVGTag=mx(e.tagName),super.mount(e)}}const NS=(t,e)=>Au(t)?new ES(e):new TS(e,{allowProjection:t!==C.Fragment});function As(t,e,n){const s=t.getProps();return Su(s,e,n!==void 0?n:s.custom,t)}const Hl=t=>Array.isArray(t);function AS(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ls(n))}function SS(t){return Hl(t)?t[t.length-1]||0:t}function jS(t,e){const n=As(t,e);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const a in i){const c=SS(i[a]);AS(t,a,c)}}function CS(t){return!!(Ye(t)&&t.add)}function Gl(t,e){const n=t.getValue("willChange");if(CS(n))return n.add(e);if(!n&&en.WillChange){const s=new en.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function Ax(t){return t.props[gx]}const RS=t=>t!==null;function PS(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(RS),i=e&&n!=="loop"&&e%2===1?0:r.length-1;return!i||s===void 0?r[i]:s}const kS={type:"spring",stiffness:500,damping:25,restSpeed:10},DS=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),VS={type:"keyframes",duration:.8},MS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OS=(t,{keyframes:e})=>e.length>2?VS:Gs.has(t)?t.startsWith("scale")?DS(e[1]):kS:MS;function LS({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Ru=(t,e,n,s={},r,i)=>a=>{const c=xu(s,t)||{},u=c.delay||s.delay||0;let{elapsed:d=0}=s;d=d-kt(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:g=>{e.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:i?void 0:r};LS(c)||Object.assign(h,OS(t,h)),h.duration&&(h.duration=kt(h.duration)),h.repeatDelay&&(h.repeatDelay=kt(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Bl(h),h.delay===0&&(f=!0)),(en.instantAnimations||en.skipAnimations)&&(f=!0,Bl(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,f&&!i&&e.get()!==void 0){const g=PS(h.keyframes,c);if(g!==void 0){xe.update(()=>{h.onUpdate(g),h.onComplete()});return}}return c.isSync?new gu(h):new a1(h)};function FS({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function Sx(t,e,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:a,...c}=e;s&&(i=s);const u=[],d=r&&t.animationState&&t.animationState.getState()[r];for(const h in c){const f=t.getValue(h,t.latestValues[h]??null),g=c[h];if(g===void 0||d&&FS(d,h))continue;const x={delay:n,...xu(i||{},h)},w=f.get();if(w!==void 0&&!f.isAnimating&&!Array.isArray(g)&&g===w&&!x.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const P=Ax(t);if(P){const k=window.MotionHandoffAnimation(P,h,xe);k!==null&&(x.startTime=k,_=!0)}}Gl(t,h),f.start(Ru(h,f,g,t.shouldReduceMotion&&Gy.has(h)?{type:!1}:x,t,_));const A=f.animation;A&&u.push(A)}return a&&Promise.all(u).then(()=>{xe.update(()=>{a&&jS(t,a)})}),u}function jx(t,e,n,s=0,r=1){const i=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),a=t.size,c=(a-1)*s;return typeof n=="function"?n(i,a):r===1?i*s:c-i*s}function Kl(t,e,n={}){var u;const s=As(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(Sx(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:g}=r;return US(t,e,d,h,f,g,n)}:()=>Promise.resolve(),{when:c}=r;if(c){const[d,h]=c==="beforeChildren"?[i,a]:[a,i];return d().then(()=>h())}else return Promise.all([i(),a(n.delay)])}function US(t,e,n=0,s=0,r=0,i=1,a){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(Kl(u,e,{...a,delay:n+(typeof s=="function"?0:s)+jx(t.variantChildren,u,s,r,i)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function BS(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>Kl(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=Kl(t,e,n);else{const r=typeof e=="function"?As(t,e,n.custom):e;s=Promise.all(Sx(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function Cx(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const $S=Iu.length;function Rx(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Rx(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<$S;n++){const s=Iu[n],r=t.props[s];(Wr(r)||r===!1)&&(e[s]=r)}return e}const zS=[...Tu].reverse(),qS=Tu.length;function WS(t){return e=>Promise.all(e.map(({animation:n,options:s})=>BS(t,n,s)))}function HS(t){let e=WS(t),n=Vm(),s=!0;const r=u=>(d,h)=>{var g;const f=As(t,h,u==="exit"?(g=t.presenceContext)==null?void 0:g.custom:void 0);if(f){const{transition:x,transitionEnd:w,..._}=f;d={...d,..._,...w}}return d};function i(u){e=u(t)}function a(u){const{props:d}=t,h=Rx(t.parent)||{},f=[],g=new Set;let x={},w=1/0;for(let A=0;A<qS;A++){const P=zS[A],k=n[P],S=d[P]!==void 0?d[P]:h[P],M=Wr(S),B=P===u?k.isActive:null;B===!1&&(w=A);let O=S===h[P]&&S!==d[P]&&M;if(O&&s&&t.manuallyAnimateOnMount&&(O=!1),k.protectedKeys={...x},!k.isActive&&B===null||!S&&!k.prevProp||ra(S)||typeof S=="boolean")continue;const E=GS(k.prevProp,S);let y=E||P===u&&k.isActive&&!O&&M||A>w&&M,b=!1;const T=Array.isArray(S)?S:[S];let N=T.reduce(r(P),{});B===!1&&(N={});const{prevResolvedValues:j={}}=k,I={...j,...N},X=pe=>{y=!0,g.has(pe)&&(b=!0,g.delete(pe)),k.needsAnimating[pe]=!0;const Ce=t.getValue(pe);Ce&&(Ce.liveStyle=!1)};for(const pe in I){const Ce=N[pe],lt=j[pe];if(x.hasOwnProperty(pe))continue;let vt=!1;Hl(Ce)&&Hl(lt)?vt=!Cx(Ce,lt):vt=Ce!==lt,vt?Ce!=null?X(pe):g.add(pe):Ce!==void 0&&g.has(pe)?X(pe):k.protectedKeys[pe]=!0}k.prevProp=S,k.prevResolvedValues=N,k.isActive&&(x={...x,...N}),s&&t.blockInitialAnimation&&(y=!1);const Z=O&&E;y&&(!Z||b)&&f.push(...T.map(pe=>{const Ce={type:P};if(typeof pe=="string"&&s&&!Z&&t.manuallyAnimateOnMount&&t.parent){const{parent:lt}=t,vt=As(lt,pe);if(lt.enteringChildren&&vt){const{delayChildren:Ks}=vt.transition||{};Ce.delay=jx(lt.enteringChildren,t,Ks)}}return{animation:pe,options:Ce}}))}if(g.size){const A={};if(typeof d.initial!="boolean"){const P=As(t,Array.isArray(d.initial)?d.initial[0]:d.initial);P&&P.transition&&(A.transition=P.transition)}g.forEach(P=>{const k=t.getBaseTarget(P),S=t.getValue(P);S&&(S.liveStyle=!0),A[P]=k??null}),f.push({animation:A})}let _=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(_=!1),s=!1,_?e(f):Promise.resolve()}function c(u,d){var f;if(n[u].isActive===d)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(g=>{var x;return(x=g.animationState)==null?void 0:x.setActive(u,d)}),n[u].isActive=d;const h=a(u);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:a,setActive:c,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Vm(),s=!0}}}function GS(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Cx(e,t):!1}function Pn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vm(){return{animate:Pn(!0),whileInView:Pn(),whileHover:Pn(),whileTap:Pn(),whileDrag:Pn(),whileFocus:Pn(),exit:Pn()}}class En{constructor(e){this.isMounted=!1,this.node=e}update(){}}class KS extends En{constructor(e){super(e),e.animationState||(e.animationState=HS(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ra(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let QS=0;class JS extends En{constructor(){super(...arguments),this.id=QS++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const YS={animation:{Feature:KS},exit:{Feature:JS}};function Gr(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function mi(t){return{point:{x:t.pageX,y:t.pageY}}}const XS=t=>e=>wu(e)&&t(e,mi(e));function jr(t,e,n,s){return Gr(t,e,XS(n),s)}const Px=1e-4,ZS=1-Px,ej=1+Px,kx=.01,tj=0-kx,nj=0+kx;function nt(t){return t.max-t.min}function sj(t,e,n){return Math.abs(t-e)<=n}function Mm(t,e,n,s=.5){t.origin=s,t.originPoint=ve(e.min,e.max,t.origin),t.scale=nt(n)/nt(e),t.translate=ve(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ZS&&t.scale<=ej||isNaN(t.scale))&&(t.scale=1),(t.translate>=tj&&t.translate<=nj||isNaN(t.translate))&&(t.translate=0)}function Cr(t,e,n,s){Mm(t.x,e.x,n.x,s?s.originX:void 0),Mm(t.y,e.y,n.y,s?s.originY:void 0)}function Om(t,e,n){t.min=n.min+e.min,t.max=t.min+nt(e)}function rj(t,e,n){Om(t.x,e.x,n.x),Om(t.y,e.y,n.y)}function Lm(t,e,n){t.min=e.min-n.min,t.max=t.min+nt(e)}function Rr(t,e,n){Lm(t.x,e.x,n.x),Lm(t.y,e.y,n.y)}function gt(t){return[t("x"),t("y")]}const Dx=({current:t})=>t?t.ownerDocument.defaultView:null,Fm=(t,e)=>Math.abs(t-e);function ij(t,e){const n=Fm(t.x,e.x),s=Fm(t.y,e.y);return Math.sqrt(n**2+s**2)}class Vx{constructor(e,n,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Ya(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,w=ij(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!w)return;const{point:_}=g,{timestamp:A}=Ue;this.history.push({..._,timestamp:A});const{onStart:P,onMove:k}=this.handlers;x||(P&&P(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Ja(x,this.transformPagePoint),xe.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Ya(g.type==="pointercancel"?this.lastMoveEventInfo:Ja(x,this.transformPagePoint),this.history);this.startEvent&&w&&w(g,P),_&&_(g,P)},!wu(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=r||window;const c=mi(e),u=Ja(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=Ue;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,Ya(u,this.history)),this.removeListeners=ui(jr(this.contextWindow,"pointermove",this.handlePointerMove),jr(this.contextWindow,"pointerup",this.handlePointerUp),jr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),bn(this.updatePoint)}}function Ja(t,e){return e?{point:e(t.point)}:t}function Um(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ya({point:t},e){return{point:t,delta:Um(t,Mx(e)),offset:Um(t,oj(e)),velocity:aj(e,.1)}}function oj(t){return t[0]}function Mx(t){return t[t.length-1]}function aj(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=Mx(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>kt(e)));)n--;if(!s)return{x:0,y:0};const i=Dt(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function lj(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?ve(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?ve(n,t,s.max):Math.min(t,n)),t}function Bm(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function cj(t,{top:e,left:n,bottom:s,right:r}){return{x:Bm(t.x,n,r),y:Bm(t.y,e,s)}}function $m(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function uj(t,e){return{x:$m(t.x,e.x),y:$m(t.y,e.y)}}function dj(t,e){let n=.5;const s=nt(t),r=nt(e);return r>s?n=$r(e.min,e.max-s,t.min):s>r&&(n=$r(t.min,t.max-r,e.min)),Zt(0,1,n)}function hj(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ql=.35;function mj(t=Ql){return t===!1?t=0:t===!0&&(t=Ql),{x:zm(t,"left","right"),y:zm(t,"top","bottom")}}function zm(t,e,n){return{min:qm(t,e),max:qm(t,n)}}function qm(t,e){return typeof t=="number"?t:t[e]||0}const fj=new WeakMap;class pj{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ae(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(mi(f).point)},a=(f,g)=>{const{drag:x,dragPropagation:w,onDragStart:_}=this.getProps();if(x&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=T1(x),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gt(P=>{let k=this.getAxisMotionValue(P).get()||0;if(Vt.test(k)){const{projection:S}=this.visualElement;if(S&&S.layout){const M=S.layout.layoutBox[P];M&&(k=nt(M)*(parseFloat(k)/100))}}this.originPoint[P]=k}),_&&xe.postRender(()=>_(f,g)),Gl(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},c=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g;const{dragPropagation:x,dragDirectionLock:w,onDirectionLock:_,onDrag:A}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:P}=g;if(w&&this.currentDirection===null){this.currentDirection=gj(P),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",g.point,P),this.updateAxis("y",g.point,P),this.visualElement.render(),A&&A(f,g)},u=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g,this.stop(f,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>gt(f=>{var g;return this.getAnimationState(f)==="paused"&&((g=this.getAxisMotionValue(f).animation)==null?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Vx(e,{onSessionStart:i,onStart:a,onMove:c,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:s,contextWindow:Dx(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,r=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!s)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&xe.postRender(()=>c(s,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!Ui(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=lj(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,r=this.constraints;e&&vs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=cj(s.layoutBox,e):this.constraints=!1,this.elastic=mj(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&gt(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=hj(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!vs(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=yS(s,r.root,this.visualElement.getTransformPagePoint());let a=uj(r.layout.layoutBox,i);if(n){const c=n(fS(a));this.hasMutatedConstraints=!!c,c&&(a=vx(c))}return a}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=gt(h=>{if(!Ui(h,n,this.currentDirection))return;let f=u&&u[h]||{};a&&(f={min:0,max:0});const g=r?200:1e6,x=r?40:1e7,w={type:"inertia",velocity:s?e[h]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,w)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Gl(this.visualElement,e),s.start(Ru(e,s,0,n,this.visualElement,!1))}stopAnimation(){gt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){gt(n=>{const{drag:s}=this.getProps();if(!Ui(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:c}=r.layout.layoutBox[n];i.set(e[n]-ve(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!vs(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};gt(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const u=c.get();r[a]=dj({min:u,max:u},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),gt(a=>{if(!Ui(a,e,null))return;const c=this.getAxisMotionValue(a),{min:u,max:d}=this.constraints[a];c.set(ve(u,d,r[a]))})}addListeners(){if(!this.visualElement.current)return;fj.set(this.visualElement,this);const e=this.visualElement.current,n=jr(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();vs(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),xe.read(s);const a=Gr(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(gt(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=Ql,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:c}}}function Ui(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function gj(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class yj extends En{constructor(e){super(e),this.removeGroupControls=xt,this.removeListeners=xt,this.controls=new pj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Wm=t=>(e,n)=>{t&&xe.postRender(()=>t(e,n))};class xj extends En{constructor(){super(...arguments),this.removePointerDownListener=xt}onPointerDown(e){this.session=new Vx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Dx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:Wm(e),onStart:Wm(n),onMove:s,onEnd:(i,a)=>{delete this.session,r&&xe.postRender(()=>r(i,a))}}}mount(){this.removePointerDownListener=jr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const eo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Hm(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const hr={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Q.test(t))t=parseFloat(t);else return t;const n=Hm(t,e.target.x),s=Hm(t,e.target.y);return`${n}% ${s}%`}},vj={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=wn.parse(t);if(r.length>5)return s;const i=wn.createTransformer(t),a=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;r[0+a]/=c,r[1+a]/=u;const d=ve(c,u,.5);return typeof r[2+a]=="number"&&(r[2+a]/=d),typeof r[3+a]=="number"&&(r[3+a]/=d),i(r)}};let Xa=!1;class bj extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;$1(wj),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),Xa&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),eo.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,{projection:a}=s;return a&&(a.isPresent=i,Xa=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||xe.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bu.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;Xa=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ox(t){const[e,n]=rx(),s=C.useContext(Zc);return o.jsx(bj,{...t,layoutGroup:s,switchLayoutGroup:C.useContext(yx),isPresent:e,safeToRemove:n})}const wj={borderRadius:{...hr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hr,borderTopRightRadius:hr,borderBottomLeftRadius:hr,borderBottomRightRadius:hr,boxShadow:vj};function _j(t,e,n){const s=Ye(t)?t:Ls(t);return s.start(Ru("",s,e,n)),s.animation}const Tj=(t,e)=>t.depth-e.depth;class Ij{constructor(){this.children=[],this.isDirty=!1}add(e){nu(this.children,e),this.isDirty=!0}remove(e){su(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Tj),this.isDirty=!1,this.children.forEach(e)}}function Ej(t,e){const n=ot.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(bn(s),t(i-e))};return xe.setup(s,!0),()=>bn(s)}const Lx=["TopLeft","TopRight","BottomLeft","BottomRight"],Nj=Lx.length,Gm=t=>typeof t=="string"?parseFloat(t):t,Km=t=>typeof t=="number"||Q.test(t);function Aj(t,e,n,s,r,i){r?(t.opacity=ve(0,n.opacity??1,Sj(s)),t.opacityExit=ve(e.opacity??1,0,jj(s))):i&&(t.opacity=ve(e.opacity??1,n.opacity??1,s));for(let a=0;a<Nj;a++){const c=`border${Lx[a]}Radius`;let u=Qm(e,c),d=Qm(n,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||Km(u)===Km(d)?(t[c]=Math.max(ve(Gm(u),Gm(d),s),0),(Vt.test(d)||Vt.test(u))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=ve(e.rotate||0,n.rotate||0,s))}function Qm(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Sj=Fx(0,.5,Iy),jj=Fx(.5,.95,xt);function Fx(t,e,n){return s=>s<t?0:s>e?1:n($r(t,e,s))}function Jm(t,e){t.min=e.min,t.max=e.max}function ft(t,e){Jm(t.x,e.x),Jm(t.y,e.y)}function Ym(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Xm(t,e,n,s,r){return t-=e,t=No(t,1/n,s),r!==void 0&&(t=No(t,1/r,s)),t}function Cj(t,e=0,n=1,s=.5,r,i=t,a=t){if(Vt.test(e)&&(e=parseFloat(e),e=ve(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=ve(i.min,i.max,s);t===i&&(c-=e),t.min=Xm(t.min,e,n,c,r),t.max=Xm(t.max,e,n,c,r)}function Zm(t,e,[n,s,r],i,a){Cj(t,e[n],e[s],e[r],e.scale,i,a)}const Rj=["x","scaleX","originX"],Pj=["y","scaleY","originY"];function ef(t,e,n,s){Zm(t.x,e,Rj,n?n.x:void 0,s?s.x:void 0),Zm(t.y,e,Pj,n?n.y:void 0,s?s.y:void 0)}function tf(t){return t.translate===0&&t.scale===1}function Ux(t){return tf(t.x)&&tf(t.y)}function nf(t,e){return t.min===e.min&&t.max===e.max}function kj(t,e){return nf(t.x,e.x)&&nf(t.y,e.y)}function sf(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Bx(t,e){return sf(t.x,e.x)&&sf(t.y,e.y)}function rf(t){return nt(t.x)/nt(t.y)}function of(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Dj{constructor(){this.members=[]}add(e){nu(this.members,e),e.scheduleRender()}remove(e){if(su(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Vj(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||i||a)&&(s=`translate3d(${r}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:f,rotateY:g,skewX:x,skewY:w}=n;d&&(s=`perspective(${d}px) ${s}`),h&&(s+=`rotate(${h}deg) `),f&&(s+=`rotateX(${f}deg) `),g&&(s+=`rotateY(${g}deg) `),x&&(s+=`skewX(${x}deg) `),w&&(s+=`skewY(${w}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(s+=`scale(${c}, ${u})`),s||"none"}const Za=["","X","Y","Z"],Mj=1e3;let Oj=0;function el(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function $x(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Ax(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",xe,!(r||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&$x(s)}function zx({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},c=e==null?void 0:e()){this.id=Oj++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Uj),this.nodes.forEach(qj),this.nodes.forEach(Wj),this.nodes.forEach(Bj)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ij)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new iu),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=sx(a)&&!j1(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let h,f=0;const g=()=>this.root.updateBlockedByResize=!1;xe.read(()=>{f=window.innerWidth}),t(a,()=>{const x=window.innerWidth;x!==f&&(f=x,this.root.updateBlockedByResize=!0,h&&h(),h=Ej(g,250),eo.hasAnimatedSinceResize&&(eo.hasAnimatedSinceResize=!1,this.nodes.forEach(cf)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||Jj,{onLayoutAnimationStart:_,onLayoutAnimationComplete:A}=d.getProps(),P=!this.targetLayout||!Bx(this.targetLayout,x),k=!f&&g;if(this.options.layoutRoot||this.resumeFrom||k||f&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...xu(w,"layout"),onPlay:_,onComplete:A};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(h,k)}else f||cf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hj),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$x(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(af);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(lf);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(zj),this.nodes.forEach(Lj),this.nodes.forEach(Fj)):this.nodes.forEach(lf),this.clearAllSnapshots();const c=ot.now();Ue.delta=Zt(0,1e3/60,c-Ue.timestamp),Ue.timestamp=c,Ue.isProcessing=!0,$a.update.process(Ue),$a.preRender.process(Ue),$a.render.process(Ue),Ue.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bu.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($j),this.sharedNodes.forEach(Gj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!nt(this.snapshot.measuredBox.x)&&!nt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ae(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Ux(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&this.instance&&(c||Dn(this.latestValues)||h)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),Yj(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:a}=this.options;if(!a)return Ae();const c=a.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(Xj))){const{scroll:h}=this.root;h&&(bs(c.x,h.offset.x),bs(c.y,h.offset.y))}return c}removeElementScroll(a){var u;const c=Ae();if(ft(c,a),(u=this.scroll)!=null&&u.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:g}=h;h!==this.root&&f&&g.layoutScroll&&(f.wasRoot&&ft(c,a),bs(c.x,f.offset.x),bs(c.y,f.offset.y))}return c}applyTransform(a,c=!1){const u=Ae();ft(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ws(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Dn(h.latestValues)&&ws(u,h.latestValues)}return Dn(this.latestValues)&&ws(u,this.latestValues),u}removeTransform(a){const c=Ae();ft(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Dn(d.latestValues))continue;zl(d.latestValues)&&d.updateSnapshot();const h=Ae(),f=d.measurePageBox();ft(h,f),ef(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Dn(this.latestValues)&&ef(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ue.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var g;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Ue.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ae(),this.relativeTargetOrigin=Ae(),Rr(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ae(),this.targetWithTransforms=Ae()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ft(this.target,this.layout.layoutBox),wx(this.target,this.targetDelta)):ft(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ae(),this.relativeTargetOrigin=Ae(),Rr(this.relativeTargetOrigin,this.target,x.target),ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||zl(this.parent.latestValues)||bx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ue.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ft(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;gS(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ae());const{target:x}=a;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ym(this.prevProjectionDelta.x,this.projectionDelta.x),Ym(this.prevProjectionDelta.y,this.projectionDelta.y)),Cr(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!of(this.projectionDelta.x,this.prevProjectionDelta.x)||!of(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_s(),this.projectionDelta=_s(),this.projectionDeltaWithTransform=_s()}setAnimationOrigin(a,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},f=_s();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=Ae(),x=u?u.source:void 0,w=this.layout?this.layout.source:void 0,_=x!==w,A=this.getStack(),P=!A||A.members.length<=1,k=!!(_&&!P&&this.options.crossfade===!0&&!this.path.some(Qj));this.animationProgress=0;let S;this.mixTargetDelta=M=>{const B=M/1e3;uf(f.x,a.x,B),uf(f.y,a.y,B),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rr(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Kj(this.relativeTarget,this.relativeTargetOrigin,g,B),S&&kj(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Ae()),ft(S,this.relativeTarget)),_&&(this.animationValues=h,Aj(h,d,this.latestValues,B,k,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var c,u,d;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(d=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||d.stop(),this.pendingAnimation&&(bn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xe.update(()=>{eo.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ls(0)),this.currentAnimation=_j(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),a.onUpdate&&a.onUpdate(h)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mj),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=a;if(!(!c||!u||!d)){if(this!==a&&this.layout&&d&&qx(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Ae();const f=nt(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+f;const g=nt(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+g}ft(c,u),ws(c,h),Cr(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Dj),this.sharedNodes.get(a).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var c;const{layoutId:a}=this.options;return a?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:a}=this.options;return a?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&el("z",a,d,this.animationValues);for(let h=0;h<Za.length;h++)el(`rotate${Za[h]}`,a,d,this.animationValues),el(`skew${Za[h]}`,a,d,this.animationValues);a.render();for(const h in d)a.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);a.scheduleRender()}applyProjectionStyles(a,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Zi(c==null?void 0:c.pointerEvents)||"",a.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Zi(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Dn(this.latestValues)&&(a.transform=u?u({},""):"none",this.hasProjected=!1);return}a.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=Vj(this.projectionDeltaWithTransform,this.treeScale,h);u&&(f=u(h,f)),a.transform=f;const{x:g,y:x}=this.projectionDelta;a.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,d.animationValues?a.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const w in Hr){if(h[w]===void 0)continue;const{correct:_,applyTo:A,isCSSVariable:P}=Hr[w],k=f==="none"?h[w]:_(h[w],d);if(A){const S=A.length;for(let M=0;M<S;M++)a[A[M]]=k}else P?this.options.visualElement.renderState.vars[w]=k:a[w]=k}this.options.layoutId&&(a.pointerEvents=d===this?Zi(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(af),this.root.sharedNodes.clear()}}}function Lj(t){t.updateLayout()}function Fj(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?gt(f=>{const g=a?e.measuredBox[f]:e.layoutBox[f],x=nt(g);g.min=s[f].min,g.max=g.min+x}):qx(i,e.layoutBox,s)&&gt(f=>{const g=a?e.measuredBox[f]:e.layoutBox[f],x=nt(s[f]);g.max=g.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+x)});const c=_s();Cr(c,s,e.layoutBox);const u=_s();a?Cr(u,t.applyTransform(r,!0),e.measuredBox):Cr(u,s,e.layoutBox);const d=!Ux(c);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:g,layout:x}=f;if(g&&x){const w=Ae();Rr(w,e.layoutBox,g.layoutBox);const _=Ae();Rr(_,s,x.layoutBox),Bx(w,_)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=w,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function Uj(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Bj(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function $j(t){t.clearSnapshot()}function af(t){t.clearMeasurements()}function lf(t){t.isLayoutDirty=!1}function zj(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function cf(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qj(t){t.resolveTargetDelta()}function Wj(t){t.calcProjection()}function Hj(t){t.resetSkewAndRotation()}function Gj(t){t.removeLeadSnapshot()}function uf(t,e,n){t.translate=ve(e.translate,0,n),t.scale=ve(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function df(t,e,n,s){t.min=ve(e.min,n.min,s),t.max=ve(e.max,n.max,s)}function Kj(t,e,n,s){df(t.x,e.x,n.x,s),df(t.y,e.y,n.y,s)}function Qj(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Jj={duration:.45,ease:[.4,0,.1,1]},hf=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),mf=hf("applewebkit/")&&!hf("chrome/")?Math.round:xt;function ff(t){t.min=mf(t.min),t.max=mf(t.max)}function Yj(t){ff(t.x),ff(t.y)}function qx(t,e,n){return t==="position"||t==="preserve-aspect"&&!sj(rf(e),rf(n),.2)}function Xj(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Zj=zx({attachResizeListener:(t,e)=>Gr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tl={current:void 0},Wx=zx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tl.current){const t=new Zj({});t.mount(window),t.setOptions({layoutScroll:!0}),tl.current=t}return tl.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),eC={pan:{Feature:xj},drag:{Feature:yj,ProjectionNode:Wx,MeasureLayout:Ox}};function pf(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,i=s[r];i&&xe.postRender(()=>i(e,mi(e)))}class tC extends En{mount(){const{current:e}=this.node;e&&(this.unmount=I1(e,(n,s)=>(pf(this.node,s,"Start"),r=>pf(this.node,r,"End"))))}unmount(){}}class nC extends En{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ui(Gr(this.node.current,"focus",()=>this.onFocus()),Gr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gf(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),i=s[r];i&&xe.postRender(()=>i(e,mi(e)))}class sC extends En{mount(){const{current:e}=this.node;e&&(this.unmount=S1(e,(n,s)=>(gf(this.node,s,"Start"),(r,{success:i})=>gf(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Jl=new WeakMap,nl=new WeakMap,rC=t=>{const e=Jl.get(t.target);e&&e(t)},iC=t=>{t.forEach(rC)};function oC({root:t,...e}){const n=t||document;nl.has(n)||nl.set(n,{});const s=nl.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(iC,{root:t,...e})),s[r]}function aC(t,e,n){const s=oC(e);return Jl.set(t,n),s.observe(t),()=>{Jl.delete(t),s.unobserve(t)}}const lC={some:0,all:1};class cC extends En{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:lC[r]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),g=d?h:f;g&&g(u)};return aC(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(uC(e,n))&&this.startObserver()}unmount(){}}function uC({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const dC={inView:{Feature:cC},tap:{Feature:sC},focus:{Feature:nC},hover:{Feature:tC}},hC={layout:{ProjectionNode:Wx,MeasureLayout:Ox}},mC={...YS,...dC,...eC,...hC},W=mS(mC,NS),fC=()=>{const[t,e]=C.useState(""),[n,s]=C.useState(""),[r,i]=C.useState(""),[a,c]=C.useState(!1),{login:u,currentUser:d}=mt(),h=Co();C.useEffect(()=>{d&&f(d.role)},[d]);const f=x=>{switch(x){case"investor":h("/investor-dashboard");break;case"college":h("/college-dashboard");break;case"admin":h("/admin-dashboard");break;default:h("/")}},g=async x=>{x.preventDefault();try{i(""),c(!0),await u(t,n)}catch(w){i(w.message||"Failed to log in"),console.error(w)}finally{c(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-black",children:o.jsxs(W.div,{className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 w-full max-w-md border border-white/20",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsx("h2",{className:"text-3xl font-bold text-white text-center mb-8",children:"Login"}),r&&o.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mb-6",children:r}),o.jsxs("form",{onSubmit:g,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-white text-sm font-medium mb-2",children:"Email"}),o.jsx("input",{id:"email",type:"email",value:t,onChange:x=>e(x.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter your email",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-white text-sm font-medium mb-2",children:"Password"}),o.jsx("input",{id:"password",type:"password",value:n,onChange:x=>s(x.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter your password",required:!0})]}),o.jsx("button",{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Logging in...":"Login"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-white/70 text-sm",children:"Don't have an account? Contact admin to get registered."})})]})})},pC=()=>{const[t,e]=C.useState(""),[n,s]=C.useState(""),[r,i]=C.useState(""),[a,c]=C.useState("investor"),[u,d]=C.useState(""),[h,f]=C.useState(""),[g,x]=C.useState(""),[w,_]=C.useState(!1),{register:A}=mt(),P=async k=>{if(k.preventDefault(),n!==r)return x("Passwords do not match");if(n.length<6)return x("Password must be at least 6 characters");try{x(""),_(!0),await A(t,n,a,a==="college"?u:void 0,a==="investor"?h:void 0)}catch(S){x("Failed to create account"),console.error(S)}finally{_(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-black",children:o.jsxs(W.div,{className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 w-full max-w-md border border-white/20",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsx("h2",{className:"text-3xl font-bold text-white text-center mb-8",children:"Register"}),g&&o.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mb-6",children:g}),o.jsxs("form",{onSubmit:P,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-white text-sm font-medium mb-2",children:"Email"}),o.jsx("input",{id:"email",type:"email",value:t,onChange:k=>e(k.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter your email",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"role",className:"block text-white text-sm font-medium mb-2",children:"Role"}),o.jsxs("select",{id:"role",value:a,onChange:k=>c(k.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-[#e86888] transition-colors",style:{color:"white",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[o.jsx("option",{value:"investor",style:{backgroundColor:"#1f2937",color:"white"},children:"Investor"}),o.jsx("option",{value:"college",style:{backgroundColor:"#1f2937",color:"white"},children:"College"}),o.jsx("option",{value:"admin",style:{backgroundColor:"#1f2937",color:"white"},children:"Admin"})]})]}),a==="college"&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"collegeId",className:"block text-white text-sm font-medium mb-2",children:"College ID"}),o.jsx("input",{id:"collegeId",type:"text",value:u,onChange:k=>d(k.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter your college ID",required:!0})]}),a==="investor"&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"investorId",className:"block text-white text-sm font-medium mb-2",children:"Investor ID"}),o.jsx("input",{id:"investorId",type:"text",value:h,onChange:k=>f(k.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter your investor ID",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-white text-sm font-medium mb-2",children:"Password"}),o.jsx("input",{id:"password",type:"password",value:n,onChange:k=>s(k.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter your password",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-white text-sm font-medium mb-2",children:"Confirm Password"}),o.jsx("input",{id:"confirmPassword",type:"password",value:r,onChange:k=>i(k.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Confirm your password",required:!0})]}),o.jsx("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Creating account...":"Register"})]})]})})},$t={email:"admin@jazbaa.com",password:"admin123456"},gC=[{email:"investor@test.com",password:"password123",role:"investor",investorId:"INV001",displayName:"Test Investor"},{email:"college@test.com",password:"password123",role:"college",collegeId:"COL001",displayName:"Test College"}],yC=[{name:"Feed",pitch:"AI-powered food delivery and restaurant management platform",sector:"FoodTech",badges:["Open to Invest"],special:"Flagship Startup",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"Hirex",pitch:"AI-driven recruitment and talent acquisition platform",sector:"HRTech",badges:["Open to Invest","Open to Hire"],special:"Built by All-Women Team",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"Hash 13",pitch:"Blockchain-based secure data management and verification system",sector:"Blockchain",badges:["Open to Invest"],special:"Innovation Award",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"India AI Mission",pitch:"AI solutions for Indian government and public sector digitization",sector:"AI for Bharat",badges:["Open to Invest","Government Initiative"],special:"Flagship Startup",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"MediCare AI",pitch:"AI-powered diagnosis for rural healthcare",sector:"HealthTech",badges:["Open to Invest"],special:"Flagship Startup",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"HealthBridge",pitch:"Connecting patients with specialists virtually",sector:"HealthTech",badges:["Open to Hire"],special:"Built by All-Women Team",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"PillTracker",pitch:"Smart medication management system",sector:"HealthTech",badges:["Open to Invest","Open to Hire"],special:"Flagship Startup",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"FarmSmart",pitch:"IoT sensors for precision farming",sector:"AgriTech",badges:["Open to Invest"],special:void 0,collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"CropGuard",pitch:"AI-based crop disease detection",sector:"AgriTech",badges:["Open to Hire"],special:"Built by All-Women Team",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"PayEasy",pitch:"Digital payments for rural merchants",sector:"FinTech",badges:["Open to Invest"],special:"Flagship Startup",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"MicroLend",pitch:"Peer-to-peer lending platform",sector:"FinTech",badges:["Open to Hire"],special:void 0,collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"LearnSmart",pitch:"AI-powered personalized learning platform",sector:"EdTech",badges:["Open to Invest"],special:void 0,collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"SkillBridge",pitch:"Virtual reality skill training",sector:"EdTech",badges:["Open to Hire"],special:"Built by All-Women Team",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"EcoTrack",pitch:"Carbon footprint tracking for businesses",sector:"Sustainability",badges:["Open to Invest"],special:"Flagship Startup",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"GreenTech",pitch:"Renewable energy optimization",sector:"Sustainability",badges:["Open to Hire"],special:void 0,collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"SheLeads",pitch:"Leadership platform for women entrepreneurs",sector:"WomenTech",badges:["Open to Invest"],special:"Built by All-Women Team",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"TechMentor",pitch:"Women in tech mentorship network",sector:"WomenTech",badges:["Open to Hire"],special:void 0,collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"LocalGuide",pitch:"AI-powered local travel recommendations",sector:"TravelTech",badges:["Open to Invest"],special:void 0,collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"SmartStay",pitch:"Smart hotel booking platform",sector:"TravelTech",badges:["Open to Hire"],special:"Flagship Startup",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"CommunityConnect",pitch:"Platform for social impact initiatives",sector:"Social Impact",badges:["Open to Invest"],special:void 0,collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"HelpBridge",pitch:"Connecting volunteers with NGOs",sector:"Social Impact",badges:["Open to Hire"],special:"Built by All-Women Team",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"BharatAI",pitch:"AI solutions for Indian languages",sector:"AI for Bharat",badges:["Open to Invest"],special:"Flagship Startup",collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"LocalAI",pitch:"AI-powered local business solutions",sector:"AI for Bharat",badges:["Open to Hire"],special:void 0,collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"AgriTech Solutions",pitch:"Smart farming solutions for Indian agriculture",sector:"AgriTech",badges:["Open to Invest","Rural Development"],collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]},{name:"AI for Bharat",pitch:"AI solutions tailored for Indian languages and culture",sector:"AI for Bharat",badges:["Open to Invest","AI Innovation"],collegeId:"COL001",createdBy:"college-1",createdAt:new Date,interestedInvestors:[],hiringInvestors:[]}],yf=async()=>{const t={success:!1,adminUser:null,testUsers:[],startupsAdded:0,commentsAdded:0,errors:[],steps:[]};try{t.steps.push("🚀 Starting Firebase setup...");try{t.steps.push("📡 Testing Firebase connection..."),await oo(it),t.steps.push("✅ Firebase connection successful")}catch(r){throw t.errors.push(`Connection Error: ${r.message}`),new Error("Firebase connection failed")}try{t.steps.push("👤 Creating admin user...");const r=await Vr(it,$t.email,$t.password);await ht(je(G,"users",r.user.uid),{uid:r.user.uid,email:$t.email,role:"admin",displayName:"Admin User",createdAt:new Date}),t.adminUser={uid:r.user.uid,email:$t.email},t.steps.push("✅ Admin user created successfully")}catch(r){if(r.code==="auth/email-already-in-use"){t.steps.push("⚠️ Admin user already exists");try{const i=await uc(it,$t.email,$t.password);t.adminUser={uid:i.user.uid,email:$t.email},t.steps.push("✅ Admin user verified")}catch(i){t.errors.push(`Admin sign in failed: ${i.message}`)}}else throw t.errors.push(`Admin creation failed: ${r.message}`),r}t.steps.push("👥 Creating test users...");for(const r of gC)try{const i=await Vr(it,r.email,r.password);await ht(je(G,"users",i.user.uid),{uid:i.user.uid,email:r.email,role:r.role,displayName:r.displayName,...r.collegeId&&{collegeId:r.collegeId},...r.investorId&&{investorId:r.investorId},createdAt:new Date}),t.testUsers.push({uid:i.user.uid,role:r.role,email:r.email}),t.steps.push(`✅ Created ${r.role} user: ${r.email}`)}catch(i){i.code==="auth/email-already-in-use"?t.steps.push(`⚠️ User ${r.email} already exists`):t.errors.push(`Error creating ${r.role} user: ${i.message}`)}t.steps.push("🚀 Adding sample startups...");const e=ue(G,"startups");for(const r of yC)try{await Xt(e,r),t.startupsAdded++,t.steps.push(`✅ Added startup: ${r.name}`)}catch(i){t.errors.push(`Error adding startup ${r.name}: ${i.message}`)}t.steps.push("💬 Adding sample comments...");const n=ue(G,"comments"),s=[{investorId:"investor-1",investorName:"John Investor",startupId:"startup-1",comment:"This looks like a promising investment opportunity. I'm particularly interested in the AI-powered healthcare solutions.",timestamp:new Date,type:"investment"},{investorId:"investor-2",investorName:"Sarah Tech",startupId:"startup-2",comment:"Great team and innovative approach. Would love to discuss potential collaboration opportunities.",timestamp:new Date,type:"hiring"},{investorId:"investor-1",investorName:"John Investor",startupId:"startup-3",comment:"The sustainability focus is exactly what we're looking for. Let's schedule a meeting.",timestamp:new Date,type:"general"}];for(const r of s)try{await Xt(n,r),t.commentsAdded++,t.steps.push(`✅ Added comment from ${r.investorName}`)}catch(i){t.errors.push(`Error adding comment: ${i.message}`)}t.steps.push("🔍 Verifying data creation...");try{const r=await Te(ue(G,"users")),i=await Te(ue(G,"startups")),a=await Te(ue(G,"comments"));t.steps.push(`✅ Verified ${r.size} users in database`),t.steps.push(`✅ Verified ${i.size} startups in database`),t.steps.push(`✅ Verified ${a.size} comments in database`)}catch(r){t.errors.push(`Verification failed: ${r.message}`)}return await oo(it),t.steps.push("✅ Setup completed successfully"),t.success=!0,t}catch(e){return t.errors.push(`Setup failed: ${e.message}`),console.error("❌ Firebase setup failed:",e),t}},xC=async()=>{try{return await uc(it,$t.email,$t.password),await oo(it),{needsSetup:!1,message:"Firebase is already set up"}}catch(t){return t.code==="auth/user-not-found"?{needsSetup:!0,message:"Firebase setup required"}:{needsSetup:!1,message:"Unknown error checking setup"}}},vC=async()=>{const t={authEnabled:!1,firestoreEnabled:!1,authTest:!1,firestoreTest:!1,errors:[]};try{console.log("🔍 Running Firebase diagnostics...");try{console.log("Testing Firebase Auth...");const e=`test-${Date.now()}@diagnostic.com`,s=await Vr(it,e,"test123456");console.log("✅ Firebase Auth is working"),t.authEnabled=!0,t.authTest=!0}catch(e){console.error("❌ Firebase Auth test failed:",e),t.errors.push(`Auth Error: ${e.message}`),e.code==="auth/operation-not-allowed"?t.errors.push("Email/Password authentication is not enabled in Firebase Console"):e.code==="auth/invalid-api-key"?t.errors.push("Invalid API key - check Firebase configuration"):e.code==="auth/network-request-failed"&&t.errors.push("Network error - check internet connection")}try{console.log("Testing Firestore...");const e=je(G,"diagnostics","test");await ht(e,{timestamp:new Date,test:!0}),(await Ot(e)).exists()&&(console.log("✅ Firestore is working"),t.firestoreEnabled=!0,t.firestoreTest=!0)}catch(e){console.error("❌ Firestore test failed:",e),t.errors.push(`Firestore Error: ${e.message}`),e.code==="permission-denied"?t.errors.push("Firestore security rules are blocking access"):e.code==="unavailable"&&t.errors.push("Firestore is not enabled in Firebase Console")}try{console.log("Testing project configuration...");const e=G.app.options.projectId;console.log("✅ Project ID:",e),e!=="jazbaa-4-0"&&t.errors.push(`Project ID mismatch: expected 'jazbaa-4-0', got '${e}'`)}catch(e){console.error("❌ Project configuration test failed:",e),t.errors.push(`Configuration Error: ${e.message}`)}return t}catch(e){return console.error("❌ Diagnostic failed:",e),t.errors.push(`General Error: ${e.message}`),t}},bC=()=>{mt();const[t,e]=C.useState("checking"),[n,s]=C.useState(null),[r,i]=C.useState(null),[a,c]=C.useState(null);C.useEffect(()=>{u()},[]);const u=async()=>{try{const x=await xC();e(x.needsSetup?"needed":"completed")}catch{e("error")}},d=async()=>{e("checking");try{const x=await yf();s(x),e(x.success?"completed":"error")}catch(x){e("error"),s({error:x.message})}},h=async()=>{try{const x=await vC();i(x)}catch(x){i({error:x.message})}},f=async()=>{try{console.log("Testing Firebase operations...");const x=await Te(ue(G,"startups"));console.log("Startups found:",x.size);const w=await Te(ue(G,"comments"));if(console.log("Comments found:",w.size),x.size>0){const A=x.docs[0];console.log("Testing update on startup:",A.id),await ys(je(G,"startups",A.id),{interestedInvestors:Sl("test-investor")}),console.log("Successfully updated startup")}const _={investorId:"test-investor",investorName:"Test Investor",startupId:x.size>0?x.docs[0].id:"test-startup",comment:"This is a test comment",timestamp:new Date,type:"general"};await Xt(ue(G,"comments"),_),console.log("Successfully added test comment"),c({success:!0,startups:x.size,comments:w.size,message:"All Firebase operations working correctly!"})}catch(x){console.error("Test failed:",x),c({success:!1,error:x.message,message:"Firebase operations failed"})}},g=async()=>{try{console.log("Resetting Firebase data...");const x=await Te(ue(G,"startups")),w=await Te(ue(G,"comments"));console.log(`Found ${x.size} startups and ${w.size} comments to delete`);const _=await yf();s(_),e(_.success?"completed":"error"),alert("Data has been reset and recreated!")}catch(x){console.error("Reset failed:",x),alert(`Reset failed: ${x.message}`)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black py-20",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Firebase Setup & Diagnostics"}),o.jsx("p",{className:"text-xl text-white/80",children:"Configure and test your Firebase backend"})]}),o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-8 border border-white/10 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Setup Status"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-4 h-4 rounded-full ${t==="completed"?"bg-green-500":t==="error"?"bg-red-500":t==="needed"?"bg-yellow-500":"bg-blue-500 animate-pulse"}`}),o.jsxs("span",{className:"text-white",children:[t==="checking"&&"Checking setup...",t==="needed"&&"Setup required",t==="completed"&&"Setup completed",t==="error"&&"Setup error"]})]}),t==="needed"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("button",{onClick:d,className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105",children:"Initialize Firebase"}),o.jsx("button",{onClick:g,className:"bg-red-500 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105",children:"Reset & Recreate Data"})]})]})]}),o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-8 border border-white/10 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Test Firebase Operations"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("button",{onClick:f,className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105",children:"Test Firebase Operations"}),a&&o.jsxs("div",{className:`p-4 rounded-lg ${a.success?"bg-green-500/20 border border-green-500/50":"bg-red-500/20 border border-red-500/50"}`,children:[o.jsx("h3",{className:"font-semibold text-white mb-2",children:a.message}),a.success?o.jsxs("div",{className:"text-white/80 text-sm",children:[o.jsxs("p",{children:["Startups: ",a.startups]}),o.jsxs("p",{children:["Comments: ",a.comments]})]}):o.jsx("p",{className:"text-red-300 text-sm",children:a.error})]})]})]}),o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-8 border border-white/10 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Run Diagnostics"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("button",{onClick:h,className:"bg-gradient-to-r from-[#7d7eed] to-[#e86888] text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:scale-105",children:"Run Diagnostics"}),r&&o.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-white mb-2",children:"Diagnostic Results"}),o.jsx("pre",{className:"text-white/80 text-sm overflow-auto",children:JSON.stringify(r,null,2)})]})]})]}),n&&o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-8 border border-white/10",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Setup Results"}),o.jsxs("div",{className:"space-y-4",children:[n.steps&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-white font-semibold",children:"Steps:"}),n.steps.map((x,w)=>o.jsx("p",{className:"text-white/80 text-sm",children:x},w))]}),n.errors&&n.errors.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-red-400 font-semibold",children:"Errors:"}),n.errors.map((x,w)=>o.jsx("p",{className:"text-red-300 text-sm",children:x},w))]}),n.success&&o.jsxs("div",{className:"bg-green-500/20 border border-green-500/50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-green-400 font-semibold",children:"Setup Successful!"}),o.jsxs("p",{className:"text-green-300 text-sm",children:["Startups added: ",n.startupsAdded,o.jsx("br",{}),"Comments added: ",n.commentsAdded]})]})]})]})]})})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(t,e)=>{const n=C.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...d},h)=>C.createElement("svg",{ref:h,...wC,width:r,height:r,stroke:s,strokeWidth:a?Number(i)*24/Number(r):i,className:["lucide",`lucide-${_C(t)}`,c].join(" "),...d},[...e.map(([f,g])=>C.createElement(f,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=se("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=se("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=se("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=se("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=se("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=se("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=se("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=se("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=se("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=se("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=se("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=se("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=se("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ou=async t=>{var e;try{const n=t.slug||t.id||((e=t.name)==null?void 0:e.toLowerCase().replace(/\s+/g,"-"))||`startup-${Date.now()}`;console.log("🔍 Ensuring startup profile exists:",{startupName:t.name,slug:n,hasExistingProfile:!!t.slug});const s=je(G,"startups",n);if((await Ot(s)).exists())return console.log("✅ Startup profile already exists:",n),n;const i={id:t.id||n,name:t.name||"Unknown Startup",tagline:t.tagline||t.pitch||"No tagline available",story:t.story||"No story available",sector:t.sector||"Technology",badges:t.badges||[],team:t.team||[],website:t.website,appStore:t.appStore,playStore:t.playStore,demoUrl:t.demoUrl,qrCode:t.qrCode,contactEmail:t.contactEmail,contactPhone:t.contactPhone,productVideo:t.productVideo,pitchDeck:t.pitchDeck,problem:t.problem||"Problem description not available",solution:t.solution||"Solution description not available",collaborationMessage:t.collaborationMessage||"We are open to collaboration, funding, and partnerships.",individualPitches:t.individualPitches||[],slug:n,createdAt:t.createdAt||new Date,isPermanent:!0,profileCreatedAt:new Date,lastUpdated:new Date,isTemplateCompatible:!0,templateVersion:"1.0"};await ht(s,i),console.log("✅ Created startup profile:",n);try{const a=je(G,"permanent_profiles",n);await ht(a,{...i,backupCreatedAt:new Date,originalCollection:"startups"}),console.log("✅ Created backup profile:",n)}catch(a){console.warn("⚠️ Backup creation failed (optional):",a)}return n}catch(n){throw console.error("❌ Error ensuring startup profile:",n),n}},LC=async()=>{try{console.log("🔄 Ensuring all startup profiles exist...");const t=ue(G,"startups"),e=await Te(t),n=[];for(const s of e.docs){const r=s.data();try{const i=await Ou({...r,id:s.id});n.push(i)}catch(i){console.error(`❌ Failed to ensure profile for ${s.id}:`,i)}}return console.log(`✅ Ensured ${n.length} startup profiles exist`),n}catch(t){throw console.error("❌ Error ensuring all startup profiles:",t),t}},FC=t=>{var n;return`/startup/${t.slug||t.id||((n=t.name)==null?void 0:n.toLowerCase().replace(/\s+/g,"-"))||`startup-${t.id}`}`},Jx=({isInvestorView:t=!1,startups:e=[],onInterestClick:n,onCommentSubmit:s,currentUser:r,comments:i=[]})=>{const a=Co(),[c,u]=C.useState([]),[d,h]=C.useState("all"),[f,g]=C.useState(null),[x,w]=C.useState({}),[_,A]=C.useState({}),P=["all","Technology","Healthcare","Education","Finance","E-commerce","Entertainment","Transportation","Food & Beverage","Real Estate","Manufacturing","Energy","Environment","Sports","Fashion","Other"];C.useEffect(()=>{(async()=>{try{console.log("🔍 Fetching startups from Firebase...");const M=ue(G,"startups"),O=(await Te(M)).docs.map(b=>{const T=b.data();return console.log("📊 Startup data from Firebase:",{id:b.id,name:T.name,sector:T.sector}),{id:b.id,...T}});console.log("✅ Fetched startups count:",O.length),console.log("✅ All fetched startups:",O);for(const b of O)try{await Ou(b)}catch(T){console.warn("⚠️ Profile creation failed for startup:",b.name,T)}const y=[...O,...e].filter((b,T,N)=>T===N.findIndex(j=>j.id===b.id));console.log("✅ Final unique startups count:",y.length),console.log("✅ Final startups list:",y.map(b=>({id:b.id,name:b.name,sector:b.sector}))),u(y)}catch(M){console.error("❌ Error fetching startups:",M),console.error("❌ Error details:",{message:M instanceof Error?M.message:"Unknown error",stack:M instanceof Error?M.stack:void 0}),u(e)}})()},[e]);const k=d==="all"?c:c.filter(S=>S.sector===d);return o.jsx("section",{className:"py-20 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:t?"Discover Startups":"Featured Startups"}),o.jsx("p",{className:"text-xl text-white/70 max-w-3xl mx-auto",children:t?"Explore innovative startups and connect with founders":"Meet the innovative startups participating in JAZBAA 4.0"})]}),o.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:P.map(S=>o.jsx("button",{onClick:()=>h(S),className:`px-6 py-3 rounded-full font-medium transition-all duration-300 ${d===S?"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:S==="all"?"All Sectors":S},S))}),o.jsx(ix,{mode:"wait",children:o.jsx(W.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},children:k.map((S,M)=>{var B;return console.log("Rendering startup:",S),o.jsxs(W.div,{className:"group bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 hover:border-[#e86888]/50 transition-all duration-300 hover:scale-105",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:M*.1},children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[S.logo?o.jsx("img",{src:S.logo,alt:`${S.name} logo`,className:"w-16 h-16 object-contain"}):o.jsx(So,{className:"w-8 h-8 text-white"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-white",children:S.name}),o.jsx("p",{className:"text-sm text-white/70",children:S.sector})]})]}),S.special&&o.jsx("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:S.special})]}),o.jsx("p",{className:"text-white/70 mb-4",children:S.pitch}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:(B=S.badges)==null?void 0:B.map(O=>o.jsx("span",{className:"bg-[#7d7eed]/20 text-white px-3 py-1 rounded-full text-sm",children:O},O))}),t&&n&&r?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:()=>{console.log("Interest button clicked for startup:",S),n(S.id,"investment")},className:`w-full py-2 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 ${(S.interestedInvestors||[]).includes(r.uid)?"bg-green-600 text-white hover:bg-green-700":"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white hover:scale-105"}`,children:[o.jsx(Jr,{size:16}),(S.interestedInvestors||[]).includes(r.uid)?"Interested ✓":"Show Interest"]}),o.jsxs("button",{onClick:()=>{console.log("Hiring button clicked for startup:",S),n(S.id,"hiring")},className:`w-full py-2 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 ${(S.hiringInvestors||[]).includes(r.uid)?"bg-blue-600 text-white hover:bg-blue-700":"bg-gradient-to-r from-[#7d7eed] to-[#e86888] text-white hover:scale-105"}`,children:[o.jsx(OC,{size:16}),(S.hiringInvestors||[]).includes(r.uid)?"Want to Hire ✓":"Want to Hire"]}),o.jsxs("button",{onClick:()=>g(f===S.id?null:S.id),className:"w-full py-2 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 bg-white/10 text-white hover:bg-white/20 hover:scale-105",children:[o.jsx(ps,{size:16}),"Add Comment"]}),f===S.id&&o.jsx(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white/5 rounded-lg p-4 border border-white/10",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("select",{value:_[S.id]||"general",onChange:O=>A({..._,[S.id]:O.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm focus:outline-none focus:border-[#e86888]",children:[o.jsx("option",{value:"general",children:"General Comment"}),o.jsx("option",{value:"investment",children:"Investment Related"}),o.jsx("option",{value:"hiring",children:"Hiring Related"})]}),o.jsx("textarea",{value:x[S.id]||"",onChange:O=>w({...x,[S.id]:O.target.value}),placeholder:"Write your comment here...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm focus:outline-none focus:border-[#e86888] resize-none",rows:3}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>{var y;const O=(y=x[S.id])==null?void 0:y.trim(),E=_[S.id]||"general";O&&s?(console.log("Submitting comment:",{startupId:S.id,comment:O,type:E}),s(S.id,O,E),w({...x,[S.id]:""}),g(null)):console.warn("Comment submission failed:",{hasComment:!!O,hasOnCommentSubmit:!!s,commentType:E})},className:"flex-1 py-2 bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white rounded-lg font-medium transition-all duration-300 hover:scale-105 flex items-center justify-center gap-2",children:[o.jsx(DC,{size:14}),"Submit"]}),o.jsx("button",{onClick:()=>{w({...x,[S.id]:""}),g(null)},className:"px-4 py-2 bg-white/10 text-white rounded-lg font-medium transition-all duration-300 hover:bg-white/20",children:"Cancel"})]})]})}),i.filter(O=>O.startupId===S.id).length>0&&o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsx("h4",{className:"text-white/80 text-sm font-medium",children:"Comments:"}),i.filter(O=>O.startupId===S.id).map((O,E)=>(console.log("Displaying comment:",O),o.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-white/90 text-sm font-medium",children:O.investorName}),o.jsx("span",{className:"text-white/60 text-xs",children:new Date(O.timestamp).toLocaleDateString()})]}),o.jsx("p",{className:"text-white/70 text-sm",children:O.comment}),o.jsx("span",{className:`inline-block mt-2 px-2 py-1 rounded-full text-xs font-medium ${O.type==="investment"?"bg-green-500/20 text-green-400":O.type==="hiring"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:O.type})]},O.id)))]})]}):o.jsxs("button",{onClick:()=>{const O=FC(S);console.log("🔗 Navigating to startup profile:",{startupName:S.name,profileUrl:O,hasSlug:!!S.slug,hasId:!!S.id}),a(O)},className:"w-full bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white py-3 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 hover:scale-105 hover:shadow-lg hover:shadow-[#e86888]/25 active:scale-95 transform",children:["View Details ",o.jsx(Kr,{size:16})]})]},S.id||S.name)})},d)}),k.length===0&&o.jsx("div",{className:"text-center text-white/60 text-xl",children:"No startups found for the selected sector."})]})})},UC=()=>{const{currentUser:t}=mt(),[e,n]=C.useState([]),[s,r]=C.useState([]),[i,a]=C.useState(!0);C.useEffect(()=>{c()},[]);const c=async()=>{try{a(!0),console.log("Fetching data for investor dashboard...");const h=await Te(ue(G,"startups"));console.log("Startups collection size:",h.docs.length);const f=await Te(ue(G,"comments"));console.log("Comments collection size:",f.docs.length);const g=await Promise.all(h.docs.map(async w=>{var k;const _=w.data();console.log("Raw startup data:",_);const A=_.slug||w.id||((k=_.name)==null?void 0:k.toLowerCase().replace(/\s+/g,"-"))||`startup-${w.id}`;try{await Ou({..._,id:w.id,slug:A}),console.log("✅ Ensured profile exists for:",_.name||w.id)}catch(S){console.warn("⚠️ Failed to ensure profile for:",_.name||w.id,S)}const P={id:w.id,name:_.name||"Unknown Startup",pitch:_.tagline||_.story||"No description available",sector:_.sector||"Technology",badges:_.badges||[],special:_.special||null,interestedInvestors:_.interestedInvestors||[],hiringInvestors:_.hiringInvestors||[],collegeId:_.collegeId||_.createdBy||"unknown",createdBy:_.createdBy||"unknown",createdAt:_.createdAt||new Date,tagline:_.tagline,story:_.story,team:_.team||[],website:_.website,appStore:_.appStore,playStore:_.playStore,demoUrl:_.demoUrl,contactEmail:_.contactEmail,contactPhone:_.contactPhone,slug:A,status:_.status||"active",problem:_.problem,solution:_.solution,productVideo:_.productVideo,pitchDeck:_.pitchDeck,qrCode:_.qrCode,collaborationMessage:_.collaborationMessage,individualPitches:_.individualPitches||[]};return console.log("Transformed startup data:",P),P})),x=f.docs.map(w=>{const _={id:w.id,...w.data()};return console.log("Comment data:",_),_});console.log("Total startups found:",g.length),console.log("Total comments found:",x.length),console.log("Startups with IDs:",g.map(w=>({id:w.id,name:w.name,sector:w.sector}))),n(g),r(x)}catch(h){console.error("Error fetching data:",h),alert(`Error fetching data: ${h.message}`)}finally{a(!1)}},u=async(h,f)=>{if(!t){console.error("No current user found");return}if(!h){console.error("No startup ID provided"),alert("Error: No startup ID provided");return}try{console.log(`Handling ${f} interest for startup ${h} by user ${t.uid}`);const g=je(G,"startups",h),x=e.find(k=>k.id===h);if(!x){console.error(`Startup with id ${h} not found in local data`),console.log("Available startups:",e.map(k=>({id:k.id,name:k.name}))),alert("Error: Startup not found. Please refresh the page.");return}const w=x.interestedInvestors||[],_=x.hiringInvestors||[],A=w.includes(t.uid),P=_.includes(t.uid);console.log(`Current state - Interested: ${A}, Hiring: ${P}`),console.log("Startup data:",x),f==="investment"?A?(console.log("Removing investment interest"),await ys(g,{interestedInvestors:Jh(t.uid)})):(console.log("Adding investment interest"),await ys(g,{interestedInvestors:Sl(t.uid)})):P?(console.log("Removing hiring interest"),await ys(g,{hiringInvestors:Jh(t.uid)})):(console.log("Adding hiring interest"),await ys(g,{hiringInvestors:Sl(t.uid)})),console.log("Interest updated successfully, refreshing data..."),await c()}catch(g){console.error("Error updating interest:",g),alert(`Error updating interest: ${g.message}`)}},d=async(h,f,g)=>{if(!t){console.error("No current user found");return}if(!h){console.error("No startup ID provided"),alert("Error: No startup ID provided");return}if(!f||f.trim()===""){console.error("No comment text provided"),alert("Error: Please enter a comment");return}const x=g||"general";try{console.log(`Submitting comment for startup ${h}:`,{comment:f.trim(),type:x,investorId:t.uid,investorName:t.displayName||t.email});const w={investorId:t.uid,investorName:t.displayName||t.email,startupId:h,comment:f.trim(),timestamp:new Date,type:x};console.log("Adding comment to Firestore:",w),await Xt(ue(G,"comments"),w),console.log("Comment added successfully, refreshing data..."),await c(),alert("Comment submitted successfully!")}catch(w){console.error("Error submitting comment:",w),alert(`Error submitting comment: ${w.message}`)}};return i?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:o.jsx("div",{className:"text-white text-xl",children:"Loading investor dashboard..."})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black",children:[o.jsx("div",{className:"py-20",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Investor Dashboard"}),o.jsxs("p",{className:"text-xl text-white/80",children:["Welcome, ",t==null?void 0:t.email,". Discover and invest in promising startups."]})]}),o.jsxs(W.div,{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-12",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",children:[o.jsx(Jn,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:e.length}),o.jsx("p",{className:"text-white/70",children:"Total Startups"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",children:[o.jsx(Jr,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:e.reduce((h,f)=>h+f.interestedInvestors.length,0)}),o.jsx("p",{className:"text-white/70",children:"Investment Interests"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",children:[o.jsx(ku,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:e.reduce((h,f)=>h+f.hiringInvestors.length,0)}),o.jsx("p",{className:"text-white/70",children:"Hiring Requests"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",children:[o.jsx(NC,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:Array.from(new Set(e.map(h=>h.sector))).length}),o.jsx("p",{className:"text-white/70",children:"Sectors"})]})]})]})}),o.jsx(Jx,{isInvestorView:!0,startups:e,onInterestClick:u,onCommentSubmit:d,currentUser:t,comments:s})]})},BC=()=>{const{currentUser:t}=mt(),[e,n]=C.useState([]),[s,r]=C.useState([]),[i,a]=C.useState(!0),[c,u]=C.useState("all");C.useEffect(()=>{d()},[t]),C.useEffect(()=>{r(c==="all"?e:e.filter(f=>f.sector===c))},[e,c]);const d=async()=>{if(!(t!=null&&t.collegeId)){console.error("No college ID found for user"),a(!1);return}try{a(!0),console.log("Fetching startups for college:",t.collegeId);const f=ue(G,"startups"),g=Zo(f,zg("collegeId","==",t.collegeId)),w=(await Te(g)).docs.map(_=>({id:_.id,..._.data()}));console.log("Found startups:",w.length),n(w)}catch(f){console.error("Error fetching college startups:",f)}finally{a(!1)}},h=["all",...Array.from(new Set(e.map(f=>f.sector)))];return i?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:o.jsx("div",{className:"text-white text-xl",children:"Loading college dashboard..."})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black py-20",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"College Dashboard"}),o.jsxs("p",{className:"text-xl text-white/80",children:["Welcome, ",t==null?void 0:t.email,". Monitor your college's startup ecosystem."]})]}),o.jsxs(W.div,{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-12",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",children:[o.jsx(Jn,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:e.length}),o.jsx("p",{className:"text-white/70",children:"Total Startups"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",children:[o.jsx(Jr,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:e.reduce((f,g)=>f+g.interestedInvestors.length,0)}),o.jsx("p",{className:"text-white/70",children:"Investment Interests"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",children:[o.jsx($n,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:e.reduce((f,g)=>f+g.hiringInvestors.length,0)}),o.jsx("p",{className:"text-white/70",children:"Hiring Requests"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",children:[o.jsx(ku,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:Array.from(new Set(e.map(f=>f.sector))).length}),o.jsx("p",{className:"text-white/70",children:"Sectors"})]})]}),o.jsx(W.div,{className:"mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("label",{className:"text-white font-medium",children:"Filter by Sector:"}),o.jsx("select",{value:c,onChange:f=>u(f.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-[#e86888] transition-colors",children:h.map(f=>o.jsx("option",{value:f,className:"bg-gray-800",children:f==="all"?"All Sectors":f},f))})]})}),o.jsx(W.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:s.map((f,g)=>o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 hover:bg-white/10 transition-all duration-300",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:g*.1},children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-[#e86888] to-[#7d7eed] rounded-full flex items-center justify-center overflow-hidden",children:o.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:f.name.split(" ").map(x=>x[0]).join("")})})}),f.special&&o.jsx("span",{className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-3 py-1 rounded-full text-xs font-medium",children:f.special})]}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:f.name}),o.jsx("p",{className:"text-white/70 mb-4",children:f.pitch}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[o.jsx("span",{className:"bg-[#e86888]/20 text-white px-3 py-1 rounded-full text-sm",children:f.sector}),f.badges.map(x=>o.jsx("span",{className:"bg-[#7d7eed]/20 text-white px-3 py-1 rounded-full text-sm",children:x},x))]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-white/60",children:"Investment Interests:"}),o.jsx("span",{className:"text-white font-medium",children:f.interestedInvestors.length})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-white/60",children:"Hiring Requests:"}),o.jsx("span",{className:"text-white font-medium",children:f.hiringInvestors.length})]})]})]},f.id))}),s.length===0&&o.jsx("div",{className:"text-center text-white/60 text-xl",children:e.length===0?"No startups found for your college.":"No startups found for the selected sector."})]})})},$C=()=>{const{currentUser:t}=mt(),[e,n]=C.useState([]),[s,r]=C.useState([]),[i,a]=C.useState([]),[c,u]=C.useState(!0),[d,h]=C.useState("interests"),[f,g]=C.useState(!1),[x,w]=C.useState({email:"",password:"",role:"investor",collegeId:"",investorId:"",displayName:""});C.useEffect(()=>{_()},[]);const _=async()=>{try{u(!0),console.log("Fetching admin data...");const[y,b,T]=await Promise.all([Te(ue(G,"startups")),Te(ue(G,"users")),Te(ue(G,"comments"))]),N=y.docs.map(X=>{const Z=X.data();return console.log("Startup data:",X.id,Z),{id:X.id,name:Z.name||"Unknown Startup",pitch:Z.pitch||"",sector:Z.sector||"Technology",badges:Z.badges||[],special:Z.special||null,collegeId:Z.collegeId||"",createdBy:Z.createdBy||"",createdAt:Z.createdAt||new Date,interestedInvestors:Z.interestedInvestors||[],hiringInvestors:Z.hiringInvestors||[]}}),j=b.docs.map(X=>({uid:X.id,...X.data()})),I=T.docs.map(X=>{const Z=X.data();console.log("Raw comment data:",{id:X.id,...Z});let at;return Z.timestamp?Z.timestamp.toDate?at=Z.timestamp.toDate():Z.timestamp instanceof Date?at=Z.timestamp:at=new Date(Z.timestamp):at=new Date,{id:X.id,investorId:Z.investorId||"",investorName:Z.investorName||"Unknown Investor",startupId:Z.startupId||"",comment:Z.comment||"",timestamp:at,type:Z.type||"general"}});console.log("Found startups:",N.length),console.log("Found users:",j.length),console.log("Found comments:",I.length),console.log("Comments data:",I),console.log("Comments with details:",I.map(X=>({id:X.id,investorName:X.investorName,startupName:P(X.startupId),comment:X.comment,type:X.type,timestamp:X.timestamp}))),console.log("Startups with investors:",N.filter(X=>{var Z,at;return((Z=X.interestedInvestors)==null?void 0:Z.length)>0||((at=X.hiringInvestors)==null?void 0:at.length)>0})),n(N),r(j),a(I)}catch(y){console.error("Error fetching admin data:",y),alert(`Error fetching data: ${y.message}`)}finally{u(!1)}},A=y=>{const b=s.find(T=>T.uid===y);return(b==null?void 0:b.email)||y},P=y=>{const b=e.find(T=>T.id===y);return(b==null?void 0:b.name)||y},k=e.flatMap(y=>{if(!y)return[];const b=y.interestedInvestors||[],T=y.hiringInvestors||[];return[...b.map(N=>({type:"investment",investorId:N,startupId:y.id,startupName:y.name,sector:y.sector})),...T.map(N=>({type:"hiring",investorId:N,startupId:y.id,startupName:y.name,sector:y.sector}))]}),S=async y=>{y.preventDefault();try{console.log("Creating new user:",x.email);const b=await Vr(it,x.email,x.password);console.log("Firebase Auth user created:",b.user.uid);const T={uid:b.user.uid,email:x.email,role:x.role,displayName:x.displayName,...x.collegeId&&{collegeId:x.collegeId},...x.investorId&&{investorId:x.investorId},createdAt:new Date};await ht(je(G,"users",b.user.uid),T),r([...s,T]),w({email:"",password:"",role:"investor",collegeId:"",investorId:"",displayName:""}),g(!1),console.log("User created successfully - they can now login!"),alert(`User created successfully!
Email: ${x.email}
Password: ${x.password}

Share these credentials with the user.`)}catch(b){console.error("Error creating user:",b),b.code==="auth/email-already-in-use"?alert("User with this email already exists!"):alert(`Error creating user: ${b.message}`)}},M=async y=>{if(confirm("Are you sure you want to delete this user?"))try{await vE(je(G,"users",y)),await _(),alert("User deleted successfully!")}catch(b){console.error("Error deleting user:",b),alert(`Error deleting user: ${b.message}`)}},B=async()=>{try{const y={investorId:"test-investor-id",investorName:"Test Investor (ram@gmail.com)",startupId:"test-startup-id",comment:"This is a test comment from admin dashboard to verify comment storage and display",timestamp:new Date,type:"general"};console.log("Adding test comment:",y);const b=await Xt(ue(G,"comments"),y);console.log("Test comment added with ID:",b.id),await _(),alert("Test comment added successfully! Check the comments section.")}catch(y){console.error("Error adding test comment:",y),alert(`Error adding test comment: ${y.message}`)}},O=async()=>{try{const y=e[0],b=s.find(j=>j.role==="investor");if(!y||!b){alert("No startups or investors found for testing");return}const T={investorId:b.uid,investorName:b.email||"Test Investor",startupId:y.id,comment:`Real test comment for ${y.name} from ${b.email}`,timestamp:new Date,type:"investment"};console.log("Adding real test comment:",T);const N=await Xt(ue(G,"comments"),T);console.log("Real test comment added with ID:",N.id),await _(),alert("Real test comment added successfully! Check the comments section.")}catch(y){console.error("Error adding real test comment:",y),alert(`Error adding real test comment: ${y.message}`)}},E=async()=>{try{console.log("Checking comments in database...");const y=ue(G,"comments"),b=await Te(y);console.log("Total comments in database:",b.docs.length);const T=b.docs.map(N=>{const j=N.data();return console.log("Comment from database:",{id:N.id,...j}),{id:N.id,...j}});alert(`Found ${T.length} comments in database. Check console for details.`),console.log("All comments from database:",T)}catch(y){console.error("Error checking comments:",y),alert(`Error checking comments: ${y.message}`)}};return c?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:o.jsx("div",{className:"text-white text-xl",children:"Loading admin dashboard..."})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black py-20",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Admin Dashboard"}),o.jsxs("p",{className:"text-xl text-white/80",children:["Welcome, ",t==null?void 0:t.email,". Manage users and monitor investor interests."]})]}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:[o.jsx("button",{onClick:()=>h("interests"),className:`px-6 py-3 rounded-full font-medium transition-all duration-300 ${d==="interests"?"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:"Investment Interests"}),o.jsx("button",{onClick:()=>h("hiring"),className:`px-6 py-3 rounded-full font-medium transition-all duration-300 ${d==="hiring"?"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:"Hiring Requests"}),o.jsx("button",{onClick:()=>h("comments"),className:`px-6 py-3 rounded-full font-medium transition-all duration-300 ${d==="comments"?"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:"Investor Comments"}),o.jsx("button",{onClick:()=>h("users"),className:`px-6 py-3 rounded-full font-medium transition-all duration-300 ${d==="users"?"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:"Manage Users"}),o.jsx("button",{onClick:()=>h("overview"),className:`px-6 py-3 rounded-full font-medium transition-all duration-300 ${d==="overview"?"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:"Overview"})]}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[o.jsx("a",{href:"/admin/invite",className:"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-full font-medium transition-all duration-300 hover:scale-105",children:"🚀 Invite Startups"}),o.jsx("a",{href:"/admin/email-test",className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full font-medium transition-all duration-300 hover:scale-105",children:"📧 Test Emails"}),o.jsx("a",{href:"/admin/auth-test",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-full font-medium transition-all duration-300 hover:scale-105",children:"🔐 Test Auth"}),o.jsx("a",{href:"/admin/profile-manager",className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-full font-medium transition-all duration-300 hover:scale-105",children:"📄 Profile Manager"}),o.jsx("a",{href:"/admin/comment-test",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-full font-medium transition-all duration-300 hover:scale-105",children:"💬 Test Comments"}),o.jsx("a",{href:"/admin/comment-debug",className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-full font-medium transition-all duration-300 hover:scale-105",children:"🔍 Comment Debug"})]}),d==="interests"&&o.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-8 text-center",children:"Investment Interests"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.filter(y=>y.type==="investment").map((y,b)=>o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:b*.1},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#e86888] to-[#7d7eed] rounded-full flex items-center justify-center",children:o.jsx(Jr,{className:"text-white",size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold",children:"Investment Interest"}),o.jsx("p",{className:"text-white/60 text-sm",children:y.sector})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60 text-sm",children:"Investor:"}),o.jsx("p",{className:"text-white font-medium",children:A(y.investorId)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60 text-sm",children:"Startup:"}),o.jsx("p",{className:"text-white font-medium",children:y.startupName})]})]})]},`${y.investorId}-${y.startupId}`))})]}),d==="hiring"&&o.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-8 text-center",children:"Hiring Requests"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.filter(y=>y.type==="hiring").map((y,b)=>o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:b*.1},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#7d7eed] to-[#e86888] rounded-full flex items-center justify-center",children:o.jsx($n,{className:"text-white",size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold",children:"Hiring Request"}),o.jsx("p",{className:"text-white/60 text-sm",children:y.sector})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60 text-sm",children:"Investor:"}),o.jsx("p",{className:"text-white font-medium",children:A(y.investorId)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60 text-sm",children:"Startup:"}),o.jsx("p",{className:"text-white font-medium",children:y.startupName})]})]})]},`${y.investorId}-${y.startupId}`))})]}),d==="comments"&&o.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Investor Comments (",i.length,")"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:_,className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 flex items-center gap-2",children:[o.jsx(ps,{size:16}),"Refresh Data"]}),o.jsxs("button",{onClick:B,className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 flex items-center gap-2",children:[o.jsx(ps,{size:16}),"Test Comment"]}),o.jsxs("button",{onClick:O,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 flex items-center gap-2",children:[o.jsx(ps,{size:16}),"Add Real Comment"]}),o.jsxs("button",{onClick:E,className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 flex items-center gap-2",children:[o.jsx(ps,{size:16}),"Check DB Comments"]})]})]}),(i||[]).length>0?o.jsx("div",{className:"space-y-6",children:Object.entries(i.reduce((y,b)=>{const T=b.investorId||b.investorName;return y[T]||(y[T]=[]),y[T].push(b),y},{})).map(([y,b])=>{var T;return o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-white/10",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-[#e86888] to-[#7d7eed] rounded-full flex items-center justify-center",children:o.jsx(Xl,{className:"text-white",size:24})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-semibold text-lg",children:((T=b[0])==null?void 0:T.investorName)||"Unknown Investor"}),o.jsxs("p",{className:"text-white/60 text-sm",children:["Investor ID: ",y]}),o.jsxs("p",{className:"text-white/60 text-sm",children:["Total Comments: ",b.length]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map((N,j)=>o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-xl p-4 border border-white/10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:j*.1},children:[o.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:o.jsx(ps,{className:"text-white",size:16})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-white font-medium text-sm",children:P(N.startupId)}),o.jsx("p",{className:"text-white/60 text-xs",children:new Date(N.timestamp).toLocaleString()})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60 text-xs",children:"Comment:"}),o.jsx("p",{className:"text-white/90 text-sm mt-1",children:N.comment})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${N.type==="investment"?"bg-green-500/20 text-green-400":N.type==="hiring"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:N.type}),o.jsx("span",{className:"text-white/60 text-xs",children:new Date(N.timestamp).toLocaleDateString()})]})]})]},N.id))})]},y)})}):o.jsx("div",{className:"text-center text-white/60 text-xl",children:"No comments from investors yet."}),o.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[o.jsx("h3",{className:"text-white font-semibold mb-4",children:"Debug Information"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Total Comments:"})," ",i.length]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Comments Data:"}),o.jsx("pre",{className:"text-white/80 text-xs mt-2 bg-black/20 p-3 rounded-md overflow-auto max-h-40",children:JSON.stringify(i,null,2)})]})]})]})]}),d==="users"&&o.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Manage Users"}),o.jsxs("button",{onClick:()=>g(!0),className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 flex items-center gap-2",children:[o.jsx(MC,{size:16}),"Add User"]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(s||[]).map((y,b)=>o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:b*.1},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#e86888] to-[#7d7eed] rounded-full flex items-center justify-center",children:o.jsx($n,{className:"text-white",size:20})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-semibold capitalize",children:y.role}),o.jsx("p",{className:"text-white/60 text-sm",children:y.email})]}),o.jsx("button",{onClick:()=>M(y.uid),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete user",children:o.jsx(VC,{size:16})})]}),o.jsxs("div",{className:"space-y-2",children:[y.displayName&&o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60 text-sm",children:"Name:"}),o.jsx("p",{className:"text-white font-medium",children:y.displayName})]}),y.collegeId&&o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60 text-sm",children:"College ID:"}),o.jsx("p",{className:"text-white font-medium",children:y.collegeId})]}),y.investorId&&o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60 text-sm",children:"Investor ID:"}),o.jsx("p",{className:"text-white font-medium",children:y.investorId})]})]})]},y.uid))}),f&&o.jsx(W.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsxs(W.div,{className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 w-full max-w-md border border-white/20",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[o.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Add New User"}),o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),o.jsx("input",{type:"email",value:x.email,onChange:y=>w({...x,email:y.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter email",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Password"}),o.jsx("input",{type:"password",value:x.password,onChange:y=>w({...x,password:y.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter password (min 6 characters)",minLength:6,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Display Name"}),o.jsx("input",{type:"text",value:x.displayName,onChange:y=>w({...x,displayName:y.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter display name",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Role"}),o.jsxs("select",{value:x.role,onChange:y=>w({...x,role:y.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-[#e86888] transition-colors",children:[o.jsx("option",{value:"investor",children:"Investor"}),o.jsx("option",{value:"college",children:"College"}),o.jsx("option",{value:"admin",children:"Admin"})]})]}),x.role==="college"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"College ID"}),o.jsx("input",{type:"text",value:x.collegeId,onChange:y=>w({...x,collegeId:y.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter college ID",required:!0})]}),x.role==="investor"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Investor ID"}),o.jsx("input",{type:"text",value:x.investorId,onChange:y=>w({...x,investorId:y.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] transition-colors",placeholder:"Enter investor ID",required:!0})]}),o.jsxs("div",{className:"bg-blue-500/20 border border-blue-500/50 rounded-lg p-4 mt-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(AC,{className:"text-blue-400",size:16}),o.jsx("span",{className:"text-blue-400 font-medium",children:"Login Credentials"})]}),o.jsx("p",{className:"text-blue-200 text-sm",children:"The user will be able to login immediately with the email and password you provide."})]}),o.jsxs("div",{className:"flex gap-4 mt-6",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105",children:"Create User"}),o.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 bg-white/10 text-white py-3 rounded-lg font-semibold transition-all duration-300 hover:bg-white/20",children:"Cancel"})]})]})]})})]}),d==="overview"&&o.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-8 text-center",children:"System Overview"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[o.jsx(Jn,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:e.length}),o.jsx("p",{className:"text-white/70",children:"Total Startups"})]}),o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[o.jsx($n,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:s.filter(y=>y.role==="investor").length}),o.jsx("p",{className:"text-white/70",children:"Total Investors"})]}),o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[o.jsx(Jn,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:s.filter(y=>y.role==="college").length}),o.jsx("p",{className:"text-white/70",children:"Total Colleges"})]}),o.jsxs(W.div,{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[o.jsx(Jr,{className:"text-white mx-auto mb-4",size:32}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:k.length}),o.jsx("p",{className:"text-white/70",children:"Total Interests"})]})]})]}),d==="interests"&&k.filter(y=>y.type==="investment").length===0&&o.jsx("div",{className:"text-center text-white/60 text-xl",children:"No investment interests found."}),d==="hiring"&&k.filter(y=>y.type==="hiring").length===0&&o.jsx("div",{className:"text-center text-white/60 text-xl",children:"No hiring requests found."})]})})},zC=()=>{const[t,e]=C.useState(!1),[n,s]=C.useState(!1),{currentUser:r,logout:i}=mt(),a=Co(),c=E0();C.useEffect(()=>{const _=()=>{s(window.scrollY>50)};return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]);const u=[{name:"Home",href:"#hero"},{name:"About",href:"#about"},{name:"Startups",href:"#startups"},{name:"Creators",href:"#creators"},{name:"Journey",href:"#journey"},{name:"Mentors",href:"#mentors"},{name:"Vision",href:"#vision"},{name:"Gallery",href:"#gallery"},{name:"Join",href:"#join"}],d=_=>{const A=document.querySelector(_);A==null||A.scrollIntoView({behavior:"smooth"}),e(!1)},h=async()=>{try{await i(),a("/")}catch(_){console.error("Failed to log out:",_)}},g=(()=>{if(!r)return null;switch(r.role){case"investor":return{name:"Investor Dashboard",href:"/investor-dashboard"};case"college":return{name:"College Dashboard",href:"/college-dashboard"};case"admin":return{name:"Admin Dashboard",href:"/admin-dashboard"};default:return null}})(),x=c.pathname==="/login"||c.pathname==="/register",w=c.pathname.includes("-dashboard");return o.jsxs(W.nav,{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${n?"bg-black/20 backdrop-blur-md border-b border-white/10":"bg-transparent"}`,initial:{y:-100},animate:{y:0},transition:{duration:.6},children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsx(W.div,{className:"flex-shrink-0",whileHover:{scale:1.05},children:o.jsx(cr,{to:"/",children:o.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-[#e86888] to-[#7d7eed] bg-clip-text text-transparent",children:"JAZBAA 4.0"})})}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[!x&&!w&&u.map(_=>o.jsx("button",{onClick:()=>d(_.href),className:"text-white hover:text-[#e86888] px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:_.name},_.name)),r?o.jsxs("div",{className:"flex items-center space-x-4 ml-4",children:[g&&o.jsx(cr,{to:g.href,className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105",children:g.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Xl,{className:"text-white",size:16}),o.jsx("span",{className:"text-white text-sm",children:r.email})]}),o.jsxs("button",{onClick:h,className:"text-white hover:text-[#e86888] px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 flex items-center gap-2",children:[o.jsx(vf,{size:16}),"Logout"]})]}):o.jsx("div",{className:"flex items-center space-x-4 ml-4",children:o.jsx(cr,{to:"/login",className:"text-white hover:text-[#e86888] px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:"Login"})})]})}),o.jsx("div",{className:"md:hidden",children:o.jsx("button",{onClick:()=>e(!t),className:"text-white hover:text-[#e86888] transition-colors duration-200",children:t?o.jsx(jo,{size:24}):o.jsx(CC,{size:24})})})]})}),o.jsx(ix,{children:t&&o.jsx(W.div,{className:"md:hidden bg-black/90 backdrop-blur-md",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:o.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[!x&&!w&&u.map(_=>o.jsx("button",{onClick:()=>d(_.href),className:"text-white hover:text-[#e86888] block px-3 py-2 rounded-md text-base font-medium w-full text-left transition-colors duration-200",children:_.name},_.name)),r?o.jsxs("div",{className:"border-t border-white/20 pt-4 mt-4",children:[g&&o.jsx(cr,{to:g.href,className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white block px-3 py-2 rounded-md text-base font-medium w-full text-center transition-all duration-300 hover:scale-105",children:g.name}),o.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2",children:[o.jsx(Xl,{className:"text-white",size:16}),o.jsx("span",{className:"text-white text-sm",children:r.email})]}),o.jsxs("button",{onClick:h,className:"text-white hover:text-[#e86888] block px-3 py-2 rounded-md text-base font-medium w-full text-left transition-colors duration-200 flex items-center gap-2",children:[o.jsx(vf,{size:16}),"Logout"]})]}):o.jsx("div",{className:"border-t border-white/20 pt-4 mt-4 space-y-2",children:o.jsx(cr,{to:"/login",className:"text-white hover:text-[#e86888] block px-3 py-2 rounded-md text-base font-medium w-full text-left transition-colors duration-200",children:"Login"})})]})})})]})},qC=()=>{const[t,e]=C.useState(!1),n="xdVdOeRmEKg",s=()=>{e(!0)};return o.jsxs("section",{id:"hero",className:"relative min-h-screen bg-black overflow-hidden pt-20 md:pt-24",children:[o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1/5 bg-white z-10"}),o.jsxs("div",{className:"relative z-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col justify-center min-h-screen",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center mb-12 pt-8 lg:pt-0",children:[o.jsxs("div",{className:"text-left",children:[o.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold leading-tight",children:[o.jsx("span",{className:"bg-gradient-to-r from-pink-400 via-purple-500 to-purple-600 bg-clip-text text-transparent",children:"Students. Startups."}),o.jsx("br",{}),o.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-purple-500 to-cyan-400 bg-clip-text text-transparent",children:"Disruption Begins."})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("span",{className:"text-white text-base",children:"Established"}),o.jsx("div",{className:"text-white text-2xl font-bold",children:"2019"})]})]}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"border-l-2 border-white/30 pl-6 mb-8",children:o.jsxs("p",{className:"text-white text-lg leading-relaxed",children:[o.jsx("span",{className:"font-semibold",children:"Powered by LWJAZBAA"})," — India's biggest student-led startup revolution, where engineering minds become real-world creators."]})}),o.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-pink-400 text-4xl md:text-5xl font-bold mb-1",children:"134+"}),o.jsx("div",{className:"text-white text-sm",children:"Startups"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-4xl md:text-5xl font-bold mb-1",children:"500+"}),o.jsx("div",{className:"text-white text-sm",children:"Dreamers"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-cyan-400 text-4xl md:text-5xl font-bold mb-1",children:"45"}),o.jsx("div",{className:"text-white text-sm",children:"Days"})]})]})]})]}),o.jsx("div",{className:"flex justify-center pb-8",children:o.jsxs("div",{className:"relative w-full max-w-5xl z-30",children:[t?o.jsx("div",{className:"w-full h-80 md:h-96 rounded-3xl overflow-hidden shadow-xl",children:o.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${n}?autoplay=1&rel=0&modestbranding=1`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded-3xl"})}):o.jsx(o.Fragment,{children:o.jsxs("div",{className:"w-full h-80 md:h-96 rounded-3xl overflow-hidden relative cursor-pointer group shadow-xl",onClick:s,children:[o.jsx("img",{src:`https://img.youtube.com/vi/${n}/maxresdefault.jpg`,alt:"YouTube Video Thumbnail",className:"w-full h-full object-cover",onError:r=>{r.target.src=`https://img.youtube.com/vi/${n}/hqdefault.jpg`}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600/40 via-pink-500/30 to-purple-800/40"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center group-hover:bg-white/30 transition-all duration-300",children:o.jsx("div",{className:"w-0 h-0 border-l-[20px] border-l-white border-t-[12px] border-t-transparent border-b-[12px] border-b-transparent ml-1"})})})]})}),o.jsx("div",{className:"relative z-40 mt-8",children:o.jsx("p",{className:"text-gray-700 text-xl md:text-2xl font-semibold text-center",children:"Our Engineers Can be The Creators - Mr Vimal Daga"})})]})})]})]})};var Zl=new Map,Bi=new WeakMap,wf=0,WC=void 0;function HC(t){return t?(Bi.has(t)||(wf+=1,Bi.set(t,wf.toString())),Bi.get(t)):"0"}function GC(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?HC(t.root):t[e]}`).toString()}function KC(t){const e=GC(t);let n=Zl.get(e);if(!n){const s=new Map;let r;const i=new IntersectionObserver(a=>{a.forEach(c=>{var u;const d=c.isIntersecting&&r.some(h=>c.intersectionRatio>=h);t.trackVisibility&&typeof c.isVisible>"u"&&(c.isVisible=d),(u=s.get(c.target))==null||u.forEach(h=>{h(d,c)})})},t);r=i.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:i,elements:s},Zl.set(e,n)}return n}function QC(t,e,n={},s=WC){if(typeof window.IntersectionObserver>"u"&&s!==void 0){const u=t.getBoundingClientRect();return e(s,{isIntersecting:s,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:u,intersectionRect:u,rootBounds:u}),()=>{}}const{id:r,observer:i,elements:a}=KC(n),c=a.get(t)||[];return a.has(t)||a.set(t,c),c.push(e),i.observe(t),function(){c.splice(c.indexOf(e),1),c.length===0&&(a.delete(t),i.unobserve(t)),a.size===0&&(i.disconnect(),Zl.delete(r))}}function Nn({threshold:t,delay:e,trackVisibility:n,rootMargin:s,root:r,triggerOnce:i,skip:a,initialInView:c,fallbackInView:u,onChange:d}={}){var h;const[f,g]=C.useState(null),x=C.useRef(d),[w,_]=C.useState({inView:!!c,entry:void 0});x.current=d,C.useEffect(()=>{if(a||!f)return;let S;return S=QC(f,(M,B)=>{_({inView:M,entry:B}),x.current&&x.current(M,B),B.isIntersecting&&i&&S&&(S(),S=void 0)},{root:r,rootMargin:s,threshold:t,trackVisibility:n,delay:e},u),()=>{S&&S()}},[Array.isArray(t)?t.toString():t,f,r,s,i,a,n,u,e]);const A=(h=w.entry)==null?void 0:h.target,P=C.useRef(void 0);!f&&A&&!i&&!a&&P.current!==A&&(P.current=A,_({inView:!!c,entry:void 0}));const k=[g,w.inView,w.entry];return k.ref=k[0],k.inView=k[1],k.entry=k[2],k}const JC=()=>{const[t,e]=Nn({triggerOnce:!0,threshold:.2}),n=[{number:"134",label:"Startups",icon:o.jsx(Jn,{className:"text-white",size:24})},{number:"500+",label:"Creators",icon:o.jsx($n,{className:"text-white",size:24})},{number:"100+",label:"Colleges",icon:o.jsx(ku,{className:"text-white",size:24})},{number:"20+",label:"States",icon:o.jsx(Mu,{className:"text-white",size:24})},{number:"9",label:"Sectors",icon:o.jsx(Qx,{className:"text-white",size:24})}];return o.jsxs("section",{id:"about",className:"py-20 bg-gradient-to-br from-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#543ef7]/10 to-[#9cecd5]/10"}),o.jsxs("div",{ref:t,className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:e?{opacity:1,y:0}:{},transition:{duration:.8},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"The Creator Movement of India"}),o.jsxs("p",{className:"text-lg md:text-xl text-white/80 mb-4",children:["Powered by Young Innovators and Mentored by"," ",o.jsx("span",{className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] bg-clip-text text-transparent font-semibold",children:"Vimal Daga Sir"})]}),o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsx("p",{className:"text-white/70 text-lg leading-relaxed",children:"JAZBAA isn't just about building startups—it's about building the future of India. We believe every engineering student has the potential to solve real problems and create meaningful impact. Through intensive mentorship, collaborative learning, and relentless execution, we transform ideas into reality in just 72 hours."})})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-8",children:n.map((s,r)=>o.jsx(W.div,{className:"text-center group",initial:{opacity:0,scale:.8},animate:e?{opacity:1,scale:1}:{},transition:{duration:.6,delay:r*.1},children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 group-hover:border-[#e86888]/50 transition-all duration-300 group-hover:scale-105",children:[o.jsx("div",{className:"flex justify-center mb-4",children:s.icon}),o.jsx(W.div,{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-[#e86888] to-[#7d7eed] bg-clip-text text-transparent mb-2",initial:{opacity:0},animate:e?{opacity:1}:{},transition:{duration:1,delay:r*.2+.5},children:s.number}),o.jsx("p",{className:"text-white/80 font-medium",children:s.label})]})},s.label))})]})]})},YC=()=>{const[t,e]=Nn({triggerOnce:!0,threshold:.1}),n=[{name:"Priya Sharma",role:"Co-Founder, MediCare AI",college:"IIT Delhi",city:"New Delhi",status:"Open to Hire",hasPitch:!0},{name:"Rahul Kumar",role:"Founder, FarmSmart",college:"NIT Trichy",city:"Chennai",status:"Continuing Startup Journey",hasPitch:!0},{name:"Ananya Patel",role:"CTO, HealthBridge",college:"BITS Pilani",city:"Mumbai",status:"Open to Hire",hasPitch:!1},{name:"Vikram Singh",role:"CEO, PayEasy",college:"DTU Delhi",city:"Bangalore",status:"Continuing Startup Journey",hasPitch:!0},{name:"Sneha Reddy",role:"Co-Founder, CropGuard",college:"VIT Vellore",city:"Hyderabad",status:"Open to Hire",hasPitch:!0},{name:"Arjun Mehta",role:"Founder, MicroLend",college:"Manipal University",city:"Pune",status:"Continuing Startup Journey",hasPitch:!1}];return o.jsxs("section",{id:"creators",className:"py-20 bg-gradient-to-br from-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#543ef7]/10 to-[#9cecd5]/10"}),o.jsxs("div",{ref:t,className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:e?{opacity:1,y:0}:{},transition:{duration:.8},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Meet the Creators"}),o.jsx("p",{className:"text-xl text-white/80 max-w-3xl mx-auto",children:"The brilliant minds behind JAZBAA's success stories. Students who transformed from learners to leaders in just 72 hours."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((s,r)=>o.jsxs(W.div,{className:"group bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 hover:border-[#e86888]/50 transition-all duration-300 hover:scale-105",initial:{opacity:0,y:30},animate:e?{opacity:1,y:0}:{},transition:{duration:.6,delay:r*.1},children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-[#e86888] to-[#7d7eed] rounded-full mx-auto mb-4 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-2xl font-bold",children:s.name.split(" ").map(i=>i[0]).join("")})}),o.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:s.name}),o.jsx("p",{className:"text-[#e86888] font-medium mb-2",children:s.role}),o.jsxs("div",{className:"flex items-center justify-center gap-4 text-white/60 text-sm mb-4",children:[o.jsx("span",{children:s.college}),o.jsx("span",{children:"•"}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Mu,{size:12}),s.city]})]})]}),o.jsxs("div",{className:"flex justify-center gap-3 mb-4",children:[o.jsx("button",{className:"p-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors duration-200",children:o.jsx(Vu,{size:18})}),o.jsx("button",{className:"p-2 bg-gray-600/20 text-gray-400 rounded-lg hover:bg-gray-600/30 transition-colors duration-200",children:o.jsx(Du,{size:18})}),o.jsx("button",{className:"p-2 bg-purple-600/20 text-purple-400 rounded-lg hover:bg-purple-600/30 transition-colors duration-200",children:o.jsx(Kr,{size:18})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${s.status==="Open to Hire"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:s.status}),s.hasPitch&&o.jsxs("button",{className:"w-full mt-3 bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white py-2 rounded-lg font-medium opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center gap-2",children:[o.jsx(oa,{size:16}),"Watch My Pitch"]})]})]},s.name))}),o.jsx(W.div,{className:"text-center mt-12",initial:{opacity:0},animate:e?{opacity:1}:{},transition:{duration:.8,delay:.8},children:o.jsxs("button",{className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-8 py-4 rounded-full font-semibold text-lg transition-all duration-300 hover:scale-105 hover:shadow-xl flex items-center gap-2 mx-auto",children:["View All Creators",o.jsx(Pu,{size:20})]})})]})]})},XC=()=>{const[t,e]=Nn({triggerOnce:!0,threshold:.1}),n=[{day:"Day 1",title:"Team Formation & Ideation",description:"Students form diverse teams, brainstorm problems, and validate ideas through market research.",activities:["Team Building","Problem Identification","Market Research","Mentor Assignment"],color:"from-[#e86888] to-[#ff6b6b]"},{day:"Day 2",title:"UI/UX Design & Planning",description:"Teams create wireframes, design user interfaces on paper, and plan their technical architecture.",activities:["Wireframing","UI Design","User Journey Mapping","Tech Stack Planning"],color:"from-[#7d7eed] to-[#6c5ce7]"},{day:"Day 3",title:"Prototype & Pitch",description:"Final day to build working prototypes, prepare presentations, and pitch to investors.",activities:["Prototype Development","Pitch Preparation","Demo Recording","Final Presentations"],color:"from-[#9cecd5] to-[#00b894]"}];return o.jsxs("section",{id:"journey",className:"py-20 bg-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#e86888]/5 to-[#7d7eed]/5"}),o.jsxs("div",{ref:t,className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:e?{opacity:1,y:0}:{},transition:{duration:.8},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"The 72-Hour Journey"}),o.jsx("p",{className:"text-xl text-white/80 max-w-3xl mx-auto",children:"From idea to prototype in just three days. Here's how ordinary students transformed into extraordinary entrepreneurs."})]}),o.jsx("div",{className:"space-y-12",children:n.map((s,r)=>o.jsxs(W.div,{className:"relative",initial:{opacity:0,x:r%2===0?-50:50},animate:e?{opacity:1,x:0}:{},transition:{duration:.8,delay:r*.2},children:[o.jsxs("div",{className:`flex flex-col lg:flex-row items-center gap-8 ${r%2===1?"lg:flex-row-reverse":""}`,children:[o.jsxs("div",{className:"flex-1 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-r ${s.color} flex items-center justify-center`,children:o.jsx(TC,{className:"text-white",size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-white",children:s.day}),o.jsx("h4",{className:"text-xl text-[#e86888] font-semibold",children:s.title})]})]}),o.jsx("p",{className:"text-white/70 text-lg leading-relaxed",children:s.description}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.activities.map(i=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-[#e86888] to-[#7d7eed] rounded-full"}),o.jsx("span",{className:"text-white/80 text-sm",children:i})]},i))})]}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-8 border border-white/10",children:[o.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg flex items-center justify-center",children:o.jsx(oa,{className:"text-white/60",size:48})}),o.jsxs("p",{className:"text-white/60 text-sm mt-4 text-center",children:["Watch ",s.day," highlights and learner stories"]})]})})]}),r<n.length-1&&o.jsx("div",{className:"flex justify-center my-8",children:o.jsx("div",{className:"w-px h-16 bg-gradient-to-b from-[#e86888] to-[#7d7eed]"})})]},s.day))}),o.jsx(W.div,{className:"text-center mt-16 space-y-4",initial:{opacity:0,y:30},animate:e?{opacity:1,y:0}:{},transition:{duration:.8,delay:1},children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs("button",{className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-8 py-4 rounded-full font-semibold text-lg transition-all duration-300 hover:scale-105 hover:shadow-xl flex items-center gap-2 justify-center",children:["Apply for Next JAZBAA",o.jsx(Pu,{size:20})]}),o.jsxs("button",{className:"bg-white/10 backdrop-blur-md text-white px-8 py-4 rounded-full font-semibold text-lg border border-white/20 transition-all duration-300 hover:bg-white/20 hover:scale-105 flex items-center gap-2 justify-center",children:["Bring JAZBAA to Campus",o.jsx(Jn,{size:20})]})]})})]})]})},ZC=[{name:"Dr. A. P. J. Abdul Kalam",image:"https://randomuser.me/api/portraits/men/32.jpg",description:"Visionary mentor inspiring innovation and leadership among students."},{name:"Ms. Kiran Bedi",image:"https://randomuser.me/api/portraits/women/44.jpg",description:"Renowned leader guiding students towards impactful social change."},{name:"Mr. Sundar Pichai",image:"https://randomuser.me/api/portraits/men/45.jpg",description:"Tech mentor encouraging creative problem-solving and entrepreneurship."},{name:"Ms. Indra Nooyi",image:"https://randomuser.me/api/portraits/women/47.jpg",description:"Business mentor fostering strategic thinking and growth mindset."},{name:"Mr. Ratan Tata",image:"https://randomuser.me/api/portraits/men/50.jpg",description:"Industry mentor supporting innovation and ethical leadership."},{name:"Ms. Nirmala Sitharaman",image:"https://randomuser.me/api/portraits/women/51.jpg",description:"Policy mentor guiding students in economic and financial innovation."},{name:"Mr. Mukesh Ambani",image:"https://randomuser.me/api/portraits/men/52.jpg",description:"Business mentor inspiring digital transformation and innovation."},{name:"Ms. Arundhati Bhattacharya",image:"https://randomuser.me/api/portraits/women/53.jpg",description:"Leadership mentor fostering women empowerment in technology."},{name:"Mr. Azim Premji",image:"https://randomuser.me/api/portraits/men/54.jpg",description:"Philanthropy mentor encouraging social impact through technology."},{name:"Ms. Shobhana Bhartia",image:"https://randomuser.me/api/portraits/women/55.jpg",description:"Media mentor guiding students in communication and innovation."}],eR=()=>{const[t,e]=Nn({triggerOnce:!0,threshold:.1}),[n,s]=C.useState(null);return o.jsxs("section",{id:"mentors",className:"py-20 bg-gradient-to-br from-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#543ef7]/10 to-[#9cecd5]/10"}),o.jsxs("div",{ref:t,className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:e?{opacity:1,y:0}:{},transition:{duration:.8},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Investors & Mentors Wall"}),o.jsx("p",{className:"text-xl text-white/80 max-w-3xl mx-auto",children:"Backed by industry leaders, supported by visionary investors, and guided by experienced mentors who believe in the power of student innovation."})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 mb-16",children:ZC.map((r,i)=>o.jsx(W.div,{className:"group text-center cursor-pointer",initial:{opacity:0,scale:.8},animate:e?{opacity:1,scale:n===i?1.12:1}:{},transition:{duration:.5,delay:i*.1},onClick:()=>s(i===n?null:i),whileTap:{scale:1.08},children:o.jsxs("div",{className:`bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 transition-all duration-300 h-80 w-full flex flex-col justify-center ${n===i?"ring-4 ring-[#e86888]/40 scale-110 z-10":"group-hover:scale-110 group-hover:ring-4 group-hover:ring-[#e86888]/40"}`,children:[o.jsx("div",{className:"w-40 h-40 mx-auto mb-6 rounded-xl overflow-hidden border-4 border-gradient-to-r from-[#e86888] to-[#7d7eed] flex items-center justify-center bg-gradient-to-r from-[#e86888] to-[#7d7eed]",children:o.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover"})}),o.jsx("h3",{className:"text-white font-semibold mb-2 text-lg",children:r.name}),o.jsx("p",{className:"text-white/70 text-sm",children:r.description})]})},r.name))})]})]})},tR=()=>{const[t,e]=Nn({triggerOnce:!0,threshold:.1});return o.jsxs("section",{id:"vision",className:"py-20 bg-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#e86888]/10 to-[#7d7eed]/10"}),o.jsxs("div",{ref:t,className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:e?{opacity:1,y:0}:{},transition:{duration:.8},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Founder Vision"}),o.jsx("h3",{className:"text-2xl md:text-3xl bg-gradient-to-r from-[#e86888] to-[#7d7eed] bg-clip-text text-transparent font-semibold mb-8",children:'"Every Student Deserves a Stage to Shine"'})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[o.jsx(W.div,{className:"space-y-6",initial:{opacity:0,x:-50},animate:e?{opacity:1,x:0}:{},transition:{duration:.8,delay:.2},children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-8 border border-white/10",children:[o.jsx("p",{className:"text-white/80 text-lg leading-relaxed mb-6",children:`"When I see the fire in a student's eyes, the passion to solve real problems, and the courage to take on challenges bigger than themselves, I see the future of India. JAZBAA isn't just about building startups—it's about building character, resilience, and the unwavering belief that you can change the world."`}),o.jsx("p",{className:"text-white/80 text-lg leading-relaxed mb-6",children:`"Every student who walks into JAZBAA walks out transformed. They don't just learn to code or design—they learn to lead, to fail, to get back up, and to never give up on their dreams. This is what India needs: not just engineers, but nation-builders."`}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-[#e86888] to-[#7d7eed] rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xl font-bold",children:"VD"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-semibold text-lg",children:"Vimal Daga Sir"}),o.jsx("p",{className:"text-white/60",children:"Founder & Mentor, JAZBAA"})]})]})]})}),o.jsxs(W.div,{className:"space-y-6",initial:{opacity:0,x:50},animate:e?{opacity:1,x:0}:{},transition:{duration:.8,delay:.4},children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-8 border border-white/10",children:[o.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg flex items-center justify-center mb-4",children:o.jsx(oa,{className:"text-white/60",size:64})}),o.jsx("p",{className:"text-white/60 text-center",children:"Watch Vimal Daga Sir's inspiring message about the future of student entrepreneurship"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-xl p-4 border border-white/10 text-center",children:[o.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-[#e86888] to-[#7d7eed] bg-clip-text text-transparent mb-2",children:"10,000+"}),o.jsx("p",{className:"text-white/60 text-sm",children:"Students Impacted"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-xl p-4 border border-white/10 text-center",children:[o.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-[#e86888] to-[#7d7eed] bg-clip-text text-transparent mb-2",children:"50+"}),o.jsx("p",{className:"text-white/60 text-sm",children:"Success Stories"})]})]})]})]})]})]})},nR=()=>{const[t,e]=Nn({triggerOnce:!0,threshold:.1}),n=[{type:"news",title:"Featured in Times of India",source:"TOI"},{type:"testimonial",title:"Student Success Story",author:"Priya S."},{type:"social",title:"LinkedIn Post Viral",engagement:"10K+ likes"},{type:"video",title:"Demo Day Highlights",duration:"5:30"},{type:"news",title:"TechCrunch Coverage",source:"TC"},{type:"testimonial",title:"Mentor Feedback",author:"Industry Expert"}];return o.jsxs("section",{id:"gallery",className:"py-20 bg-gradient-to-br from-gray-900 to-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#543ef7]/10 to-[#9cecd5]/10"}),o.jsxs("div",{ref:t,className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:e?{opacity:1,y:0}:{},transition:{duration:.8},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Media & Impact Gallery"}),o.jsx("p",{className:"text-xl text-white/80 max-w-3xl mx-auto",children:"Celebrating our journey through news features, testimonials, and the incredible transformations of our JAZBAA community."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:n.map((s,r)=>o.jsxs(W.div,{className:"group bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 hover:border-[#e86888]/50 transition-all duration-300 hover:scale-105",initial:{opacity:0,y:30},animate:e?{opacity:1,y:0}:{},transition:{duration:.6,delay:r*.1},children:[o.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg flex items-center justify-center mb-4",children:s.type==="video"?o.jsx(oa,{className:"text-white/60",size:32}):o.jsx(Kr,{className:"text-white/60",size:32})}),o.jsx("h3",{className:"text-white font-semibold mb-2",children:s.title}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.type==="news"?"bg-blue-500/20 text-blue-400":s.type==="testimonial"?"bg-green-500/20 text-green-400":s.type==="social"?"bg-purple-500/20 text-purple-400":"bg-red-500/20 text-red-400"}`,children:s.type}),o.jsx("span",{className:"text-white/60",children:s.source||s.author||s.engagement||s.duration})]})]},r))}),o.jsx(W.div,{className:"text-center space-y-4",initial:{opacity:0,y:30},animate:e?{opacity:1,y:0}:{},transition:{duration:.8,delay:.8},children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs("button",{className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-8 py-4 rounded-full font-semibold text-lg transition-all duration-300 hover:scale-105 hover:shadow-xl flex items-center gap-2 justify-center",children:["Submit Your JAZBAA Story",o.jsx(Kx,{size:20})]}),o.jsxs("button",{className:"bg-white/10 backdrop-blur-md text-white px-8 py-4 rounded-full font-semibold text-lg border border-white/20 transition-all duration-300 hover:bg-white/20 hover:scale-105 flex items-center gap-2 justify-center",children:["Download Media Kit",o.jsx(Kr,{size:20})]})]})})]})]})},sR=()=>{const[t,e]=Nn({triggerOnce:!0,threshold:.1}),n=[{title:"I'm a College",subtitle:"Bring JAZBAA to Campus",description:"Partner with us to transform your students into entrepreneurs",icon:o.jsx(Jn,{className:"text-white",size:32}),color:"from-[#e86888] to-[#ff6b6b]"},{title:"I'm a Company",subtitle:"Hire from JAZBAA",description:"Recruit passionate, skilled, and innovation-ready talent",icon:o.jsx(Hx,{className:"text-white",size:32}),color:"from-[#7d7eed] to-[#6c5ce7]"},{title:"I'm an Investor",subtitle:"Fund a Startup",description:"Invest in the next generation of Indian innovators",icon:o.jsx(Qx,{className:"text-white",size:32}),color:"from-[#9cecd5] to-[#00b894]"},{title:"I'm a Mentor",subtitle:"Share My Expertise",description:"Guide students and shape the future of entrepreneurship",icon:o.jsx($n,{className:"text-white",size:32}),color:"from-[#fd79a8] to-[#e84393]"},{title:"I'm a Student",subtitle:"Join the Next Cohort",description:"Transform your ideas into reality in just 72 hours",icon:o.jsx(Kx,{className:"text-white",size:32}),color:"from-[#fdcb6e] to-[#e17055]"}];return o.jsxs("section",{id:"join",className:"py-20 bg-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#e86888]/10 to-[#7d7eed]/10"}),o.jsxs("div",{ref:t,className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(W.div,{className:"text-center mb-16",initial:{opacity:0,y:50},animate:e?{opacity:1,y:0}:{},transition:{duration:.8},children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Join the Movement"}),o.jsx("p",{className:"text-xl text-white/80 max-w-3xl mx-auto",children:"Be part of India's largest student entrepreneurship movement. Choose your path and help us build the future, together."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:n.map((s,r)=>o.jsxs(W.div,{className:"group relative overflow-hidden bg-white/5 backdrop-blur-md rounded-2xl p-8 border border-white/10 hover:border-[#e86888]/50 transition-all duration-300 hover:scale-105",initial:{opacity:0,y:30},animate:e?{opacity:1,y:0}:{},transition:{duration:.6,delay:r*.1},children:[o.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-r ${s.color} flex items-center justify-center mb-6`,children:s.icon}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:s.title}),o.jsx("h4",{className:"text-lg text-[#e86888] font-semibold mb-4",children:s.subtitle}),o.jsx("p",{className:"text-white/70 mb-6 leading-relaxed",children:s.description}),o.jsxs("button",{className:"w-full bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white py-3 rounded-lg font-medium opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center gap-2",children:["Get Started ",o.jsx(Pu,{size:16})]})]},s.title))}),o.jsx(W.div,{className:"text-center",initial:{opacity:0,y:30},animate:e?{opacity:1,y:0}:{},transition:{duration:.8,delay:.8},children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-8 border border-white/10 max-w-2xl mx-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Ready to Make Impact?"}),o.jsx("p",{className:"text-white/70 mb-6",children:"Join thousands of students, mentors, and industry leaders who are building the future of India, one startup at a time."}),o.jsx("button",{className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white px-12 py-4 rounded-full font-semibold text-xl transition-all duration-300 hover:scale-105 hover:shadow-2xl",children:"Join JAZBAA Today"})]})})]})]})},rR=()=>o.jsxs("footer",{className:"bg-gradient-to-br from-gray-900 to-black py-16 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#543ef7]/5 to-[#9cecd5]/5"}),o.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-12",children:[o.jsxs("div",{className:"col-span-1 md:col-span-2",children:[o.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-[#e86888] to-[#7d7eed] bg-clip-text text-transparent mb-4",children:"JAZBAA 4.0"}),o.jsx("p",{className:"text-white/70 mb-6 leading-relaxed",children:"Empowering the next generation of Indian entrepreneurs through intensive learning, collaborative innovation, and relentless execution."}),o.jsxs("div",{className:"space-y-2 text-white/60",children:[o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx(Mu,{size:16}),"New Delhi, India"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx(Qr,{size:16}),"hello@jazbaa.com"]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-semibold mb-4",children:"Quick Links"}),o.jsxs("ul",{className:"space-y-2 text-white/60",children:[o.jsx("li",{children:o.jsx("a",{href:"#about",className:"hover:text-[#e86888] transition-colors duration-200",children:"About JAZBAA"})}),o.jsx("li",{children:o.jsx("a",{href:"#startups",className:"hover:text-[#e86888] transition-colors duration-200",children:"Startups"})}),o.jsx("li",{children:o.jsx("a",{href:"#creators",className:"hover:text-[#e86888] transition-colors duration-200",children:"Creators"})}),o.jsx("li",{children:o.jsx("a",{href:"#journey",className:"hover:text-[#e86888] transition-colors duration-200",children:"Journey"})}),o.jsx("li",{children:o.jsx("a",{href:"#mentors",className:"hover:text-[#e86888] transition-colors duration-200",children:"Mentors"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-semibold mb-4",children:"Newsletter"}),o.jsx("p",{className:"text-white/60 mb-4 text-sm",children:"Get inspiring stories from JAZBAA, weekly"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{type:"email",placeholder:"Your email",className:"w-full bg-white/10 backdrop-blur-md border border-white/20 rounded-lg px-4 py-2 text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]/50"}),o.jsx("button",{className:"w-full bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105",children:"Subscribe"})]})]})]}),o.jsxs("div",{className:"border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center",children:[o.jsx("p",{className:"text-white/60 text-sm mb-4 md:mb-0",children:"© 2024 JAZBAA 4.0. All rights reserved."}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("a",{href:"#",className:"text-white/60 hover:text-[#e86888] transition-colors duration-200",children:o.jsx(Vu,{size:20})}),o.jsx("a",{href:"#",className:"text-white/60 hover:text-[#e86888] transition-colors duration-200",children:o.jsx(Du,{size:20})}),o.jsx("a",{href:"#",className:"text-white/60 hover:text-[#e86888] transition-colors duration-200",children:o.jsx(Qr,{size:20})})]})]})]})]}),iR=()=>{const{currentUser:t}=mt(),[e,n]=C.useState(""),[s,r]=C.useState(null),[i,a]=C.useState([]),[c,u]=C.useState(!1),d=async()=>{try{const _=ue(G,"invites"),A=Zo(_,qg("invitedAt","desc")),P=await Te(A),k=[];P.forEach(S=>{const M=S.data();k.push({id:S.id,email:M.email,status:M.status,invitedBy:M.invitedBy,invitedAt:M.invitedAt.toDate(),token:M.token,startupSlug:M.startupSlug,inviteNumber:M.inviteNumber||1})}),a(k)}catch(_){console.error("Error fetching invites:",_)}};C.useEffect(()=>{d()},[]);const h=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),f=async _=>{if(_.preventDefault(),!e.trim()){r({type:"error",text:"Please enter an email address."});return}if(!t){r({type:"error",text:"You must be logged in to send invites."});return}u(!0),r(null);try{const A=i.filter(B=>B.email===e.trim()),P=h(),k={email:e.trim(),status:"pending",invitedBy:t.uid,invitedAt:new Date,token:P,inviteNumber:A.length+1},S=await Xt(ue(G,"invites"),k);console.log("Invite added to Firestore:",S.id);const M=`${window.location.origin}/register/${P}`;r({type:"success",text:`✅ Invite sent successfully to ${e.trim()}! 
        
📧 Invite link: ${M}
📋 Please send this link to the recipient manually.

💡 For automatic email sending, configure EmailJS in the email test page.`}),n(""),d()}catch(A){console.error("Error sending invite:",A),r({type:"error",text:"Failed to send invite. Please try again."})}finally{u(!1)}},g=_=>{const A=`${window.location.origin}/register/${_}`;navigator.clipboard.writeText(A),r({type:"success",text:"Invite link copied to clipboard!"})},x=_=>{const A=`${window.location.origin}/register/${_}`;window.open(A,"_blank")},w=i.reduce((_,A)=>(_[A.email]||(_[A.email]={count:0,statuses:[]}),_[A.email].count++,_[A.email].statuses.push(A.status),_),{});return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"🚀 Invite Startups"}),o.jsx("p",{className:"text-xl text-gray-300",children:"Send invitations to startup teams to join JAZBAA 4.0"})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📧 Send Invitation"}),o.jsxs("form",{onSubmit:f,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Startup Team Email"}),o.jsx("input",{type:"email",id:"email",value:e,onChange:_=>n(_.target.value),placeholder:"startup@example.com",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),o.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"📧 Sending...":"🚀 Send Invitation"})]}),s&&o.jsx("div",{className:`mt-4 p-4 rounded-lg ${s.type==="success"?"bg-green-900/30 border border-green-500/50 text-green-300":"bg-red-900/30 border border-red-500/50 text-red-300"}`,children:s.text})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📋 Recent Invitations"}),i.length===0?o.jsx("p",{className:"text-gray-400",children:"No invitations sent yet."}):o.jsx("div",{className:"space-y-4",children:i.map(_=>o.jsx("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:_.email}),o.jsxs("p",{className:"text-sm text-gray-400",children:["Sent ",_.invitedAt.toLocaleDateString()," at ",_.invitedAt.toLocaleTimeString()]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${_.status==="pending"?"bg-yellow-900/50 text-yellow-300":_.status==="registered"?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:_.status}),_.inviteNumber&&_.inviteNumber>1&&o.jsxs("span",{className:"px-2 py-1 bg-blue-900/50 text-blue-300 rounded-full text-xs",children:["Invite #",_.inviteNumber]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>g(_.token),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm transition-colors",children:"Copy Link"}),o.jsx("button",{onClick:()=>x(_.token),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm transition-colors",children:"Open Link"})]})]})},_.id))})]}),Object.keys(w).length>0&&o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📊 Invite Summary"}),o.jsx("div",{className:"space-y-3",children:Object.entries(w).map(([_,A])=>o.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[o.jsx("p",{className:"font-medium",children:_}),o.jsxs("p",{className:"text-sm text-gray-400",children:["Total invites: ",A.count," | Statuses: ",A.statuses.join(", ")]})]},_))})]})]})})},oR=()=>{const[t,e]=C.useState(null),[n,s]=C.useState(!1),r=async()=>{s(!0),e(null);try{await new Promise(c=>setTimeout(c,1e3)),e("✅ Email connection test successful! Emails should be sent automatically.")}catch(c){e(`❌ Email test error: ${c}`)}finally{s(!1)}},i={service:"EmailJS",fromEmail:"intern.linuxworld@gmail.com",fromName:"JAZBAA Team",status:"Real Email Service - Automatic Sending",configRequired:"Please configure EmailJS credentials below"};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"📧 Email Service Test"}),o.jsx("p",{className:"text-xl text-gray-300",children:"Test and configure EmailJS for real email sending"})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📊 Current Status"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-blue-400",children:"Service"}),o.jsx("p",{children:i.service})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-blue-400",children:"From Email"}),o.jsx("p",{children:i.fromEmail})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-blue-400",children:"From Name"}),o.jsx("p",{children:i.fromName})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-blue-400",children:"Status"}),o.jsx("p",{children:i.status})]})]})]}),o.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-6 mb-8",children:[o.jsx("h3",{className:"text-yellow-400 font-semibold mb-4",children:"⚠️ Configuration Required"}),o.jsx("p",{className:"text-gray-300 mb-4",children:i.configRequired}),o.jsx("button",{onClick:r,disabled:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors disabled:opacity-50",children:n?"🧪 Testing...":"🧪 Test Email Connection"}),t&&o.jsx("div",{className:`mt-4 p-4 rounded-lg ${t.includes("✅")?"bg-green-900/30 border border-green-500/50 text-green-300":"bg-red-900/30 border border-red-500/50 text-red-300"}`,children:t})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📋 EmailJS Setup Instructions"}),o.jsx("div",{className:"prose prose-invert max-w-none",children:o.jsx("pre",{className:"bg-gray-800 p-4 rounded-lg text-sm overflow-x-auto whitespace-pre-wrap",children:`
📧 **EmailJS Setup Instructions:**

1. **Sign up at EmailJS:**
   - Go to https://www.emailjs.com/
   - Create a free account

2. **Create Email Service:**
   - Go to Email Services
   - Add Gmail service
   - Connect your Gmail account (intern.linuxworld@gmail.com)

3. **Create Email Templates:**
   
   **Invite Template (Template ID: invite_template):**
   Subject: 🎉 You're Invited to Join JAZBAA 4.0!
   Body:
   Dear {{to_name}},
   
   You have been invited to join JAZBAA 4.0 - The Creator Movement of India!
   
   Click the link below to register your startup and create your profile:
   {{invite_link}}
   
   Best regards,
   {{from_name}}

   **Welcome Template (Template ID: welcome_template):**
   Subject: 🎉 Welcome to JAZBAA 4.0, {{startup_name}}!
   Body:
   Dear {{to_name}},
   
   Welcome to JAZBAA 4.0! Your startup "{{startup_name}}" has been successfully registered.
   
   View your profile at the link below:
   {{profile_link}}
   
   Best regards,
   {{from_name}}

4. **Get Your Credentials:**
   - Service ID: Copy from Email Services
   - Template IDs: Copy from Email Templates
   - Public Key: Copy from Account > API Keys

5. **Update Configuration:**
   Replace the placeholder values in realEmailService.ts with your actual credentials.
  `})})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🚀 Quick Setup Steps"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:"1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Sign up at EmailJS"}),o.jsxs("p",{className:"text-gray-300",children:["Go to ",o.jsx("a",{href:"https://www.emailjs.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"emailjs.com"})," and create a free account"]})]})]}),o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:"2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Create Email Service"}),o.jsx("p",{className:"text-gray-300",children:"Add Gmail service and connect your Gmail account (intern.linuxworld@gmail.com)"})]})]}),o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:"3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Create Email Templates"}),o.jsx("p",{className:"text-gray-300",children:"Create two templates: one for invites and one for welcome emails"})]})]}),o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:"4"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Get Credentials"}),o.jsx("p",{className:"text-gray-300",children:"Copy Service ID, Template IDs, and Public Key from EmailJS dashboard"})]})]}),o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:"5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Update Configuration"}),o.jsxs("p",{className:"text-gray-300",children:["Replace placeholder values in ",o.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"src/services/realEmailService.ts"})]})]})]}),o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:"6"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Test Connection"}),o.jsx("p",{className:"text-gray-300",children:'Click the "Test Email Connection" button above to verify setup'})]})]})]})]}),o.jsx("div",{className:"text-center mt-8",children:o.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors",children:"← Back to Admin Dashboard"})})]})})},aR=async(t,e,n)=>{try{if(console.log("📤 Starting image upload:",{fileName:n,path:e,fileSize:t.size}),!t.type.startsWith("image/"))return{success:!1,error:"File must be an image"};if(t.size>5*1024*1024)return{success:!1,error:"File size must be less than 5MB"};const s=bo(Br,`${e}/${n}`),r=await xo(s,t);console.log("✅ File uploaded successfully:",r.metadata.name);const i=await vo(r.ref);return console.log("🔗 Download URL generated:",i),{success:!0,url:i}}catch(s){return console.error("❌ Image upload failed:",s),{success:!1,error:s instanceof Error?s.message:"Upload failed"}}},lR=(t,e)=>{const n=Date.now(),s=Math.random().toString(36).substring(2,15),r=t.split(".").pop()||"jpg",i=t.split(".")[0].replace(/[^a-zA-Z0-9]/g,"_");return`${e?e+"_":""}${i}_${n}_${s}.${r}`},Yx=async(t,e)=>{const n=lR(t.name,e.toLowerCase().replace(/\s+/g,"_"));return aR(t,"startup-logos",n)},cR=()=>{const{token:t}=If(),e=Co(),[n,s]=C.useState(null),[r,i]=C.useState(!0),[a,c]=C.useState(!1),[u,d]=C.useState(null),[h,f]=C.useState({name:"",tagline:"",story:"",team:[{name:"",role:"",linkedin:"",github:"",portfolio:"",pitchVideo:"",hiring:!1}],website:"",appStore:"",playStore:"",demoUrl:"",qrCode:"",contactEmail:"",contactPhone:"",sector:"Technology",badges:[],special:"",problem:"",solution:"",productVideo:"",pitchDeck:"",collaborationMessage:"",logo:""}),[g,x]=C.useState(null),[w,_]=C.useState(null),[A,P]=C.useState(!1),[k,S]=C.useState(null),[M,B]=C.useState(null),[O,E]=C.useState(null),[y,b]=C.useState(!1),[T,N]=C.useState(null),[j,I]=C.useState({});C.useEffect(()=>{(async()=>{if(!t){d({type:"error",text:"Invalid invite token."}),i(!1);return}try{const U=ue(G,"invites"),K=Zo(U,zg("token","==",t)),ee=await Te(K);if(ee.empty){d({type:"error",text:"Invalid or expired invite token."}),i(!1);return}const de=ee.docs[0],re=de.data();if(re.status==="registered"){d({type:"error",text:"This invite has already been used."}),i(!1);return}s({id:de.id,...re}),f(me=>({...me,contactEmail:re.email}))}catch(U){console.error("Error fetching invite:",U),d({type:"error",text:"Error loading invite. Please try again."})}finally{i(!1)}})()},[t]);const X=(L,U)=>{f(K=>({...K,[L]:U}))},Z=(L,U,K)=>{f(ee=>({...ee,team:ee.team.map((de,re)=>re===L?{...de,[U]:K}:de)}))},at=()=>{f(L=>({...L,team:[...L.team,{name:"",role:"",linkedin:"",github:"",portfolio:"",pitchVideo:"",hiring:!1,headshot:""}]}))},pe=L=>{f(U=>({...U,team:U.team.filter((K,ee)=>ee!==L)})),I(U=>{const K={...U};delete K[L];const ee={};return Object.keys(K).forEach(de=>{const re=parseInt(de);re>L?ee[re-1]=K[re]:ee[re]=K[re]}),ee})},Ce=L=>{f(U=>({...U,badges:U.badges.includes(L)?U.badges.filter(K=>K!==L):[...U.badges,L]}))},lt=L=>L.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),vt=L=>{var ee;const U=(ee=L.target.files)==null?void 0:ee[0];if(!U)return;if(!U.type.startsWith("image/")){S("Please select an image file");return}if(U.size>5*1024*1024){S("File size must be less than 5MB");return}x(U),S(null);const K=new FileReader;K.onload=de=>{var re;_((re=de.target)==null?void 0:re.result)},K.readAsDataURL(U)},Ks=()=>{x(null),_(null),S(null),f(L=>({...L,logo:""}))},Et=async()=>{if(!g||!h.name)return null;P(!0),S(null);try{console.log("📤 Starting logo upload...");const L=await Yx(g,h.name);if(L.success&&L.url)return console.log("✅ Logo uploaded successfully to Firebase Storage:",L.url),L.url;{console.log("⚠️ Firebase Storage upload failed, using base64 fallback"),console.log("❌ Storage error:",L.error);const U=await Re(g);return console.log("✅ Logo converted to base64 successfully"),U}}catch(L){console.error("❌ Logo upload error:",L);try{console.log("🔄 Attempting base64 fallback due to error...");const U=await Re(g);return console.log("✅ Base64 fallback successful"),U}catch(U){return console.error("❌ Base64 conversion also failed:",U),S("Logo upload failed. Please try again or skip logo upload."),null}}finally{P(!1)}},Re=L=>new Promise((U,K)=>{const ee=new FileReader;ee.onload=()=>U(ee.result),ee.onerror=K,ee.readAsDataURL(L)}),aa=L=>{var de;const U=(de=L.target.files)==null?void 0:de[0];if(!U)return;if(!["application/vnd.openxmlformats-officedocument.presentationml.presentation","application/pdf"].includes(U.type)){N("Please select a PowerPoint (.ppt, .pptx) or PDF file");return}if(U.size>10*1024*1024){N("File size must be less than 10MB");return}B(U),N(null);const ee=new FileReader;ee.onload=re=>{var me;E((me=re.target)==null?void 0:me.result)},ee.readAsDataURL(U)},An=()=>{B(null),E(null),N(null),f(L=>({...L,pitchDeck:""}))},la=async()=>{if(!M||!h.name)return null;b(!0),N(null);try{console.log("📤 Starting pitch deck upload...");let L=`pitch_decks/${h.name}_${Date.now()}_${Math.random().toString(36).substring(2)}.pptx`;M.type==="application/pdf"&&(L=`pitch_decks/${h.name}_${Date.now()}_${Math.random().toString(36).substring(2)}.pdf`);const U=bo(Br,L);await xo(U,M);const K=await vo(U);return console.log("✅ Pitch deck uploaded successfully to Firebase Storage:",K),K}catch(L){return console.error("❌ Pitch deck upload error:",L),N("Pitch deck upload failed. Please try again."),null}finally{b(!1)}},rs=(L,U)=>{var ee;const K=(ee=U.target.files)==null?void 0:ee[0];if(K){if(!K.type.startsWith("image/")){I(re=>({...re,[L]:{...re[L],error:"Please select an image file"}}));return}if(K.size>5*1024*1024){I(re=>({...re,[L]:{...re[L],error:"Image size should be less than 5MB"}}));return}const de=new FileReader;de.onload=re=>{I(me=>{var os;return{...me,[L]:{file:K,preview:(os=re.target)==null?void 0:os.result,uploading:!1,error:null}}})},de.readAsDataURL(K)}},ca=L=>{I(U=>({...U,[L]:{file:null,preview:null,uploading:!1,error:null}}))},ua=async L=>{const U=j[L];if(!(U!=null&&U.file))return null;try{I(K=>({...K,[L]:{...K[L],uploading:!0,error:null}}));try{const K=`team-headshots/${h.name}_${L}_${Date.now()}_${Math.random().toString(36).substring(2)}.jpg`,ee=bo(Br,K);await xo(ee,U.file);const de=await vo(ee);return I(re=>({...re,[L]:{...re[L],uploading:!1}})),de}catch(K){console.log("Firebase Storage failed, using base64 fallback:",K);const ee=await Re(U.file);return I(de=>({...de,[L]:{...de[L],uploading:!1}})),ee}}catch(K){return console.error("Error uploading team member image:",K),I(ee=>({...ee,[L]:{...ee[L],uploading:!1,error:"Failed to upload image"}})),null}},is=async L=>{if(L.preventDefault(),!n){d({type:"error",text:"Invalid invite."});return}console.log("📝 Form data being submitted:",h),console.log("📧 Invite data:",n),c(!0),d(null);try{const U=lt(h.name);if(console.log("🚀 Creating PERMANENT startup profile with slug:",U),!h.name||!h.tagline||!h.story)throw new Error("Please fill in all required fields (Name, Tagline, and Story)");let K=h.logo;if(g){if(console.log("📤 Uploading logo..."),K=await Et(),!K)throw new Error("Logo upload failed. Please try again.");console.log("✅ Logo uploaded successfully:",K)}let ee=h.pitchDeck;if(M){console.log("📤 Uploading pitch deck...");const Pe=await la();if(Pe)ee=Pe,console.log("✅ Pitch deck uploaded successfully:",ee);else throw new Error("Pitch deck upload failed. Please try again.")}console.log("📤 Uploading team member images...");const de=await Promise.all(h.team.map(async(Pe,Ft)=>{const as=j[Ft];if(as!=null&&as.file){console.log(`📤 Uploading image for team member ${Ft}: ${Pe.name}`);const Qs=await ua(Ft);return Qs?(console.log(`✅ Team member image uploaded successfully: ${Qs}`),{...Pe,headshot:Qs}):(console.warn(`⚠️ Team member image upload failed for ${Pe.name}`),Pe)}return Pe}));console.log("✅ All team member images processed");const re={...h,slug:U,createdAt:new Date,status:"active",createdBy:n.email,team:de,name:h.name,tagline:h.tagline,story:h.story,sector:h.sector,badges:h.badges,website:h.website,appStore:h.appStore,playStore:h.playStore,demoUrl:h.demoUrl,contactEmail:h.contactEmail,contactPhone:h.contactPhone,productVideo:h.productVideo,pitchDeck:ee||void 0,qrCode:h.qrCode,problem:h.problem,solution:h.solution,collaborationMessage:h.collaborationMessage,individualPitches:h.individualPitches||[],logo:K||void 0,isTemplateCompatible:!0,templateVersion:"1.0",profileCreatedAt:new Date,lastUpdated:new Date};console.log("💾 Saving PERMANENT startup profile data:",re);const me=je(G,"startups",U);await ht(me,re),console.log("✅ PERMANENT startup profile created successfully with ID:",U);try{const Pe=await Ot(me);if(Pe.exists()){const Ft=Pe.data();console.log("✅ Data verification successful. Saved data:",Ft)}else console.error("❌ Data verification failed - document not found after saving")}catch(Pe){console.error("❌ Data verification error:",Pe)}try{const Pe=je(G,"permanent_profiles",U);await ht(Pe,{...re,backupCreatedAt:new Date,originalCollection:"startups"}),console.log("✅ Backup profile created in permanent_profiles collection")}catch(Pe){console.warn("⚠️ Backup creation failed (optional):",Pe)}const os=je(G,"invites",n.id);await ys(os,{status:"registered",startupSlug:U,registeredAt:new Date,profilePermanent:!0}),console.log("✅ Invite status updated with permanent profile reference"),console.log("📧 Simulating welcome email to:",h.contactEmail),console.log("🎯 PERMANENT Profile URL:",`${window.location.origin}/startup/${U}`),d({type:"success",text:`✅ Startup "${h.name}" registered successfully! 
        
🎯 Your PERMANENT profile is now live at: ${window.location.origin}/startup/${U}
📧 Welcome email sent to ${n.email}.
🔒 This profile page will remain accessible forever.`}),setTimeout(()=>{e(`/startup/${U}`)},3e3)}catch(U){console.error("❌ Error creating permanent startup profile:",U),d({type:"error",text:`Failed to create permanent startup profile: ${U instanceof Error?U.message:"Unknown error"}. Please try again.`})}finally{c(!1)}};return r?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{children:"Loading invite..."})]})}):(u==null?void 0:u.type)==="error"?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white flex items-center justify-center",children:o.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[o.jsx("div",{className:"text-red-400 text-6xl mb-4",children:"❌"}),o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Invalid Invite"}),o.jsx("p",{className:"text-gray-300 mb-6",children:u.text}),o.jsx("button",{onClick:()=>e("/"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Go Home"})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"🚀 Register Your Startup"}),o.jsx("p",{className:"text-xl text-gray-300",children:"Complete your startup profile for JAZBAA 4.0"})]}),o.jsxs("form",{onSubmit:is,className:"space-y-8",children:[o.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[o.jsx("h3",{className:"text-yellow-400 font-semibold mb-2",children:"🔧 Debug Info"}),o.jsxs("p",{className:"text-yellow-300 text-sm mb-2",children:["Form Data: ",JSON.stringify(h,null,2)]}),o.jsxs("p",{className:"text-yellow-300 text-sm",children:["Invite: ",n?"Valid":"Invalid"]}),o.jsx("button",{type:"button",onClick:()=>{console.log("🔍 Debug: Form data:",h),console.log("🔍 Debug: Invite:",n),alert("Check browser console for debug info")},className:"px-4 py-2 bg-yellow-600 text-white rounded text-sm",children:"Test Form Data"})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"🚀 Basic Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Startup Name *"}),o.jsx("input",{type:"text",value:h.name,onChange:L=>X("name",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"Enter startup name",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Tagline *"}),o.jsx("input",{type:"text",value:h.tagline,onChange:L=>X("tagline",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"Short, memorable tagline",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Sector *"}),o.jsxs("select",{value:h.sector,onChange:L=>X("sector",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-[#e86888]",style:{color:"white",backgroundColor:"rgba(255, 255, 255, 0.1)"},required:!0,children:[o.jsx("option",{value:"",style:{backgroundColor:"#1f2937",color:"white"},children:"Select sector"}),o.jsx("option",{value:"HealthTech",style:{backgroundColor:"#1f2937",color:"white"},children:"HealthTech"}),o.jsx("option",{value:"EdTech",style:{backgroundColor:"#1f2937",color:"white"},children:"EdTech"}),o.jsx("option",{value:"FinTech",style:{backgroundColor:"#1f2937",color:"white"},children:"FinTech"}),o.jsx("option",{value:"E-commerce",style:{backgroundColor:"#1f2937",color:"white"},children:"E-commerce"}),o.jsx("option",{value:"AI/ML",style:{backgroundColor:"#1f2937",color:"white"},children:"AI/ML"}),o.jsx("option",{value:"IoT",style:{backgroundColor:"#1f2937",color:"white"},children:"IoT"}),o.jsx("option",{value:"Sustainability",style:{backgroundColor:"#1f2937",color:"white"},children:"Sustainability"}),o.jsx("option",{value:"Entertainment",style:{backgroundColor:"#1f2937",color:"white"},children:"Entertainment"}),o.jsx("option",{value:"Social Impact",style:{backgroundColor:"#1f2937",color:"white"},children:"Social Impact"}),o.jsx("option",{value:"Other",style:{backgroundColor:"#1f2937",color:"white"},children:"Other"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Contact Email"}),o.jsx("input",{type:"email",value:h.contactEmail,onChange:L=>X("contactEmail",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"contact@startup.com"})]})]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"🖼️ Startup Logo"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Upload Logo (Optional)"}),o.jsx("input",{type:"file",accept:"image/*",onChange:vt,className:"hidden",id:"logo-upload"}),o.jsxs("label",{htmlFor:"logo-upload",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white rounded-lg cursor-pointer hover:scale-105 transition-all",children:[o.jsx(bf,{size:16}),"Choose Logo"]}),g&&o.jsxs("button",{type:"button",onClick:Ks,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all",children:[o.jsx(jo,{size:16}),"Remove"]})]}),k&&o.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[o.jsx(Ao,{size:16}),k]}),A&&o.jsxs("div",{className:"flex items-center gap-2 text-blue-400 text-sm",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"}),"Uploading logo..."]}),w&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-white/80 mb-2",children:"Logo Preview:"}),o.jsx("div",{className:"w-32 h-32 border-2 border-white/20 rounded-lg overflow-hidden bg-white/10",children:o.jsx("img",{src:w,alt:"Logo preview",className:"w-full h-full object-contain"})})]}),o.jsx("p",{className:"text-white/60 text-sm",children:"Upload your startup logo (PNG, JPG, GIF). Max size: 5MB. This will be displayed on your profile page and startup cards."})]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"📖 Story & Problem"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Our Story *"}),o.jsx("textarea",{value:h.story,onChange:L=>X("story",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] resize-none",rows:4,placeholder:"Tell the story behind your startup - what inspired you, what problem you're solving...",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"The Problem We're Solving"}),o.jsx("textarea",{value:h.problem,onChange:L=>X("problem",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] resize-none",rows:3,placeholder:"Describe the specific problem or gap in the market that your startup addresses..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Our Solution"}),o.jsx("textarea",{value:h.solution,onChange:L=>X("solution",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] resize-none",rows:3,placeholder:"Explain how your product/service solves the problem..."})]})]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"🎬 Product & Media"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Product Video URL"}),o.jsx("input",{type:"url",value:h.productVideo,onChange:L=>X("productVideo",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"YouTube or video link"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Pitch Deck URL"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("input",{type:"file",accept:".ppt, .pptx, .pdf",onChange:aa,className:"hidden",id:"pitch-deck-upload"}),o.jsxs("label",{htmlFor:"pitch-deck-upload",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white rounded-lg cursor-pointer hover:scale-105 transition-all",children:[o.jsx(bf,{size:16}),"Choose Pitch Deck"]}),M&&o.jsxs("button",{type:"button",onClick:An,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all",children:[o.jsx(jo,{size:16}),"Remove"]})]}),T&&o.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[o.jsx(Ao,{size:16}),T]}),y&&o.jsxs("div",{className:"flex items-center gap-2 text-blue-400 text-sm",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"}),"Uploading pitch deck..."]}),O&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-white/80 mb-2",children:"Pitch Deck Preview:"}),o.jsx("div",{className:"w-full max-w-md mx-auto",children:O.includes("application/pdf")?o.jsx("iframe",{src:O,width:"100%",height:"400px",className:"border border-white/20 rounded-lg"}):o.jsx("div",{className:"w-full h-40 border-2 border-white/20 rounded-lg overflow-hidden bg-white/10 flex items-center justify-center",children:o.jsx("img",{src:O,alt:"Pitch deck preview",className:"w-full h-full object-contain"})})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Website URL"}),o.jsx("input",{type:"url",value:h.website,onChange:L=>X("website",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"https://yourstartup.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Contact Phone"}),o.jsx("input",{type:"tel",value:h.contactPhone,onChange:L=>X("contactPhone",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"+91 98765 43210"})]})]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"👥 Team Members"}),o.jsxs("div",{className:"space-y-4",children:[h.team.map((L,U)=>{var K,ee,de,re;return o.jsxs("div",{className:"border border-white/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("h4",{className:"text-white font-medium",children:["Team Member ",U+1]}),o.jsx("button",{type:"button",onClick:()=>pe(U),className:"text-red-400 hover:text-red-300",children:"Remove"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Name *"}),o.jsx("input",{type:"text",value:L.name,onChange:me=>Z(U,"name",me.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"Full name",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Role *"}),o.jsx("input",{type:"text",value:L.role,onChange:me=>Z(U,"role",me.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"Frontend, Backend, UX, ML, etc.",required:!0})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Headshot Photo"}),o.jsxs("div",{className:"space-y-3",children:[((K=j[U])==null?void 0:K.preview)&&o.jsxs("div",{className:"relative inline-block",children:[o.jsx("img",{src:j[U].preview,alt:`${L.name} headshot`,className:"w-24 h-24 object-cover rounded-lg border border-white/20"}),o.jsx("button",{type:"button",onClick:()=>ca(U),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]}),((ee=j[U])==null?void 0:ee.uploading)&&o.jsx("div",{className:"text-blue-400 text-sm",children:"Uploading image..."}),((de=j[U])==null?void 0:de.error)&&o.jsx("div",{className:"text-red-400 text-sm",children:j[U].error}),!((re=j[U])!=null&&re.preview)&&o.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-lg p-4 text-center hover:border-white/40 transition-colors",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:me=>rs(U,me),className:"hidden",id:`team-member-image-${U}`}),o.jsxs("label",{htmlFor:`team-member-image-${U}`,className:"cursor-pointer text-white/80 hover:text-white",children:[o.jsx("div",{className:"text-2xl mb-2",children:"📷"}),o.jsx("div",{className:"text-sm",children:"Click to upload headshot"}),o.jsx("div",{className:"text-xs text-white/60 mt-1",children:"JPG, PNG (max 5MB)"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"LinkedIn URL"}),o.jsx("input",{type:"url",value:L.linkedin||"",onChange:me=>Z(U,"linkedin",me.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"LinkedIn profile URL"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"GitHub URL"}),o.jsx("input",{type:"url",value:L.github||"",onChange:me=>Z(U,"github",me.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"GitHub profile URL"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Portfolio URL"}),o.jsx("input",{type:"url",value:L.portfolio||"",onChange:me=>Z(U,"portfolio",me.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"Personal portfolio URL"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Pitch Video URL"}),o.jsx("input",{type:"url",value:L.pitchVideo||"",onChange:me=>Z(U,"pitchVideo",me.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888]",placeholder:"Individual pitch video URL"})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsxs("label",{className:"flex items-center text-white/80 mb-2",children:[o.jsx("input",{type:"checkbox",checked:L.hiring,onChange:me=>Z(U,"hiring",me.target.checked),className:"mr-2"}),"Available for Hiring"]})})]})]},U)}),o.jsx("button",{type:"button",onClick:at,className:"w-full py-3 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors",children:"+ Add Team Member"})]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"🏷️ Badges & Tags"}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Select Badges"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Open to Invest","Open to Hire","Incubator Ready","MVP Ready","Revenue Generating","Patent Pending","CSR Eligible","Grant Eligible"].map(L=>o.jsxs("label",{className:"flex items-center text-white/80",children:[o.jsx("input",{type:"checkbox",checked:h.badges.includes(L),onChange:()=>Ce(L),className:"mr-2"}),L]},L))})]})})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"🤝 Collaboration"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 mb-2",children:"Collaboration Message"}),o.jsx("textarea",{value:h.collaborationMessage,onChange:L=>X("collaborationMessage",L.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-[#e86888] resize-none",rows:3,placeholder:"We're open to funding, incubation, mentorship, or partnership..."})]})]}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"submit",disabled:a,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-4 px-8 rounded-lg text-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"🚀 Creating Profile...":"🚀 Create Startup Profile"})}),u&&o.jsx("div",{className:`mt-6 p-4 rounded-lg ${u.type==="success"?"bg-green-900/30 border border-green-500/50 text-green-300":"bg-red-900/30 border border-red-500/50 text-red-300"}`,children:u.text})]})]})})},uR=({isOpen:t,onClose:e,contactType:n})=>{const[s,r]=C.useState({name:"",email:"",phone:"",message:""}),[i,a]=C.useState(!1),[c,u]=C.useState(!1),d=()=>{switch(n){case"founders":return{title:"Contact Founders",icon:o.jsx(Qr,{className:"w-6 h-6"}),description:"Get in touch with our startup founders"};case"call":return{title:"Call Us",icon:o.jsx(Gx,{className:"w-6 h-6"}),description:"Schedule a call with our team"};case"deck":return{title:"Request Detailed Deck",icon:o.jsx(Yl,{className:"w-6 h-6"}),description:"Get our comprehensive pitch deck"};case"csr":return{title:"Support via CSR",icon:o.jsx(So,{className:"w-6 h-6"}),description:"Corporate Social Responsibility support"};default:return{title:"Contact Us",icon:o.jsx(Qr,{className:"w-6 h-6"}),description:"Get in touch with our team"}}},h=async x=>{x.preventDefault(),a(!0);try{if((await fetch("http://localhost:3001/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,contactType:n,timestamp:new Date().toISOString()})})).ok)u(!0),setTimeout(()=>{e(),u(!1),r({name:"",email:"",phone:"",message:""})},3e3);else throw new Error("Failed to submit form")}catch(w){console.error("Error submitting form:",w),alert("Failed to submit form. Please try again.")}finally{a(!1)}},f=x=>{r(w=>({...w,[x.target.name]:x.target.value}))};if(!t)return null;const g=d();return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-purple-600",children:g.icon}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:g.title}),o.jsx("p",{className:"text-sm text-gray-600",children:g.description})]})]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(jo,{className:"w-6 h-6"})})]}),c?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Request Submitted!"}),o.jsx("p",{className:"text-gray-600",children:"Our JAZBAA team will get back to you within 24-48 hours."})]}):o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),o.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),o.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your email address"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),o.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your phone number"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"What are you looking for? *"}),o.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:f,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",placeholder:"Tell us what you're interested in..."})]}),o.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-pink-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Submitting...":"Submit Request"})]})]})})},_f=t=>{var e,n;if(!t)return"";if(t.includes("youtube.com/watch")){const s=(e=t.match(/[?&]v=([^&]+)/))==null?void 0:e[1];if(s)return`https://www.youtube.com/embed/${s}`}if(t.includes("youtu.be/")){const s=(n=t.split("youtu.be/")[1])==null?void 0:n.split("?")[0];if(s)return`https://www.youtube.com/embed/${s}`}return t.includes("youtube.com/embed/"),t},dR=()=>{var x;const{slug:t}=If(),[e,n]=C.useState(null),[s,r]=C.useState(!0),[i,a]=C.useState(null),[c,u]=C.useState(!1),[d,h]=C.useState("founders"),f=w=>{h(w),u(!0)},g=()=>{u(!1)};return Nn({triggerOnce:!0,threshold:.1}),C.useEffect(()=>{(async()=>{if(!t){a("Invalid startup slug."),r(!1);return}try{console.log("🔍 Fetching startup profile for slug:",t);const _=je(G,"startups",t),A=await Ot(_);let P=null;if(A.exists())P=A.data(),console.log("✅ Startup data fetched from main collection:",P);else{console.log("🔄 Startup not found in main collection, checking backup...");try{const S=je(G,"permanent_profiles",t),M=await Ot(S);if(M.exists())P=M.data(),console.log("✅ Startup data fetched from backup collection:",P);else{console.log("❌ Startup not found in either collection for slug:",t),a("Startup profile not found. This profile may have been moved or deleted."),r(!1);return}}catch(S){console.error("❌ Error checking backup collection:",S),a("Startup profile not found. This profile may have been moved or deleted."),r(!1);return}}const k={...P,name:P.name||"Unknown Startup",tagline:P.tagline||"No tagline available",story:P.story||"No story available",team:P.team||[],badges:P.badges||[],sector:P.sector||"Technology",slug:P.slug||t,problem:P.problem||"Problem description not available",solution:P.solution||"Solution description not available",collaborationMessage:P.collaborationMessage||"We are open to collaboration, funding, and partnerships.",individualPitches:P.individualPitches||[],contactEmail:P.contactEmail||"contact@startup.com",contactPhone:P.contactPhone||"Not provided",demoUrl:P.demoUrl||void 0,appStore:P.appStore||void 0,playStore:P.playStore||void 0,qrCode:P.qrCode||void 0,productVideo:P.productVideo||void 0,pitchDeck:P.pitchDeck||void 0,website:P.website||void 0,logo:P.logo||void 0};n(k),console.log("✅ Startup profile processed and set:",k)}catch(_){console.error("❌ Error fetching startup profile:",_),a("Error loading startup profile. Please try again later.")}finally{r(!1)}})()},[t]),s?o.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading startup profile..."})]})}):i||!e?o.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:o.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[o.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"❌"}),o.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Startup Not Found"}),o.jsx("p",{className:"text-gray-600 mb-6",children:i||"The requested startup profile could not be found."}),o.jsx("button",{onClick:()=>window.history.back(),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Go Back"})]})}):o.jsxs("div",{className:"min-h-screen bg-white",children:[o.jsx("section",{className:"relative bg-black py-20 px-6 lg:px-16 overflow-hidden",children:o.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 items-center gap-12",children:[o.jsxs("div",{className:"bg-gradient-to-b from-neutral-900 to-black rounded-3xl shadow-2xl p-10 relative z-20",children:[o.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold mb-6 leading-tight",children:o.jsx("span",{className:"bg-gradient-to-r from-pink-400 via-purple-500 to-blue-500 bg-clip-text text-transparent",children:e.name})}),o.jsx("p",{className:"text-xl md:text-2xl font-medium mb-10 text-gray-200",children:e.tagline}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.productVideo&&o.jsxs("button",{className:"px-6 py-3 rounded-lg font-semibold flex items-center gap-2 text-white bg-gradient-to-r from-pink-400 to-purple-500 hover:scale-105 transform transition-all duration-300",children:[o.jsx(RC,{className:"w-5 h-5"}),"Watch Product Video"]}),e.website&&o.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 rounded-lg font-semibold flex items-center gap-2 text-white bg-white/10 border border-white/20 hover:bg-white/20 hover:scale-105 transform transition-all duration-300",children:[o.jsx(Kr,{className:"w-5 h-5"}),"Explore Website / App"]}),o.jsxs("button",{onClick:()=>{const w=document.getElementById("brains-behind-build");w&&w.scrollIntoView({behavior:"smooth"})},className:"px-6 py-3 rounded-lg font-semibold flex items-center gap-2 text-white bg-white/10 border border-white/20 hover:bg-white/20 hover:scale-105 transform transition-all duration-300",children:[o.jsx($n,{className:"w-5 h-5"}),"Meet the Team"]})]})]}),o.jsx("div",{className:"flex justify-center md:justify-center  items-center relative ",children:o.jsx("div",{className:"bg-white rounded-full shadow-2xl w-72 h-72 flex items-center justify-center absolute md:right-[-50px] z-10",children:e.logo?o.jsx("img",{src:e.logo,alt:`${e.name} logo`,className:"w-48 h-48 object-contain"}):o.jsx("div",{className:"text-gray-500",children:"No Logo"})})})]})}),o.jsx("section",{className:"py-20 px-4",children:o.jsx("div",{className:"max-w-6xl mx-auto",children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent mb-4",children:"Why We Built This"}),o.jsx("p",{className:"text-xl text-gray-600 mb-8 font-medium",children:"Born from a real problem. Built with purpose."}),o.jsxs("div",{className:"text-lg text-gray-700 space-y-6 leading-relaxed",children:[o.jsx("p",{className:"whitespace-pre-wrap break-words text-justify leading-7",children:e.story}),e.problem&&o.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded",children:[o.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"The Problem"}),o.jsx("p",{className:"text-red-700",children:e.problem})]}),e.solution&&o.jsxs("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded",children:[o.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Our Solution"}),o.jsx("p",{className:"text-green-700",children:e.solution})]})]})]}),e.productVideo?o.jsx("div",{className:"bg-gradient-to-br from-pink-400 to-purple-500 rounded-2xl h-96 flex items-center justify-center text-white shadow-2xl overflow-hidden",children:o.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center p-2",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsx("iframe",{src:_f(e.productVideo),title:`${e.name} Product Video`,className:"w-full h-56 rounded-lg shadow-lg",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})}):o.jsx("div",{className:"bg-gradient-to-br from-pink-400 to-purple-500 rounded-2xl h-96 flex items-center justify-center text-white shadow-2xl",children:o.jsxs("div",{className:"text-center",children:[o.jsx(SC,{className:"w-16 h-16 mx-auto mb-4"}),o.jsx("div",{className:"text-xl font-semibold",children:"Innovation Story"}),o.jsxs("div",{className:"text-sm opacity-80 mt-2",children:[e.sector," Sector"]})]})})]})})}),e.pitchDeck&&o.jsx("section",{className:"py-20 px-4",children:o.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[o.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent mb-4",children:"See Our Vision"}),o.jsx("p",{className:"text-xl text-gray-600 mb-12 max-w-3xl mx-auto",children:"View our Investor Pitch Deck to know our mission, model, and market."}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-5xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Investor Pitch Deck"}),o.jsx("p",{className:"text-gray-600",children:e.pitchDeck.includes(".pdf")?"PDF Document":"PowerPoint Presentation"})]}),o.jsxs("div",{className:"bg-gray-100 rounded-xl overflow-hidden shadow-lg",children:[o.jsxs("div",{className:"bg-gray-200 px-4 py-2 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(PC,{className:"w-5 h-5 text-gray-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.pitchDeck.includes(".pdf")?"PDF Viewer":"PowerPoint Viewer"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("a",{href:e.pitchDeck,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors",children:[o.jsx(EC,{className:"w-3 h-3"}),"Open"]}),o.jsxs("a",{href:e.pitchDeck,download:!0,className:"flex items-center gap-1 px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors",children:[o.jsx(Yl,{className:"w-3 h-3"}),"Download"]})]})]}),e.pitchDeck.includes(".pdf")&&o.jsx("div",{className:"h-96 w-full",children:o.jsx("iframe",{src:`${e.pitchDeck}#toolbar=1&navpanes=1&scrollbar=1`,className:"w-full h-full border-0",title:"Pitch Deck PDF Viewer",allowFullScreen:!0})}),!e.pitchDeck.includes(".pdf")&&(e.pitchDeck.includes(".ppt")||e.pitchDeck.includes(".pptx"))&&o.jsx("div",{className:"h-96 w-full",children:o.jsx("iframe",{src:`https://docs.google.com/viewer?url=${encodeURIComponent(e.pitchDeck)}&embedded=true`,className:"w-full h-full border-0",title:"Pitch Deck PowerPoint Viewer",allowFullScreen:!0})}),!e.pitchDeck.includes(".pdf")&&!e.pitchDeck.includes(".ppt")&&!e.pitchDeck.includes(".pptx")&&o.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[o.jsx(Ao,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm",children:"Preview not available for this file type. Please use the download button to view the document."})]})})]})]})]})}),o.jsx("section",{id:"brains-behind-build",className:"py-20 px-4 bg-gray-50",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent mb-4",children:"Brains Behind the Build"}),o.jsx("p",{className:"text-xl text-gray-600",children:"Student Innovators Who Dared to Dream & Do"})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.team.map((w,_)=>o.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center shadow-lg hover:shadow-2xl hover:-translate-y-2 transition-all duration-300",children:[o.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-purple-500 to-teal-400 rounded-full mx-auto mb-6 flex items-center justify-center text-white text-2xl font-bold overflow-hidden",children:w.headshot?o.jsx("img",{src:w.headshot,alt:`${w.name} headshot`,className:"w-full h-full object-cover"}):w.name.split(" ").map(A=>A[0]).join("")}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:w.name}),o.jsx("p",{className:"text-gray-600 mb-4",children:w.role}),o.jsxs("div",{className:"flex gap-3 justify-center mb-4",children:[w.linkedin&&o.jsx("a",{href:w.linkedin,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-gradient-to-r hover:from-pink-500 hover:to-purple-600 hover:text-white transition-all",children:o.jsx(Vu,{className:"w-5 h-5"})}),w.github&&o.jsx("a",{href:w.github,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-gradient-to-r hover:from-pink-500 hover:to-purple-600 hover:text-white transition-all",children:o.jsx(Du,{className:"w-5 h-5"})}),w.portfolio&&o.jsx("a",{href:w.portfolio,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-gradient-to-r hover:from-pink-500 hover:to-purple-600 hover:text-white transition-all",children:o.jsx(Hx,{className:"w-5 h-5"})})]}),w.hiring&&o.jsx("span",{className:"inline-block bg-gradient-to-r from-purple-500 to-teal-400 text-white px-4 py-2 rounded-full text-sm font-medium",children:"Available for Hiring"})]},_))})]})}),e.team.some(w=>w.pitchVideo)&&o.jsx("section",{className:"py-20 px-4",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent mb-4",children:"Want to Hire Our Talent?"}),o.jsx("p",{className:"text-xl text-gray-600",children:"Beyond Founders — Talented Developers Open to Opportunities"})]}),o.jsx("div",{className:"flex justify-center",children:o.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 max-w-4xl w-full",children:[o.jsx("div",{className:"mb-8",children:((x=e.team.find(w=>w.pitchVideo))==null?void 0:x.pitchVideo)&&o.jsx("div",{className:"relative w-full h-96 rounded-xl overflow-hidden",children:o.jsx("iframe",{src:_f(e.team.find(w=>w.pitchVideo).pitchVideo),title:"Team Pitch Video",className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-2xl font-semibold mb-3",children:"Meet Our Team"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Our talented developers are passionate about creating innovative solutions and leading development teams."}),o.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:e.team.map((w,_)=>o.jsxs("span",{className:"inline-block bg-gradient-to-r from-purple-500 to-teal-400 text-white px-3 py-1 rounded-full text-sm font-medium",children:[w.name," - ",w.role]},_))})]})]})})]})}),o.jsx("section",{className:"py-20 px-4",children:o.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[o.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent mb-4",children:"Take Our Dream Further"}),o.jsx("p",{className:"text-xl text-gray-600 mb-12 max-w-3xl mx-auto",children:e.collaborationMessage}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("button",{onClick:()=>f("founders"),className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-xl font-semibold hover:-translate-y-1 transition-all shadow-lg",children:[o.jsx(Qr,{className:"w-5 h-5"}),"Contact Founders"]}),o.jsxs("button",{onClick:()=>f("call"),className:"flex items-center gap-3 px-6 py-4 bg-white border-2 border-gray-200 text-gray-700 rounded-xl font-semibold hover:border-gray-300 hover:-translate-y-1 transition-all shadow-sm",children:[o.jsx(Gx,{className:"w-5 h-5"}),"Call Us"]}),o.jsxs("button",{onClick:()=>f("deck"),className:"flex items-center gap-3 px-6 py-4 bg-white border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 hover:-translate-y-1 transition-all",children:[o.jsx(Yl,{className:"w-5 h-5"}),"Request Detailed Deck"]}),o.jsxs("button",{onClick:()=>f("csr"),className:"flex items-center gap-3 px-6 py-4 bg-white border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 hover:-translate-y-1 transition-all",children:[o.jsx(So,{className:"w-5 h-5"}),"Support via CSR"]})]})]})}),o.jsx(uR,{isOpen:c,onClose:g,contactType:d}),o.jsx("footer",{className:"bg-gray-900 text-white py-16 px-4",children:o.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[o.jsxs("div",{className:"flex gap-8 justify-center items-center mb-8 flex-wrap",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 rounded-xl flex items-center justify-center",children:o.jsx(So,{className:"w-8 h-8"})}),o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-teal-400 rounded-xl flex items-center justify-center",children:o.jsx(kC,{className:"w-8 h-8"})}),o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-400 to-purple-500 rounded-xl flex items-center justify-center",children:o.jsx(IC,{className:"w-8 h-8"})})]}),o.jsx("p",{className:"text-gray-300 italic text-lg mb-4",children:'"Built with passion during The Creator Program 2025 under the mentorship of Mr. Vimal Daga."'}),o.jsx("p",{className:"text-gray-400 text-sm",children:"JAZBAA × LinuxWorld | Empowering Student Innovation"})]})})]})},hR="modulepreload",mR=function(t){return"/"+t},Tf={},fR=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(u=>{if(u=mR(u),u in Tf)return;Tf[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":hR,d||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((g,x)=>{f.addEventListener("load",g),f.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},pR=()=>{const{currentUser:t,loading:e}=mt(),[n,s]=C.useState(null),r=async()=>{s("Testing Firebase connection...");try{const{db:i}=await fR(async()=>{const{db:a}=await Promise.resolve().then(()=>VN);return{db:a}},void 0);s("✅ Firebase connection successful!")}catch(i){s(`❌ Firebase connection failed: ${i}`)}};return e?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{children:"Loading authentication..."})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"🔐 Authentication Test"}),o.jsx("p",{className:"text-xl text-gray-300",children:"Test Firebase authentication and user management"})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"👤 Current User Status"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-blue-400",children:"Authentication Status"}),o.jsx("p",{className:t?"text-green-400":"text-red-400",children:t?"✅ Authenticated":"❌ Not Authenticated"})]}),t&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-blue-400",children:"User Email"}),o.jsx("p",{children:t.email})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-blue-400",children:"User Role"}),o.jsx("p",{className:"capitalize",children:t.role})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-blue-400",children:"User ID"}),o.jsx("p",{className:"text-sm font-mono",children:t.uid})]})]})]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🔥 Firebase Connection Test"}),o.jsx("button",{onClick:r,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Test Firebase Connection"}),n&&o.jsx("div",{className:`mt-4 p-4 rounded-lg ${n.includes("✅")?"bg-green-900/30 border border-green-500/50 text-green-300":"bg-red-900/30 border border-red-500/50 text-red-300"}`,children:n})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📋 Authentication Instructions"}),o.jsxs("div",{className:"space-y-4 text-gray-300",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-white mb-2",children:"For Testing:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[o.jsx("li",{children:"Go to the login page to test authentication"}),o.jsx("li",{children:"Create real users in Firebase Console"}),o.jsx("li",{children:"Test different user roles (admin, investor, college)"}),o.jsx("li",{children:"Verify automatic redirection to appropriate dashboards"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-white mb-2",children:"Firebase Console Setup:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[o.jsx("li",{children:"Enable Authentication in Firebase Console"}),o.jsx("li",{children:"Create users with email/password"}),o.jsx("li",{children:"Add user documents to Firestore with role information"}),o.jsx("li",{children:"Set up Firestore security rules"})]})]})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors mr-4",children:"← Go Back"}),o.jsx("button",{onClick:()=>window.location.href="/login",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Go to Login"})]})]})})};class gR extends C.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white flex items-center justify-center p-6",children:o.jsxs("div",{className:"text-center max-w-md mx-auto",children:[o.jsx("div",{className:"text-red-400 text-6xl mb-4",children:"⚠️"}),o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),o.jsx("p",{className:"text-gray-300 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Refresh Page"}),this.state.error&&o.jsxs("details",{className:"mt-6 text-left",children:[o.jsx("summary",{className:"cursor-pointer text-sm text-gray-400",children:"Error Details"}),o.jsx("pre",{className:"mt-2 text-xs text-red-300 bg-red-900/20 p-3 rounded overflow-auto",children:this.state.error.toString()})]})]})}):this.props.children}}const yR=()=>{const[t,e]=C.useState(!1),[n,s]=C.useState(null),r=async()=>{e(!0),s(null);try{console.log("🔄 Starting profile management...");const i=await LC();s({success:!0,message:`Successfully ensured ${i.length} startup profiles exist!`,profilesCreated:i}),console.log("✅ Profile management completed:",i)}catch(i){console.error("❌ Profile management failed:",i),s({success:!1,message:`Failed to ensure startup profiles: ${i instanceof Error?i.message:"Unknown error"}`})}finally{e(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsx("h1",{className:"text-4xl font-bold mb-6 text-center bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Startup Profile Manager"}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Ensure All Startup Profiles"}),o.jsx("p",{className:"text-gray-300 mb-6",children:"This tool ensures that all startups in the database have complete profile pages created. It will automatically create profile pages for any startups that don't have them yet."}),o.jsx("button",{onClick:r,disabled:t,className:"px-8 py-4 bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white rounded-xl font-medium transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3",children:t?o.jsxs(o.Fragment,{children:[o.jsx(jC,{className:"animate-spin",size:20}),"Ensuring Profiles..."]}):o.jsxs(o.Fragment,{children:[o.jsx(xf,{size:20}),"Ensure All Startup Profiles"]})}),n&&o.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`mt-6 p-4 rounded-lg border ${n.success?"bg-green-500/10 border-green-500/30 text-green-300":"bg-red-500/10 border-red-500/30 text-red-300"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.success?o.jsx(xf,{size:20,className:"text-green-400"}):o.jsx(Ao,{size:20,className:"text-red-400"}),o.jsx("span",{className:"font-semibold",children:n.success?"Success":"Error"})]}),o.jsx("p",{className:"text-sm",children:n.message}),n.success&&n.profilesCreated&&n.profilesCreated.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Profiles Created:"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:n.profilesCreated.map((i,a)=>o.jsx("div",{className:"bg-white/5 rounded-lg p-2 text-xs",children:i},a))})]})]})]}),o.jsxs("div",{className:"mt-8 bg-white/5 rounded-2xl p-6 border border-white/10",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"How It Works"}),o.jsxs("div",{className:"space-y-3 text-sm text-gray-300",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-500/20 border border-blue-500/30 rounded-full flex items-center justify-center text-blue-300 text-xs font-bold mt-0.5",children:"1"}),o.jsx("p",{children:"Scans all startups in the database to check if they have complete profile pages."})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-500/20 border border-blue-500/30 rounded-full flex items-center justify-center text-blue-300 text-xs font-bold mt-0.5",children:"2"}),o.jsx("p",{children:"For startups without profiles, creates basic profile data with all required fields."})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-500/20 border border-blue-500/30 rounded-full flex items-center justify-center text-blue-300 text-xs font-bold mt-0.5",children:"3"}),o.jsx("p",{children:"Saves profiles to both main collection and backup collection for permanence."})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-500/20 border border-blue-500/30 rounded-full flex items-center justify-center text-blue-300 text-xs font-bold mt-0.5",children:"4"}),o.jsx("p",{children:'Ensures all "View Details" buttons redirect to the correct profile pages.'})]})]})]})]})})})},xR=()=>{const[t,e]=C.useState(""),[n,s]=C.useState({}),r=async()=>{try{e("Testing Firestore...");const d={name:"Test Startup",tagline:"Test Tagline",createdAt:new Date,test:!0},h=je(G,"test","firestore-test");await ht(h,d),(await Ot(h)).exists()?(s(g=>({...g,firestore:"✅ Success"})),e("Firestore test completed")):(s(g=>({...g,firestore:"❌ Failed"})),e("Firestore test failed"))}catch(d){s(h=>({...h,firestore:`❌ Error: ${d}`})),e("Firestore test error")}},i=async()=>{try{e("Testing Firebase Storage...");const d=document.createElement("canvas");d.width=1,d.height=1;const h=d.getContext("2d");h&&(h.fillStyle="red",h.fillRect(0,0,1,1)),d.toBlob(async f=>{if(f){const g=new File([f],"test.png",{type:"image/png"}),x=bo(Br,"test/test-image.png");await xo(x,g);const w=await vo(x);s(_=>({..._,storage:"✅ Success"})),e("Storage test completed")}})}catch(d){s(h=>({...h,storage:`❌ Error: ${d}`})),e("Storage test error")}},a=async()=>{try{e("Testing startup registration...");const d={name:"Test Startup "+Date.now(),tagline:"Test Tagline",story:"Test Story",sector:"Technology",badges:["AI","ML"],team:[],slug:"test-startup-"+Date.now(),createdAt:new Date,status:"active",createdBy:"test@example.com",logo:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjMDAwIi8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlRlc3Q8L3RleHQ+Cjwvc3ZnPgo=",isTemplateCompatible:!0,templateVersion:"1.0",profileCreatedAt:new Date,lastUpdated:new Date},h=je(G,"startups",d.slug);await ht(h,d),(await Ot(h)).exists()?(s(g=>({...g,registration:"✅ Success"})),e("Startup registration test completed")):(s(g=>({...g,registration:"❌ Failed"})),e("Startup registration test failed"))}catch(d){s(h=>({...h,registration:`❌ Error: ${d}`})),e("Startup registration test error")}},c=async()=>{try{e("Testing existing data...");const d=ue(G,"startups"),h=await Te(d);h.size>0?(s(f=>({...f,existingData:`✅ Found ${h.size} startups`})),e("Existing data test completed")):(s(f=>({...f,existingData:"⚠️ No existing data found"})),e("No existing data found"))}catch(d){s(h=>({...h,existingData:`❌ Error: ${d}`})),e("Existing data test error")}},u=async()=>{e("Running all tests..."),s({}),await r(),await i(),await a(),await c(),e("All tests completed")};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Production Readiness Test"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[o.jsx("button",{onClick:r,className:"bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg transition-colors",children:"Test Firestore"}),o.jsx("button",{onClick:i,className:"bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg transition-colors",children:"Test Storage"}),o.jsx("button",{onClick:a,className:"bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-lg transition-colors",children:"Test Registration"}),o.jsx("button",{onClick:c,className:"bg-orange-600 hover:bg-orange-700 text-white py-3 px-6 rounded-lg transition-colors",children:"Test Existing Data"}),o.jsx("button",{onClick:u,className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] hover:from-[#d15878] hover:to-[#6d6edd] text-white py-3 px-6 rounded-lg transition-all duration-300 hover:scale-105 col-span-full lg:col-span-1",children:"Run All Tests"})]}),t&&o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Status:"}),o.jsx("p",{className:"text-sm",children:t})]}),Object.keys(n).length>0&&o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Test Results:"}),o.jsx("div",{className:"space-y-2",children:Object.entries(n).map(([d,h])=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("span",{className:"capitalize",children:[d,":"]}),o.jsx("span",{className:h.includes("✅")?"text-green-400":h.includes("❌")?"text-red-400":"text-yellow-400",children:h})]},d))})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Production Checklist:"}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Firebase Configuration"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Authentication System"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Role-Based Access Control"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Startup Registration Flow"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Profile Page Generation"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Logo Upload System"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Email Invitation System"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Dashboard Functionality"})]})]})]})]})})},vR=()=>{const[t,e]=C.useState(""),[n,s]=C.useState({}),r=async()=>{try{e("Testing Firestore write...");const d={name:"Test Startup "+Date.now(),tagline:"Test Tagline",story:"Test Story",sector:"Technology",badges:["AI","ML"],team:[{name:"Test Member",role:"Developer",linkedin:"",github:"",portfolio:"",pitchVideo:"",hiring:!1}],slug:"test-startup-"+Date.now(),createdAt:new Date,status:"active",createdBy:"test@example.com",logo:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjMDAwIi8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlRlc3Q8L3RleHQ+Cjwvc3ZnPgo=",isTemplateCompatible:!0,templateVersion:"1.0",profileCreatedAt:new Date,lastUpdated:new Date},h=je(G,"startups",d.slug);await ht(h,d),(await Ot(h)).exists()?(s(g=>({...g,firestoreWrite:"✅ Success"})),e("Firestore write test completed")):(s(g=>({...g,firestoreWrite:"❌ Failed"})),e("Firestore write test failed"))}catch(d){s(h=>({...h,firestoreWrite:`❌ Error: ${d}`})),e("Firestore write test error")}},i=async()=>{try{e("Testing Firebase Storage upload...");const d=document.createElement("canvas");d.width=100,d.height=100;const h=d.getContext("2d");h&&(h.fillStyle="#e86888",h.fillRect(0,0,100,100),h.fillStyle="white",h.font="20px Arial",h.fillText("TEST",25,55)),d.toBlob(async f=>{if(f){const g=new File([f],"test-logo.png",{type:"image/png"}),x=await Yx(g,"TestStartup");x.success&&x.url?(s(w=>({...w,storageUpload:"✅ Success"})),e("Storage upload test completed")):(s(w=>({...w,storageUpload:`❌ Failed: ${x.error}`})),e("Storage upload test failed"))}})}catch(d){s(h=>({...h,storageUpload:`❌ Error: ${d}`})),e("Storage upload test error")}},a=async()=>{try{e("Testing complete registration flow...");const d={name:"Complete Test Startup "+Date.now(),tagline:"Complete Test Tagline",story:"Complete Test Story",sector:"Technology",badges:["AI","ML","SaaS"],team:[{name:"Test Founder",role:"CEO",linkedin:"https://linkedin.com/test",github:"https://github.com/test",portfolio:"https://portfolio.com/test",pitchVideo:"https://youtube.com/test",hiring:!0}],website:"https://teststartup.com",appStore:"https://apps.apple.com/test",playStore:"https://play.google.com/test",demoUrl:"https://demo.teststartup.com",contactEmail:"test@teststartup.com",contactPhone:"+1234567890",productVideo:"https://youtube.com/product",pitchDeck:"https://slides.com/pitch",qrCode:"https://qr.teststartup.com",problem:"Test problem description",solution:"Test solution description",collaborationMessage:"Test collaboration message",slug:"complete-test-startup-"+Date.now(),createdAt:new Date,status:"active",createdBy:"test@example.com",logo:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjMDAwIi8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlRlc3Q8L3RleHQ+Cjwvc3ZnPgo=",isTemplateCompatible:!0,templateVersion:"1.0",profileCreatedAt:new Date,lastUpdated:new Date},h=je(G,"startups",d.slug);await ht(h,d);const f=await Ot(h);if(f.exists()){const g=f.data();console.log("✅ Registration data saved:",g);const x=`/startup/${d.slug}`;console.log("✅ Profile URL generated:",x),s(w=>({...w,registrationFlow:"✅ Success - Data saved and profile URL generated",profileUrl:x})),e("Complete registration flow test completed")}else s(g=>({...g,registrationFlow:"❌ Failed - Data not saved"})),e("Registration flow test failed")}catch(d){s(h=>({...h,registrationFlow:`❌ Error: ${d}`})),e("Registration flow test error")}},c=async()=>{try{e("Testing existing data...");const d=ue(G,"startups"),h=await Te(d);if(h.size>0){const f=h.docs.map(g=>({id:g.id,...g.data()}));console.log("✅ Found existing startups:",f),s(g=>({...g,existingData:`✅ Found ${h.size} startups`,startupCount:h.size})),e("Existing data test completed")}else s(f=>({...f,existingData:"⚠️ No existing data found"})),e("No existing data found")}catch(d){s(h=>({...h,existingData:`❌ Error: ${d}`})),e("Existing data test error")}},u=async()=>{e("Running all tests..."),s({}),await r(),await i(),await a(),await c(),e("All tests completed")};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Registration & Storage Test"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[o.jsx("button",{onClick:r,className:"bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg transition-colors",children:"Test Firestore Write"}),o.jsx("button",{onClick:i,className:"bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg transition-colors",children:"Test Storage Upload"}),o.jsx("button",{onClick:a,className:"bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-lg transition-colors",children:"Test Registration Flow"}),o.jsx("button",{onClick:c,className:"bg-orange-600 hover:bg-orange-700 text-white py-3 px-6 rounded-lg transition-colors",children:"Test Existing Data"}),o.jsx("button",{onClick:u,className:"bg-gradient-to-r from-[#e86888] to-[#7d7eed] hover:from-[#d15878] hover:to-[#6d6edd] text-white py-3 px-6 rounded-lg transition-all duration-300 hover:scale-105 col-span-full lg:col-span-1",children:"Run All Tests"})]}),t&&o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Status:"}),o.jsx("p",{className:"text-sm",children:t})]}),Object.keys(n).length>0&&o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Test Results:"}),o.jsx("div",{className:"space-y-2",children:Object.entries(n).map(([d,h])=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("span",{className:"capitalize",children:[d,":"]}),o.jsx("span",{className:h.includes("✅")?"text-green-400":h.includes("❌")?"text-red-400":"text-yellow-400",children:h})]},d))})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Backend Status:"}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Firebase Configuration"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Firestore Database"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Firebase Storage"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Image Upload System"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Registration Flow"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-xs",children:"✓"}),o.jsx("span",{children:"Profile Generation"})]})]})]})]})})},bR=()=>{const[t,e]=C.useState([]),[n,s]=C.useState(!0),[r,i]=C.useState(null);return C.useEffect(()=>{(async()=>{try{s(!0),console.log("🔍 Debug: Fetching ALL startups from database...");const c=ue(G,"startups"),d=(await Te(c)).docs.map(h=>{const f=h.data();return{id:h.id,...f}});console.log("✅ Debug: Found startups in database:",d.length),console.log("✅ Debug: All startup data:",d),e(d),i(null)}catch(c){console.error("❌ Debug: Error fetching startups:",c),i(c instanceof Error?c.message:"Unknown error")}finally{s(!1)}})()},[]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Database Debug - Startup Check"}),n&&o.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-6",children:o.jsx("p",{className:"text-lg",children:"Loading startup data..."})}),r&&o.jsxs("div",{className:"bg-red-500/20 backdrop-blur-sm rounded-lg p-6 mb-6 border border-red-500/50",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2 text-red-400",children:"Error:"}),o.jsx("p",{className:"text-red-300",children:r})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Database Summary:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-blue-400",children:"Total Startups"}),o.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-green-400",children:"Active Startups"}),o.jsx("p",{className:"text-2xl font-bold",children:t.filter(a=>a.status==="active").length})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-purple-400",children:"Sectors"}),o.jsx("p",{className:"text-2xl font-bold",children:new Set(t.map(a=>a.sector).filter(Boolean)).size})]})]})]}),t.length>0?o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"All Startups in Database:"}),o.jsx("div",{className:"space-y-4",children:t.map((a,c)=>o.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-semibold text-lg",children:a.name||"Unnamed Startup"}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.status==="active"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:a.status||"unknown"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"ID:"})," ",a.id]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Sector:"})," ",a.sector||"Not specified"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Created:"})," ",a.createdAt?new Date(a.createdAt.toDate?a.createdAt.toDate():a.createdAt).toLocaleDateString():"Unknown"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Created By:"})," ",a.createdBy||"Unknown"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Slug:"})," ",a.slug||"No slug"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Has Logo:"})," ",a.logo?"✅ Yes":"❌ No"]})]}),a.tagline&&o.jsxs("p",{className:"text-white/70 mt-2 italic",children:['"',a.tagline,'"']})]},a.id||c))})]}):o.jsxs("div",{className:"bg-yellow-500/20 backdrop-blur-sm rounded-lg p-6 border border-yellow-500/50",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2 text-yellow-400",children:"No Startups Found"}),o.jsx("p",{className:"text-yellow-300",children:"No startups were found in the database. This could mean:"}),o.jsxs("ul",{className:"text-yellow-300 mt-2 list-disc list-inside space-y-1",children:[o.jsx("li",{children:"No startups have been registered yet"}),o.jsx("li",{children:"There's an issue with the database connection"}),o.jsx("li",{children:"The startups collection doesn't exist"}),o.jsx("li",{children:"There's a permissions issue"})]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mt-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Debug Information:"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Database:"})," Firestore"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Collection:"})," startups"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Query:"})," getDocs(collection(db, 'startups'))"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Filters:"})," None (fetching all documents)"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Timestamp:"})," ",new Date().toLocaleString()]})]})]})]})})},wR=()=>{const{currentUser:t}=mt(),[e,n]=C.useState(""),[s,r]=C.useState("general"),[i,a]=C.useState(""),c=async()=>{if(!t){a("Error: No user logged in");return}if(!e.trim()){a("Error: Please enter a comment");return}try{a("Submitting comment...");const u={investorId:t.uid,investorName:t.displayName||t.email,startupId:"test-startup-id",comment:e.trim(),timestamp:new Date,type:s};console.log("Submitting comment:",u);const d=await Xt(ue(G,"comments"),u);a(`Success! Comment added with ID: ${d.id}`),n("")}catch(u){console.error("Error submitting comment:",u),a(`Error: ${u.message}`)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Comment Submission Test"}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Test Comment Submission"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Comment Type:"}),o.jsxs("select",{value:s,onChange:u=>r(u.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm focus:outline-none focus:border-[#e86888]",style:{color:"white",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[o.jsx("option",{value:"general",style:{backgroundColor:"#1f2937",color:"white"},children:"General Comment"}),o.jsx("option",{value:"investment",style:{backgroundColor:"#1f2937",color:"white"},children:"Investment Related"}),o.jsx("option",{value:"hiring",style:{backgroundColor:"#1f2937",color:"white"},children:"Hiring Related"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Comment Text:"}),o.jsx("textarea",{value:e,onChange:u=>n(u.target.value),placeholder:"Enter your test comment...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm focus:outline-none focus:border-[#e86888] resize-none",rows:4})]}),o.jsx("button",{onClick:c,className:"w-full py-3 bg-gradient-to-r from-[#e86888] to-[#7d7eed] text-white rounded-lg font-medium transition-all duration-300 hover:scale-105",children:"Test Comment Submission"})]})]}),i&&o.jsxs("div",{className:`bg-white/10 backdrop-blur-sm rounded-lg p-6 ${i.includes("Error")?"border border-red-500/50":"border border-green-500/50"}`,children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Status:"}),o.jsx("p",{className:i.includes("Error")?"text-red-300":"text-green-300",children:i})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Debug Information:"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Current User:"})," ",(t==null?void 0:t.email)||"Not logged in"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"User ID:"})," ",(t==null?void 0:t.uid)||"N/A"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Display Name:"})," ",(t==null?void 0:t.displayName)||"N/A"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Comment Type:"})," ",s]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-white/60",children:"Comment Length:"})," ",e.length," characters"]})]})]})]})})},_R=()=>{const{currentUser:t}=mt(),[e,n]=C.useState([]),[s,r]=C.useState(!1),i=async()=>{try{r(!0),console.log("Fetching comments from Firestore...");const c=ue(G,"comments"),u=Zo(c,qg("timestamp","desc")),h=(await Te(u)).docs.map(f=>{var x,w;const g=f.data();return console.log("Comment doc:",{id:f.id,...g}),{id:f.id,...g,timestamp:((w=(x=g.timestamp)==null?void 0:x.toDate)==null?void 0:w.call(x))||g.timestamp||new Date}});console.log("Fetched comments:",h),n(h)}catch(c){console.error("Error fetching comments:",c)}finally{r(!1)}},a=async()=>{try{const c={investorId:(t==null?void 0:t.uid)||"test-user",investorName:(t==null?void 0:t.email)||"test@example.com",startupId:"test-startup-123",comment:`Test comment from ${new Date().toLocaleString()}`,timestamp:new Date,type:"general"};console.log("Adding test comment:",c);const u=await Xt(ue(G,"comments"),c);console.log("Comment added with ID:",u.id),await i(),alert("Test comment added successfully!")}catch(c){console.error("Error adding test comment:",c),alert(`Error: ${c}`)}};return C.useEffect(()=>{i()},[]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Comment Debug Tool"}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Actions"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:i,disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105 disabled:opacity-50",children:s?"Loading...":"Refresh Comments"}),o.jsx("button",{onClick:a,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:scale-105",children:"Add Test Comment"})]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Comments (",e.length,")"]}),e.length===0?o.jsx("p",{className:"text-white/60",children:"No comments found."}):o.jsx("div",{className:"space-y-4",children:e.map((c,u)=>o.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-semibold",children:c.investorName}),o.jsxs("p",{className:"text-white/60 text-sm",children:["Startup: ",c.startupId]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.type==="investment"?"bg-green-500/20 text-green-400":c.type==="hiring"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:c.type})]}),o.jsx("p",{className:"text-white/90 text-sm mb-2",children:c.comment}),o.jsxs("div",{className:"flex justify-between items-center text-xs text-white/60",children:[o.jsxs("span",{children:["ID: ",c.id]}),o.jsx("span",{children:new Date(c.timestamp).toLocaleString()})]})]},c.id))})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mt-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Raw Data"}),o.jsx("pre",{className:"text-white/80 text-xs bg-black/20 p-3 rounded-md overflow-auto max-h-60",children:JSON.stringify(e,null,2)})]})]})})},pt=({children:t,allowedRoles:e})=>{const{currentUser:n,loading:s}=mt();return s?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:o.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):n?e.includes(n.role)?o.jsx(o.Fragment,{children:t}):o.jsx(br,{to:"/"}):o.jsx(br,{to:"/login"})},TR=()=>{const{currentUser:t,loading:e}=mt();if(e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:o.jsx("div",{className:"text-white text-xl",children:"Loading..."})});if(t)switch(t.role){case"investor":return o.jsx(br,{to:"/investor-dashboard"});case"college":return o.jsx(br,{to:"/college-dashboard"});case"admin":return o.jsx(br,{to:"/admin-dashboard"})}return o.jsxs(o.Fragment,{children:[o.jsx(qC,{}),o.jsx(JC,{}),o.jsx(Jx,{}),o.jsx(YC,{}),o.jsx(XC,{}),o.jsx(eR,{}),o.jsx(tR,{}),o.jsx(nR,{}),o.jsx(sR,{}),o.jsx(rR,{})]})},IR=()=>o.jsx(N0,{children:o.jsxs("div",{className:"App",children:[o.jsx(zC,{}),o.jsxs(A0,{children:[o.jsx(Oe,{path:"/setup",element:o.jsx(bC,{})}),o.jsx(Oe,{path:"/login",element:o.jsx(fC,{})}),o.jsx(Oe,{path:"/register",element:o.jsx(pC,{})}),o.jsx(Oe,{path:"/register/:token",element:o.jsx(cR,{})}),o.jsx(Oe,{path:"/startup/:slug",element:o.jsx(dR,{})}),o.jsx(Oe,{path:"/investor-dashboard",element:o.jsx(pt,{allowedRoles:["investor"],children:o.jsx(UC,{})})}),o.jsx(Oe,{path:"/college-dashboard",element:o.jsx(pt,{allowedRoles:["college"],children:o.jsx(BC,{})})}),o.jsx(Oe,{path:"/admin-dashboard",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx($C,{})})}),o.jsx(Oe,{path:"/admin/invite",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx(iR,{})})}),o.jsx(Oe,{path:"/admin/email-test",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx(oR,{})})}),o.jsx(Oe,{path:"/admin/auth-test",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx(pR,{})})}),o.jsx(Oe,{path:"/admin/profile-manager",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx(yR,{})})}),o.jsx(Oe,{path:"/admin/production-test",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx(xR,{})})}),o.jsx(Oe,{path:"/admin/registration-test",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx(vR,{})})}),o.jsx(Oe,{path:"/admin/database-debug",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx(bR,{})})}),o.jsx(Oe,{path:"/admin/comment-test",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx(wR,{})})}),o.jsx(Oe,{path:"/admin/comment-debug",element:o.jsx(pt,{allowedRoles:["admin"],children:o.jsx(_R,{})})}),o.jsx(Oe,{path:"/",element:o.jsx(TR,{})})]})]})}),ER=()=>o.jsx(gR,{children:o.jsx(MN,{children:o.jsx(IR,{})})});Af(document.getElementById("root")).render(o.jsx(C.StrictMode,{children:o.jsx(ER,{})}));
